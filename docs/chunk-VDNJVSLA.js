import{$ as J,$a as _t,A as dt,Aa as Ft,B as le,Ba as er,C as Re,Ca as tr,D as ie,Da as yn,E as d,Ea as nr,F as p,Fa as Lt,G as _,Ga as Ze,H as Ws,Ha as ir,I as Bs,Ia as sr,J as R,Ja as rr,K as y,Ka as or,L as m,La as ar,M as pn,Ma as lr,N as _n,Na as cr,O as P,Oa as ci,P as fe,Q as oe,Qa as _e,R as Hs,Ra as Ve,S as G,Sa as se,T as te,Ta as Ge,U as D,Ua as ut,V as F,Va as je,Wa as z,X,Xa as ft,Y as pe,Ya as dr,Z as zs,Za as hr,_ as mn,_a as pt,a as Ae,ab as wn,b as ct,bb as Sn,cb as xn,d as M,da as gn,db as We,e as q,ea as Us,fa as Le,g as Y,ga as bn,gb as Xe,hb as me,i as Q,ia as b,j as V,ja as ht,jb as ge,ka as qs,kb as be,l as hn,la as Ys,lb as Ce,ma as Ks,n as w,na as $s,o as S,oa as Cn,p as T,pa as Qs,q as Z,qa as ai,r as un,ra as Zs,sa as Me,t as fn,ta as vn,u as g,ua as K,v as k,va as Xs,wa as Js,xa as Te,y as I,ya as Qe,z as C,za as li}from"./chunk-SCMEIW5N.js";var ce=(()=>{let e=class e{constructor(){this.notificationAdded=new q}push(i){this.notificationAdded.next(i)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ya=n=>({background:n});function wa(n,e){if(n&1&&(d(0,"div",3),P(1),p()),n&2){let t=e.$implicit;le(te(3,ya,t.success?"aquamarine":"lightcoral")),g(),fe(t.message)}}var ur=(()=>{let e=class e{constructor(i){this.notificationsService=i,this.notifications=[],this.timeout=1500}ngOnInit(){this.notificationsService.notificationAdded.subscribe(i=>this.handleNotification(i))}handleNotification(i){this.notifications.push(i),this.clearNext()}clearNext(){setTimeout(()=>this.notifications.splice(0,1),this.timeout)}};e.\u0275fac=function(s){return new(s||e)(k(ce))},e.\u0275cmp=V({type:e,selectors:[["app-notifications"]],standalone:!0,features:[G],decls:3,vars:1,consts:[[1,"container"],[1,"bubble-container"],["class","bubble",3,"style",4,"ngFor","ngForOf"],[1,"bubble"]],template:function(s,r){s&1&&(d(0,"div",0)(1,"div",1),I(2,wa,2,5,"div",2),p()()),s&2&&(g(2),C("ngForOf",r.notifications))},dependencies:[J,X],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}.container[_ngcontent-%COMP%]{position:absolute;z-index:12;top:0;left:0;width:100%;display:flex;flex-direction:row;justify-content:center}.bubble-container[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;justify-content:center;margin-top:.5rem;gap:.5rem}.bubble[_ngcontent-%COMP%]{border-radius:16px;width:fit-content;padding:.25rem 1rem;box-shadow:0 1px 3px gray;margin:auto;font-size:20px}"]});let n=e;return n})();var Sa=["*"],mt=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=V({type:e,selectors:[["app-modal"]],standalone:!0,features:[G],ngContentSelectors:Sa,decls:3,vars:0,consts:[[1,"background"],[1,"content"]],template:function(s,r){s&1&&(pn(),d(0,"div",0)(1,"div",1),_n(2),p()())},styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}.background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100vw;height:100vh;background:#80808080;z-index:10;display:flex;flex-direction:column;justify-content:center}.content[_ngcontent-%COMP%]{z-index:11;display:flex;flex-direction:column;justify-content:space-between;text-align:center;background:#dedede;margin:auto;font-size:24px;box-shadow:0 1px 2px gray;border-radius:10px;padding:1.5rem;width:75%;max-width:700px}@media screen and (max-width: 500px),screen and (max-height: 800px){.content[_ngcontent-%COMP%]{width:85%;height:85%;padding:4%}}"]});let n=e;return n})();var fr=[{id:0,goal:"ab",base:"from, off",goal_sent_1:"Die Fahrt kostet ab Hamburg 200 Euro.",base_sent_1:"The journey costs 200 Euro from Hamburg.",goal_sent_2:"Ab n\xE4chster Woche bleibt unser Gesch\xE4ft samstags geschlossen.",base_sent_2:"From next week, our business will be closed on Saturdays.",starred:!1,type:"other"},{id:1,goal:"abbiegen, biegt ab, bog ab, ist abgebogen",base:"to turn off, bend",goal_sent_1:"An der n\xE4chsten Kreuzung m\xFCssen Sie links abbiegen.",base_sent_1:"At the next junction you have to turn left.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:2,goal:"die Abbildung, -en",base:"Illustration",goal_sent_1:"Hier in der Abbildung sehen Sie, wie man das Ger\xE4t einschaltet.",base_sent_1:"Here you can see how to turn on the device.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:3,goal:"aber",base:"but",goal_sent_1:"Heute kann ich nicht, aber morgen ganz bestimmt.",base_sent_1:"I can not today, but certainly tomorrow.",goal_sent_2:"Es lag sehr viel Schnee, aber Enzo ist trotzdem mit dem Motorrad gefahren.",base_sent_2:"There was a lot of snow, but Enzo went by motorbike anyway.",starred:!1,type:"other"},{id:4,goal:'der Abfall, -"e',base:"waste, rubbish, garbage",goal_sent_1:"Werfen Sie den Bioabfall in die gr\xFCne Tonne.",base_sent_1:"Throw the bio-waste into the green bin.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"masculine"},{id:5,goal:"abfahren, f\xE4hrt ab, fuhr ab, ist abgefahren",base:"to depart",goal_sent_1:"Unser Zug ist p\xFCnktlich abgefahren.",base_sent_1:"Our train left on time.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:6,goal:"das Abgas, -e",base:"exhaust, waste gas",goal_sent_1:"Abgase aus Industrie und Haushalten verschmutzen die Luft.",base_sent_1:"Exhaust gases from industry and households pollute the air.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"neuter"},{id:7,goal:"abgeben, gibt ab, gab ab, hat abgegeben",base:"to hand in",goal_sent_1:"Ich soll dieses P\xE4ckchen bei Herrn M\xFCller abgeben.",base_sent_1:"I should hand over this package to Mr. M\xFCller.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:8,goal:"abh\xE4ngen, h\xE4ngt ab, hing ab, hat abgehangen",base:"to take down, uncouple, depend upon",goal_sent_1:"Vielleicht bleiben wir ein paar Tage l\xE4nger, das h\xE4ngt vom Wetter ab.",base_sent_1:"Maybe we stay a few days longer, it depends on the weather.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:9,goal:"abh\xE4ngig",base:"dependent on",goal_sent_1:"Gregor ist finanziell von seinen Eltern abh\xE4ngig.",base_sent_1:"Gregor is financially dependent on his parents.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"other"},{id:10,goal:"abheben, hebt ab, hob ab, hat abgehoben",base:"to lift (up)",goal_sent_1:"F\xFCr die Reise habe ich 500 Euro von meinem Konto abgehoben.",base_sent_1:"For the trip, I have lifted 500 \u20AC from my account.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:11,goal:"abholen, holt ab, holte ab, hat abgeholt",base:"to pick up (from a place)",goal_sent_1:"Meine Freundin hat mich vom Bahnhof abgeholt.",base_sent_1:"My girlfriend picked me up from the train station.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:12,goal:"das Abitur (Sg.)",base:"school graduation exam",goal_sent_1:"Meine Tochter hat gerade Abitur gemacht.",base_sent_1:"My daughter just graduated from high school.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"neuter"},{id:13,goal:"ablehnen, lehnt ab, lehnte ab, hat abgelehnt",base:"to refuse",goal_sent_1:"Es tut mir leid, Ihr Antrag ist abgelehnt.",base_sent_1:"I'm sorry, your application is rejected.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:14,goal:"abmachen, macht ab, machte ab, hat abgemacht",base:"to take off, agree",goal_sent_1:"Wir hatten doch abgemacht, dass du die Getr\xE4nke besorgst.",base_sent_1:"We had agreed that you get the drinks.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:15,goal:"abnehmen, nimmt ab, nahm ab, hat abgenommen",base:"to take off, remove, take away, loose weight",goal_sent_1:"Morgen k\xF6nnen wir den Verband abnehmen.",base_sent_1:"Tomorrow we can remove the bandage.",goal_sent_2:"Ich habe zehn Kilo abgenommen.",base_sent_2:"I lost ten pounds.",starred:!1,type:"verb"},{id:16,goal:"abonnieren, abonniert, abonnierte, hat abonniert",base:"to subscribe",goal_sent_1:"Diese Zeitschrift w\xFCrde ich gerne abonnieren.",base_sent_1:"I would like to subscribe to this magazine.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:17,goal:"das Abonnement, -s",base:"subscription",goal_sent_1:"Ich habe das Abonnement gek\xFCndigt.",base_sent_1:"I have canceled the subscription.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"neuter"},{id:18,goal:'der Abschluss, -"sse',base:"school graduation or result",goal_sent_1:"Ein guter Schulabschluss ist sehr wichtig.",base_sent_1:"A good education is very important.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"masculine"},{id:19,goal:"der Absender, -",base:"sender",goal_sent_1:"Schicken Sie das P\xE4ckchen an den Absender zur\xFCck.",base_sent_1:"Send the parcel back to the sender.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"masculine"},{id:20,goal:"die Absicht, -en",base:"intention",goal_sent_1:"Entschuldigen Sie bitte. Meine Tochter hat das nicht mit Absicht gemacht.",base_sent_1:"Excuse me please. My daughter did not do that on purpose.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:21,goal:"absolut",base:"absolute",goal_sent_1:"Was Sie da sagen, ist absolut falsch.",base_sent_1:"What you say is absolutely wrong.",goal_sent_2:"Ich habe absolutes Vertrauen zu dir.",base_sent_2:"I have absolute confidence in you.",starred:!1,type:"other"},{id:22,goal:"abstimmen, stimmt ab, stimmte ab, hat abgestimmt",base:"to vote",goal_sent_1:"Lasst uns \xFCber diesen Punkt abstimmen.",base_sent_1:"Let's vote on this point.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:23,goal:"die Abteilung, -en",base:"Department",goal_sent_1:"Meine Freundin arbeitet in der Abteilung von Frau Kaufmann.",base_sent_1:"My girlfriend works in the department of Mrs. Kaufmann.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:24,goal:"abwaschen, w\xE4scht ab, wusch ab, hat abgewaschen",base:"wash up",goal_sent_1:"Ich muss noch das Geschirr abwaschen.",base_sent_1:"I still have to wash the dishes.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"other"},{id:25,goal:"ach",base:"Oh",goal_sent_1:"Sie sind krank? Ach, das tut mir aber leid.",base_sent_1:"You are sick? Oh, I'm sorry.",goal_sent_2:"Ach so! Jetzt verstehe ich, was Sie meinen.",base_sent_2:"Oh, right! Now I understand what you mean.",starred:!1,type:"other"},{id:26,goal:"achten auf, achtet, achtete, hat geachtet",base:"to pay attention (to)",goal_sent_1:"Achten Sie bitte darauf, dass abends immer alle Fenster geschlossen sind.",base_sent_1:"Please make sure that all windows are closed in the evening.",goal_sent_2:"Hier m\xFCssen Sie auf die Vorfahrt achten.",base_sent_2:"Here you must pay attention to the right of way.",starred:!1,type:"verb"},{id:27,goal:"die Achtung (Sg.)",base:"Danger, Attention",goal_sent_1:"Achtung, hier endet die Stra\xDFe!",base_sent_1:"Attention, the road ends here!",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:28,goal:"die Adresse, -n",base:"address",goal_sent_1:"Hast du schon meine neue Adresse?",base_sent_1:"Do you already have my new address?",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:29,goal:"die Agentur, -en",base:"Agency",goal_sent_1:"Ich habe einen Brief von der Agentur f\xFCr Arbeit bekommen.",base_sent_1:"I got a letter from the employment agency.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:30,goal:"\xE4hnlich",base:"similar",goal_sent_1:"Oleg sieht seinem Bruder sehr \xE4hnlich.",base_sent_1:"Oleg looks very much like his brother.",goal_sent_2:"Emilia ist in einer ganz \xE4hnlichen Situation wie ich.",base_sent_2:"Emilia is in a similar situation to me.",starred:!1,type:"other"},{id:31,goal:"aha",base:"Aha",goal_sent_1:"Ich gehe bald in Rente. - Aha, dann haben Sie ja viel Zeit f\xFCr Ihre Hobbys.",base_sent_1:"I'm retiring soon. - Aha, then you have a lot of time for your hobbies.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"other"},{id:32,goal:"die Ahnung, -en",base:"idea, suspicion",goal_sent_1:"Ich hatte keine Ahnung, dass du heute Geburtstag hast.",base_sent_1:"I had no idea that you have a birthday today.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:33,goal:"die Aktion, -en",base:"action",goal_sent_1:"Die Regierung plant eine Aktion gegen das Rauchen.",base_sent_1:"The government is planning an action against smoking.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:34,goal:"aktiv",base:"active",goal_sent_1:"Ich bin sehr aktiv und mache viel Sport.",base_sent_1:"I am very active and do a lot of sports.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"other"},{id:35,goal:"die Aktivit\xE4t, -en",base:"activity",goal_sent_1:"In den Ferien bietet die Stadt f\xFCr Kinder verschiedene Freizeitaktivit\xE4ten.",base_sent_1:"During the holidays, the city offers various leisure activities for children.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:36,goal:"aktuell",base:"current (now)",goal_sent_1:"Umweltschutz ist ein aktuelles Thema.",base_sent_1:"Environmental protection is a current topic.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"other"},{id:37,goal:"akzeptieren, akzeptiert, akzeptierte, hat akzeptiert",base:"to accept",goal_sent_1:"Ich kann diese Bedingungen nicht akzeptieren.",base_sent_1:"I can not accept these conditions.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:38,goal:"der Alarm, -e",base:"alarm",goal_sent_1:"Bei Feueralarm d\xFCrfen Sie die Aufz\xFCge nicht benutzen.",base_sent_1:"In case of fire alarm you are not allowed to use the lifts.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"masculine"},{id:39,goal:"der Alkohol, -e",base:"alcohol",goal_sent_1:"Du musst die Wunde mit Alkohol reinigen.",base_sent_1:"You have to clean the wound with alcohol.",goal_sent_2:"Nein, danke! Ich trinke keinen Alkohol.",base_sent_2:"No thanks! I do not drink alcohol.",starred:!1,type:"masculine"},{id:40,goal:"all-",base:"everything",goal_sent_1:"Alles Gute!",base_sent_1:"All the best!",goal_sent_2:"Sonst noch (et)was? - Nein, danke. Das ist alles.",base_sent_2:"Anything else? - No thanks. That's all.",starred:!1,type:"other"},{id:41,goal:"allein",base:"alone",goal_sent_1:"Ich gehe nicht gern allein spazieren.",base_sent_1:"I do not like to go for a walk alone.",goal_sent_2:"Soll ich Ihnen helfen? - Danke, ich schaffe es schon allein.",base_sent_2:"Can I help you? - Thanks, I can do it alone.",starred:!1,type:"other"},{id:42,goal:"aller",base:"all",goal_sent_1:"Am allerbesten ist es, wenn du dich ins Bett legst und lange schl\xE4fst. Dann wirst du schnell wieder gesund.",base_sent_1:"Best of all, when you go to bed and sleep for a long time. Then you will get well soon.",goal_sent_2:"Das ist das Allersch\xF6nste, was ich je gesehen habe.",base_sent_2:"That's the most beautiful thing I've ever seen.",starred:!1,type:"other"},{id:43,goal:"allerdings",base:"admittedly, certainly",goal_sent_1:"Sie k\xF6nnen sich noch f\xFCr den Kurs anmelden, allerdings nur noch bis morgen.",base_sent_1:"You can still register for the course, but only until tomorrow.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"other"},{id:44,goal:"allgemein",base:"general",goal_sent_1:"Im Allgemeinen bin ich mit meiner Arbeit sehr zufrieden.",base_sent_1:"In general I am very satisfied with my work.",goal_sent_2:"Wir haben nur \xFCber allgemeine Probleme gesprochen.",base_sent_2:"We only talked about general problems.",starred:!1,type:"other"},{id:45,goal:"der Alltag, -e",base:"daily routine",goal_sent_1:"Das ist mein Alltag: putzen, waschen, kochen.",base_sent_1:"This is my everyday life: cleaning, washing, cooking.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"masculine"},{id:46,goal:"das Alphabet, -e",base:"alphabet",goal_sent_1:"Wie viele Buchstaben hat das Alphabet Ihrer Sprache?",base_sent_1:"How many letters does the alphabet have in your language?",goal_sent_2:"",base_sent_2:"",starred:!1,type:"neuter"},{id:47,goal:"als",base:"when, as, than",goal_sent_1:"Als mein Mann kam, war die Party schon zu Ende.",base_sent_1:"When my husband came, the party was over.",goal_sent_2:"Sie k\xF6nnen sich sowohl pers\xF6nlich als auch per Internet anmelden.",base_sent_2:"You can register both in person and via the internet.",starred:!1,type:"other"},{id:48,goal:"als ob",base:"as if",goal_sent_1:"Der Chef tat so, als ob wir nie dar\xFCber gesprochen h\xE4tten.",base_sent_1:"The boss pretended we never talked about it.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"other"},{id:49,goal:"also",base:"so, therefore",goal_sent_1:"Also, die Sache ist so: ...",base_sent_1:"So, the thing is ...",goal_sent_2:"Irina hat Urlaub. Sie kann uns also helfen.",base_sent_2:"Irina is on vacation. So she can help us.",starred:!1,type:"other"},{id:50,goal:"alt",base:"old",goal_sent_1:"Wie alt sind Sie?",base_sent_1:"How old are they?",goal_sent_2:"Maria ist eine alte Freundin von mir.",base_sent_2:"Maria is an old friend of mine.",starred:!1,type:"other"},{id:51,goal:"das Alter, -",base:"age",goal_sent_1:"Wir sind etwa im gleichen Alter.",base_sent_1:"We are about the same age.",goal_sent_2:"Im Alter bekomme ich eine ausreichende Rente.",base_sent_2:"At the age I get a sufficient pension.",starred:!1,type:"neuter"},{id:52,goal:"das Altenheim, -e",base:"old people's home, retirement home",goal_sent_1:"In Deutschland leben viele alte Leute in Altenheimen.",base_sent_1:"In Germany, many old people live in retirement homes.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"neuter"},{id:53,goal:"das Altersheim, -e",base:"old people's home, retirement home",goal_sent_1:"Die Gro\xDFeltern unserer Nachbarn sind im Altersheim.",base_sent_1:"The grandparents of our neighbors are in the retirement home.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"neuter"},{id:54,goal:"an",base:"on",goal_sent_1:"Am Anfang war alles sehr schwierig.",base_sent_1:"In the beginning everything was very difficult.",goal_sent_2:"Dann sehen wir uns also am Dienstag.",base_sent_2:"See you on Tuesday.",starred:!1,type:"other"},{id:55,goal:"die Ampel, -n",base:"traffic light",goal_sent_1:"Dort an der Ampel kannst du \xFCber die Stra\xDFe gehen.",base_sent_1:"There at the traffic light you can cross the street.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:56,goal:'das Amt, -"er',base:"office",goal_sent_1:"Die \xC4mter haben heute geschlossen.",base_sent_1:"The offices have closed today.",goal_sent_2:"Wissen Sie, wo das Ordnungsamt ist?",base_sent_2:"Do you know where the public order office is?",starred:!1,type:"neuter"},{id:57,goal:"sich am\xFCsieren, am\xFCsiert sich, am\xFCsierte sich, hat sich am\xFCsiert",base:"to amuse oneself",goal_sent_1:"Bei dem Fest haben wir uns sehr gut am\xFCsiert.",base_sent_1:"We had a good time at the party.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:58,goal:"analysieren, analysiert, analysierte, hat analysiert",base:"to analyse",goal_sent_1:"Die Politiker analysieren die Situation auf dem Arbeitsmarkt.",base_sent_1:"The politicians analyze the situation on the job market.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:59,goal:"anbieten, bietet an, bot an, hat angeboten",base:"to offer",goal_sent_1:"Darf ich Ihnen etwas zu trinken anbieten?",base_sent_1:"May I offer you something to drink?",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:60,goal:"das Angebot, -e",base:"offer",goal_sent_1:"Ich habe ein paar g\xFCnstige Wohnungsangebote bekommen.",base_sent_1:"I got a few cheap housing offers.",goal_sent_2:"Dieser K\xE4se ist heute im Angebot.",base_sent_2:"This cheese is on sale today.",starred:!1,type:"neuter"},{id:61,goal:"ander-",base:"other",goal_sent_1:"Die anderen sind schon nach Hause gegangen.",base_sent_1:"The others have already gone home.",goal_sent_2:"Bitte nicht alle auf einmal! - Einer nach dem anderen.",base_sent_2:"Not all at once! - One after the other.",starred:!1,type:"other"},{id:62,goal:"andererseits",base:"on the other hand",goal_sent_1:"Tarek will zwar studieren. Andererseits m\xF6chte er aber auch gleich Geld verdienen.",base_sent_1:"Tarek wants to study. On the other hand, he also wants to earn money right away.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"other"},{id:63,goal:"\xE4ndern, \xE4ndert, \xE4nderte, hat ge\xE4ndert",base:"to change",goal_sent_1:"Das Wetter hat sich ge\xE4ndert.",base_sent_1:"The weather has changed.",goal_sent_2:"Ich habe meine Meinung inzwischen ge\xE4ndert.",base_sent_2:"I have changed my mind by now.",starred:!1,type:"verb"},{id:64,goal:"die \xC4nderung, -en",base:"modification, change",goal_sent_1:"Es gibt eine Programm\xE4nderung.",base_sent_1:"There is a program change.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:65,goal:"anders",base:"different",goal_sent_1:"Anders geht das leider nicht.",base_sent_1:"Unfortunately, that is not possible.",goal_sent_2:"Oliver ist anders als seine Freunde.",base_sent_2:"Oliver is different than his friends.",starred:!1,type:"other"},{id:66,goal:"anerkennen, erkennt an, erkannte an, hat anerkannt",base:"to recognize",goal_sent_1:"Meine Ausbildung wird hier nicht anerkannt.",base_sent_1:"My education is not recognized here.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:67,goal:"anfangen, f\xE4ngt an, fing an, hat angefangen",base:"to begin",goal_sent_1:"Wann f\xE4ngst du mit der Arbeit an?",base_sent_1:"When do you start working?",goal_sent_2:"Wann haben Sie angefangen, Deutsch zu lernen?",base_sent_2:"When did you start learning German?",starred:!1,type:"verb"},{id:68,goal:'der Anfang, -"e',base:"beginning",goal_sent_1:"Wie war der Film? - Ich habe nur den Anfang gesehen.",base_sent_1:"How was the movie? - I saw only the beginning.",goal_sent_2:"Am Anfang habe ich mich hier sehr fremd gef\xFChlt.",base_sent_2:"In the beginning I felt very strange here.",starred:!1,type:"masculine"},{id:69,goal:"anfangs",base:"at/ in the beginning",goal_sent_1:"Anfangs ging alles gut.",base_sent_1:"At first everything went well.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"other"},{id:70,goal:"die Angabe,-n",base:"information, specification",goal_sent_1:"Wir brauchen von Ihnen folgende Angaben: Name, Adresse, Geburtsdatum.",base_sent_1:"We need the following information from you: name, address, date of birth.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:71,goal:"angeben, gibt an, gab an, hat angegeben",base:"to boast",goal_sent_1:"Bitte geben Sie Ihre genaue Adresse an.",base_sent_1:"Please enter your exact address.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:72,goal:"der Angeh\xF6rige, -n",base:"relative (cousin, etc)",goal_sent_1:"Wir d\xFCrfen nur Familienangeh\xF6rigen Auskunft geben.",base_sent_1:"We may only provide information to family members.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"masculine"},{id:73,goal:"angenehm",base:"pleasant",goal_sent_1:"Wir w\xFCnschen Ihnen eine angenehme Reise.",base_sent_1:"We wish you a pleasant journey.",goal_sent_2:"Welcher Termin w\xE4re Ihnen angenehm?",base_sent_2:"Which date would you like?",starred:!1,type:"other"},{id:74,goal:'die Angst, -"e',base:"fear",goal_sent_1:"Du brauchst keine Angst zu haben. Der Hund tut dir nichts.",base_sent_1:"You do not have to be scared. The dog does nothing to you.",goal_sent_2:"Ich habe Angst, vielleicht ist etwas passiert.",base_sent_2:"I'm scared, maybe something happened.",starred:!1,type:"feminine"},{id:75,goal:"\xE4ngstlich",base:"nervous, worried, timid",goal_sent_1:"Meine Tochter ist etwas \xE4ngstlich. Sie geht nicht gern allein auf die Stra\xDFe.",base_sent_1:"My daughter is a little scared. She does not like to go alone on the street.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"other"},{id:76,goal:"anhaben, hat an, hatte an, hat angehabt",base:"to have on",goal_sent_1:"Gestern hatte Julia ein rotes Kleid an.",base_sent_1:"Yesterday Julia was wearing a red dress.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:77,goal:"ankommen, kommt an, kam an, ist angekommen",base:"to arrive",goal_sent_1:"Wann kommt der Zug in Hamburg an?",base_sent_1:"When does the train arrive in Hamburg?",goal_sent_2:"Es kommt darauf an, dass Sie alle Fragen im Test beantworten.",base_sent_2:"It is important that you answer all the questions in the test.",starred:!1,type:"verb"},{id:78,goal:'die Ankunft, "-e',base:"arrival",goal_sent_1:"Die Abfahrt ist um 0.55 Uhr, die Ankunft um 8.07 Uhr.",base_sent_1:"The departure is at 0.55 clock, the arrival at 8.07 clock.",goal_sent_2:"Gleich nach der Ankunft habe ich meine Eltern angerufen.",base_sent_2:"Immediately after arrival, I called my parents.",starred:!1,type:"feminine"},{id:79,goal:"die Anlage, -n",base:"music system, attachment, investment",goal_sent_1:"Meine Musikanlage ist kaputt.",base_sent_1:"My music system is broken.",goal_sent_2:"In der Anlage finden Sie meinen Lebenslauf.",base_sent_2:"In the attachment you will find my CV.",starred:!1,type:"feminine"},{id:80,goal:"anmelden, meldet an, meldete an, hat angemeldet, angemeldet sein",base:"to announce, make an appointment",goal_sent_1:"F\xFCr diesen Kurs m\xFCssen Sie sich unbedingt vorher anmelden.",base_sent_1:"You absolutely have to register in advance for this course.",goal_sent_2:"Ich melde meinen Sohn im Kindergarten an.",base_sent_2:"I enroll my son in kindergarten.",starred:!1,type:"verb"},{id:81,goal:"die Anmeldung, -en",base:"appointment, announcement",goal_sent_1:"Wo bekomme ich die Formulare f\xFCr die Anmeldung?",base_sent_1:"Where can I get the registration forms?",goal_sent_2:"Die Anmeldung ist im Erdgeschoss, Zimmer 55.",base_sent_2:"The registration is on the ground floor, room 55.",starred:!1,type:"feminine"},{id:82,goal:"die Anrede, -n",base:"form of address",goal_sent_1:"Du darfst im Brief die Anrede nicht vergessen.",base_sent_1:"You must not forget the salutation in the letter.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:83,goal:"anrufen, ruft an, rief an, hat angerufen",base:"to telephone, call, call out",goal_sent_1:"Ich rufe Sie heute Abend an.",base_sent_1:"I'll call you tonight.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:84,goal:"der Anruf, -e",base:"call",goal_sent_1:"Ich warte auf einen Anruf aus Berlin.",base_sent_1:"I'm waiting for a call from Berlin.",goal_sent_2:"Meine Tochter bekommt viele Anrufe auf ihrem Handy.",base_sent_2:"My daughter gets many calls on her mobile.",starred:!1,type:"masculine"},{id:85,goal:"der Anrufbeantworter, -",base:"answering machine",goal_sent_1:"Ich habe dir eine Nachricht auf den Anrufbeantworter gesprochen.",base_sent_1:"I have spoken to you on the answering machine.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"masculine"},{id:86,goal:"die Ansage, -n",base:"announcement",goal_sent_1:"Achten Sie auf die Ansage am Bahnsteig.",base_sent_1:"Pay attention to the announcement on the platform.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"feminine"},{id:87,goal:"anschaffen, schafft an, schaffte an, hat angeschafft",base:"to purchase",goal_sent_1:"Wir haben uns neue M\xF6bel angeschafft.",base_sent_1:"We bought new furniture.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:88,goal:"anschlie\xDFen, schlie\xDFt an, schloss an, hat angeschlossen",base:"to connect",goal_sent_1:"Wo kann ich den Computer anschlie\xDFen?",base_sent_1:"Where can I connect the computer?",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:89,goal:'der Anschluss, -"e',base:"connection (TV, internet)",goal_sent_1:"In Mannheim haben Sie Anschluss nach Saarbr\xFCcken.",base_sent_1:"In Mannheim you have connection to Saarbr\xFCcken.",goal_sent_2:"Ich brauche in meiner Wohnung einen Telefonanschluss.",base_sent_2:"I need a telephone connection in my apartment.",starred:!1,type:"masculine"},{id:90,goal:"anschnallen, schnallt an, schnallte an, hat angeschnallt",base:"to strap in, fasten seat belt",goal_sent_1:"Vergiss nicht, dich anzuschnallen!",base_sent_1:"Do not forget to strap on!",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:91,goal:"ansehen, sieht an, sah an, hat angesehen",base:"to look at",goal_sent_1:"Warum siehst du mich so erschrocken an?",base_sent_1:"Why are you looking at me so startled?",goal_sent_2:"Darf ich eure Urlaubsfotos ansehen?",base_sent_2:"May I take a look at your vacation photos?",starred:!1,type:"verb"},{id:92,goal:"ansprechen, spricht an, sprach an, hat angesprochen",base:"to speak to",goal_sent_1:"Gestern hat mich die neue Mieterin im Treppenhaus angesprochen.",base_sent_1:"Yesterday, the new tenant in the stairwell addressed me.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"},{id:93,goal:'der Anspruch, - "e',base:"claim",goal_sent_1:"Sie wohnen im Stadtzentrum. Deshalb haben Sie keinen Anspruch auf Fahrgeld.",base_sent_1:"You live in the city center. Therefore, you are not entitled to fare.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"masculine"},{id:94,goal:"anstellen, stellt an, stellte an, hat angestellt",base:"to turn on, employ",goal_sent_1:"K\xF6nnen Sie bitte die Heizung anstellen?",base_sent_1:"Can you please turn on the heating?",goal_sent_2:"Mein Schwager ist bei einer M\xF6belfirma angestellt.",base_sent_2:"My brother-in-law is employed by a furniture company.",starred:!1,type:"verb"},{id:95,goal:"der Angestellte, -n",base:"employee",goal_sent_1:"Bj\xF6rn ist Angestellter in einem Reiseb\xFCro.",base_sent_1:"Bj\xF6rn is a clerk in a travel agency.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"masculine"},{id:96,goal:"sich anstrengen, strengt sich an, strengte sich an, hat sich angestrengt",base:"to tire oneself out, strain oneself",goal_sent_1:"Diese Arbeit strengt mich sehr an.",base_sent_1:"This work is very stressful for me.",goal_sent_2:"Wenn du die Pr\xFCfung schaffen willst, musst du dich mehr anstrengen.",base_sent_2:"If you want to pass the exam, you have to work harder.",starred:!1,type:"verb"},{id:97,goal:"anstrengend",base:"exhausting",goal_sent_1:"Ich finde diese Arbeit sehr anstrengend.",base_sent_1:"I find this work very exhausting.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"other"},{id:98,goal:'der Antrag, -"e',base:"application, proposal, motion",goal_sent_1:"Haben Sie schon einen Antrag auf Wohngeld gestellt?",base_sent_1:"Have you already applied for housing allowance?",goal_sent_2:"Die Antr\xE4ge bekommen Sie in Zimmer 47.",base_sent_2:"You will receive the applications in room 47.",starred:!1,type:"masculine"},{id:99,goal:"anwenden, wendet an, wandte an, hat angewandt/angewendet",base:"to use, employ, apply",goal_sent_1:"Diese Salbe muss man dreimal am Tag anwenden.",base_sent_1:"This ointment must be used three times a day.",goal_sent_2:"",base_sent_2:"",starred:!1,type:"verb"}];var pr="@firebase/database",_r="1.0.5";var fs="";function Ma(n){fs=n}var gi=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),K(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:vn(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var bi=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Te(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var qr=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gi(e)}}catch{}return new bi},tt=qr("localStorage"),Ci=qr("sessionStorage");var Ct=new rr("@firebase/database"),Ta=function(){let n=1;return function(){return n++}}(),Yr=function(n){let e=nr(n),t=new tr;t.update(e);let i=t.digest();return qs.encodeByteArray(i)},en=function(...n){let e="";for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=en.apply(null,i):typeof i=="object"?e+=K(i):e+=i,e+=" "}return e},it=null,mr=!0,Ea=function(n,e){b(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Ct.logLevel=sr.VERBOSE,it=Ct.log.bind(Ct),e&&Ci.set("logging_enabled",!0)):typeof n=="function"?it=n:(it=null,Ci.remove("logging_enabled"))},re=function(...n){if(mr===!0&&(mr=!1,it===null&&Ci.get("logging_enabled")===!0&&Ea(!0)),it){let e=en.apply(null,n);it(e)}},tn=function(n){return function(...e){re(n,...e)}},vi=function(...n){let e="FIREBASE INTERNAL ERROR: "+en(...n);Ct.error(e)},De=function(...n){let e=`FIREBASE FATAL ERROR: ${en(...n)}`;throw Ct.error(e),new Error(e)},de=function(...n){let e="FIREBASE WARNING: "+en(...n);Ct.warn(e)},Ia=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&de("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Kr=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Pa=function(n){if(Me()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},yt="[MIN_NAME]",st="[MAX_NAME]",Et=function(n,e){if(n===e)return 0;if(n===yt||e===st)return-1;if(e===yt||n===st)return 1;{let t=gr(n),i=gr(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},Oa=function(n,e){return n===e?0:n<e?-1:1},Vt=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+K(e))},ps=function(n){if(typeof n!="object"||n===null)return K(n);let e=[];for(let i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=K(e[i]),t+=":",t+=ps(n[e[i]]);return t+="}",t},$r=function(n,e){let t=n.length;if(t<=e)return[n];let i=[];for(let s=0;s<t;s+=e)s+e>t?i.push(n.substring(s,t)):i.push(n.substring(s,s+e));return i};function he(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var Qr=function(n){b(!Kr(n),"Invalid JSON number");let e=11,t=52,i=(1<<e-1)-1,s,r,o,a,l;n===0?(r=0,o=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),r=a+i,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(r=0,o=Math.round(n/Math.pow(2,1-i-t))));let c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();let h=c.join(""),u="";for(l=0;l<64;l+=8){let f=parseInt(h.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),u=u+f}return u.toLowerCase()},Na=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Aa=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ra(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}var Da=new RegExp("^-?(0*)\\d{1,10}$"),Fa=-2147483648,La=2147483647,gr=function(n){if(Da.test(n)){let e=Number(n);if(e>=Fa&&e<=La)return e}return null},It=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw de("Exception was thrown by user callback.",t),e},Math.floor(0))}},Va=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ht=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var yi=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){de(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var wi=class{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(re("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',de(e)}},zt=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Mn="5",Zr="v",Xr="s",Jr="r",eo="f",to=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,no="ls",io="p",Si="ac",so="websocket",ro="long_polling";var Tn=class{constructor(e,t,i,s,r=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tt.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tt.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function Ga(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function oo(n,e,t){b(typeof e=="string","typeof type must == string"),b(typeof t=="object","typeof params must == object");let i;if(e===so)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===ro)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Ga(n)&&(t.ns=n.namespace);let s=[];return he(t,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}var xi=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Te(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ks(this.counters_)}};var di={},hi={};function _s(n){let e=n.toString();return di[e]||(di[e]=new xi),di[e]}function ja(n,e){let t=n.toString();return hi[t]||(hi[t]=e()),hi[t]}var ki=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&It(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var br="start",Wa="close",Ba="pLPCommand",Ha="pRTLPCB",ao="id",lo="pw",co="ser",za="cb",Ua="seg",qa="ts",Ya="d",Ka="dframe",ho=1870,uo=30,$a=ho-uo,Qa=25e3,Za=3e4,Mi=class n{constructor(e,t,i,s,r,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=tn(e),this.stats_=_s(t),this.urlFn=l=>(this.appCheckToken&&(l[Si]=this.appCheckToken),oo(t,ro,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ki(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Za)),Pa(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ti((...r)=>{let[o,a,l,c,h]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===br)this.id=a,this.password=l;else if(o===Wa)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{let[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[br]="t",i[co]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[za]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Zr]=Mn,this.transportSessionId&&(i[Xr]=this.transportSessionId),this.lastSessionId&&(i[no]=this.lastSessionId),this.applicationId&&(i[io]=this.applicationId),this.appCheckToken&&(i[Si]=this.appCheckToken),typeof location<"u"&&location.hostname&&to.test(location.hostname)&&(i[Jr]=eo);let s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Me()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Na()&&!Aa()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=K(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=Ys(t),s=$r(i,$a);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Me())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[Ka]="t",i[ao]=e,i[lo]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=K(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Ti=class n{constructor(e,t,i,s){if(this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Me())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Ta(),window[Ba+this.uniqueCallbackIdentifier]=e,window[Ha+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){re("frame writing exception"),a.stack&&re(a.stack),re(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||re("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[ao]=this.myID,e[lo]=this.myPW,e[co]=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uo+i.length<=ho;){let o=this.pendingSegs.shift();i=i+"&"+Ua+s+"="+o.seg+"&"+qa+s+"="+o.ts+"&"+Ya+s+"="+o.d,s++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(Qa)),r=()=>{clearTimeout(s),i()};this.addTag(e,r)}addTag(e,t){Me()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{re("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var Xa=16384,Ja=45e3,En=null;typeof MozWebSocket<"u"?En=MozWebSocket:typeof WebSocket<"u"&&(En=WebSocket);var Gt=(()=>{class n{constructor(t,i,s,r,o,a,l){this.connId=t,this.applicationId=s,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=tn(this.connId),this.stats_=_s(i),this.connURL=n.connectionURL_(i,a,l,r,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,r,o){let a={};return a[Zr]=Mn,!Me()&&typeof location<"u"&&location.hostname&&to.test(location.hostname)&&(a[Jr]=eo),i&&(a[Xr]=i),s&&(a[no]=s),r&&(a[Si]=r),o&&(a[io]=o),oo(t,so,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tt.set("previous_websocket_failure",!0);try{let s;if(Me()){let r=this.nodeAdmin?"AdminNode":"Node";s={headers:{"User-Agent":`Firebase/${Mn}/${fs}/${process.platform}/${r}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(s.proxy={origin:a})}this.mySock=new En(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&En!==null&&!n.forceDisallow_}static previouslyFailed(){return tt.isInMemoryStorage||tt.get("previous_websocket_failure")===!0}markConnectionHealthy(){tt.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let s=vn(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(b(this.frames===null,"We already have a frame buffer"),t.length<=6){let i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();let i=K(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let s=$r(i,Xa);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ja))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),el=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Mi,Gt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let i=Gt&&Gt.isAvailable(),s=i&&!Gt.previouslyFailed();if(t.webSocketOnly&&(i||de("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Gt];else{let r=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),tl=6e4,nl=5e3,il=10*1024,sl=100*1024,ui="t",Cr="d",rl="s",vr="r",ol="e",yr="o",wr="a",Sr="n",xr="p",al="h",Ei=class{constructor(e,t,i,s,r,o,a,l,c,h){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=tn("c:"+this.id+":"),this.transportManager_=new el(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));let s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ht(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>sl?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>il?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ui in e){let t=e[ui];t===wr?this.upgradeIfSecondaryHealthy_():t===vr?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===yr&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Vt("t",e),i=Vt("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:xr,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:wr,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Sr,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Vt("t",e),i=Vt("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Vt(ui,e);if(Cr in e){let i=e[Cr];if(t===al){let s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===Sr){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===rl?this.onConnectionShutdown_(i):t===vr?this.onReset_(i):t===ol?vi("Server Error: "+i):t===yr?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vi("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Mn!==i&&de("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Ht(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(tl))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ht(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(nl))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:xr,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var In=class{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}};var Pn=class{constructor(e){this.allowedEvents_=e,this.listeners_={},b(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});let s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);let s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===t&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(e){b(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var On=class n extends Pn{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ai()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return b(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var kr=32,Mr=768,j=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function L(){return new j("")}function A(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ue(n){return n.pieces_.length-n.pieceNum_}function H(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new j(n.pieces_,e)}function fo(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ll(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function po(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function _o(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new j(e,0)}function $(n,e){let t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof j)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{let i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new j(t,0)}function N(n){return n.pieceNum_>=n.pieces_.length}function ae(n,e){let t=A(n),i=A(e);if(t===null)return e;if(t===i)return ae(H(n),H(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function mo(n,e){if(Ue(n)!==Ue(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function xe(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Ue(n)>Ue(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}var Ii=class{constructor(e,t){this.errorPrefix_=t,this.parts_=po(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Lt(this.parts_[i]);go(this)}};function cl(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Lt(e),go(n)}function dl(n){let e=n.parts_.pop();n.byteLength_-=Lt(e),n.parts_.length>0&&(n.byteLength_-=1)}function go(n){if(n.byteLength_>Mr)throw new Error(n.errorPrefix_+"has a key path longer than "+Mr+" bytes ("+n.byteLength_+").");if(n.parts_.length>kr)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kr+") or object contains a cycle "+et(n))}function et(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Pi=class n extends Pn{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(e){return b(e==="visible","Unknown event type: "+e),[this.visible_]}};var jt=1e3,hl=60*5*1e3,Tr=30*1e3,ul=1.3,fl=3e4,pl="server_kill",Er=3,ms=(()=>{class n extends In{constructor(t,i,s,r,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=tn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=jt,this.maxReconnectDelay_=hl,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Me())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Pi.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&On.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){let r=++this.requestNumber_,o={r,a:t,b:i};this.log_(K(o)),b(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),s&&(this.requestCBHash_[r]=s)}get(t){this.initConnection_();let i=new Cn,r={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(t,i,s,r){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),b(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),b(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:r,hashFn:i,query:t,tag:s};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){let i=t.query,s=i._path.toString(),r=i._queryIdentifier;this.log_("Listen on "+s+" for "+r);let o={p:s},a="q";t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,h=l.s;n.warnOnListenWarnings_(c,i),(this.listens.get(s)&&this.listens.get(s).get(r))===t&&(this.log_("listen response",l),h!=="ok"&&this.removeListen_(s,r),t.onComplete&&t.onComplete(h,c))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Te(t,"w")){let s=Qe(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){let r='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();de(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Js(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Tr)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,i=Xs(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,r=>{let o=r.s,a=r.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let i=t.s,s=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){let s=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),b(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,t._queryObject,i)}sendUnlisten_(t,i,s,r){this.log_("Unlisten on "+t+" for "+i);let o={p:t},a="n";r&&(o.q=s,o.t=r),this.sendRequest(a,o)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,r){let o={p:i,d:s};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(t,i,s,r){this.putInternal("p",t,i,s,r)}merge(t,i,s,r){this.putInternal("m",t,i,s,r)}putInternal(t,i,s,r,o){this.initConnection_();let a={p:i,d:s};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:r}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(t){let i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(t){if(this.connected_){let i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){let o=s.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+K(t));let i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):vi("Unrecognized action received from server: "+K(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){b(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>fl&&(this.reconnectDelay_=jt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ul)}this.onConnectStatus_(!1)}establishConnection_(){return M(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,s())},h=function(f){b(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:h};let u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,v]=yield Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?re("getToken() completed but was canceled"):(re("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=v&&v.token,l=new Ei(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,s,x=>{de(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(pl)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&de(f),c())}}})}interrupt(t){re("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){re("Resuming connection for reason: "+t),delete this.interruptReasons_[t],li(this.interruptReasons_)&&(this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;i?s=i.map(o=>ps(o)).join("$"):s="default";let r=this.removeListen_(t,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,i){let s=new j(t).toString(),r;if(this.listens.has(s)){let o=this.listens.get(s);r=o.get(i),o.delete(i),o.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(t,i){re("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Er&&(this.reconnectDelay_=Tr,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){re("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Er&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},i="js";Me()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),t["sdk."+i+"."+fs.replace(/\./g,"-")]=1,ai()?t["framework.cordova"]=1:Zs()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=On.getInstance().currentlyOnline();return li(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),O=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var wt=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let i=new O(yt,e),s=new O(yt,t);return this.compare(i,s)!==0}minPost(){return O.MIN}};var kn,Nn=class extends wt{static get __EMPTY_NODE(){return kn}static set __EMPTY_NODE(e){kn=e}compare(e,t){return Et(e.name,t.name)}isDefinedOn(e){throw ht("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return O.MIN}maxPost(){return new O(st,kn)}makePost(e,t){return b(typeof e=="string","KeyIndex indexValue must always be a string."),new O(e,kn)}toString(){return".key"}},vt=new Nn;var bt=class{constructor(e,t,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Se=(()=>{class n{constructor(t,i,s,r,o){this.key=t,this.value=i,this.color=s??n.RED,this.left=r??ve.EMPTY_NODE,this.right=o??ve.EMPTY_NODE}copy(t,i,s,r,o){return new n(t??this.key,i??this.value,s??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let r=this,o=s(t,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(t,i,s),null):o===0?r=r.copy(null,i,null,null,null):r=r.copy(null,null,null,null,r.right.insert(t,i,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ve.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,r;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(t,s.key)===0){if(s.right.isEmpty())return ve.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Oi=class{copy(e,t,i,s,r){return this}insert(e,t,i){return new Se(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},ve=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Se.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Se.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bt(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new bt(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new bt(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new bt(this.root_,null,this.comparator_,!0,e)}};ve.EMPTY_NODE=new Oi;function _l(n,e){return Et(n.name,e.name)}function gs(n,e){return Et(n,e)}var Ni;function ml(n){Ni=n}var bo=function(n){return typeof n=="number"?"number:"+Qr(n):"string:"+n},Co=function(n){if(n.isLeafNode()){let e=n.val();b(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Te(e,".sv"),"Priority must be a string or number.")}else b(n===Ni||n.isEmpty(),"priority of unexpected type.");b(n===Ni||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Ir,St=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,b(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Co(this.priorityNode_)}static set __childrenNodeConstructor(t){Ir=t}static get __childrenNodeConstructor(){return Ir}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return N(t)?this:A(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){let s=A(t);return s===null?i:i.isEmpty()&&s!==".priority"?this:(b(s!==".priority"||Ue(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(H(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+bo(this.priorityNode_.val())+":");let i=typeof this.value_;t+=i+":",i==="number"?t+=Qr(this.value_):t+=this.value_,this.lazyHash_=Yr(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(b(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let i=typeof t.value_,s=typeof this.value_,r=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(s);return b(r>=0,"Unknown leaf type: "+i),b(o>=0,"Unknown leaf type: "+s),r===o?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),vo,yo;function gl(n){vo=n}function bl(n){yo=n}var Ai=class extends wt{compare(e,t){let i=e.node.getPriority(),s=t.node.getPriority(),r=i.compareTo(s);return r===0?Et(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return O.MIN}maxPost(){return new O(st,new St("[PRIORITY-POST]",yo))}makePost(e,t){let i=vo(e);return new O(t,new St("[PRIORITY-POST]",i))}toString(){return".priority"}},U=new Ai;var Cl=Math.log(2),Ri=class{constructor(e){let t=r=>parseInt(Math.log(r)/Cl,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},An=function(n,e,t,i){n.sort(e);let s=function(l,c){let h=c-l,u,f;if(h===0)return null;if(h===1)return u=n[l],f=t?t(u):u,new Se(f,u.node,Se.BLACK,null,null);{let v=parseInt(h/2,10)+l,x=s(l,v),W=s(v+1,c);return u=n[v],f=t?t(u):u,new Se(f,u.node,Se.BLACK,x,W)}},r=function(l){let c=null,h=null,u=n.length,f=function(x,W){let ne=u-x,lt=u;u-=x;let dn=s(ne+1,lt),oi=n[ne],va=t?t(oi):oi;v(new Se(va,oi.node,W,null,dn))},v=function(x){c?(c.left=x,c=x):(h=x,c=x)};for(let x=0;x<l.count;++x){let W=l.nextBitIsOne(),ne=Math.pow(2,l.count-(x+1));W?f(ne,Se.BLACK):(f(ne,Se.BLACK),f(ne,Se.RED))}return h},o=new Ri(n.length),a=r(o);return new ve(i||e,a)};var fi,gt={},xt=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return b(gt&&U,"ChildrenNode.ts has not been loaded"),fi=fi||new n({".priority":gt},{".priority":U}),fi}get(e){let t=Qe(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ve?t:null}hasIndex(e){return Te(this.indexSet_,e.toString())}addIndex(e,t){b(e!==vt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],s=!1,r=t.getIterator(O.Wrap),o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),i.push(o),o=r.getNext();let a;s?a=An(i,e.getCompare()):a=gt;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let h=Object.assign({},this.indexes_);return h[l]=a,new n(h,c)}addToIndexes(e,t){let i=Ft(this.indexes_,(s,r)=>{let o=Qe(this.indexSet_,r);if(b(o,"Missing index implementation for "+r),s===gt)if(o.isDefinedOn(e.node)){let a=[],l=t.getIterator(O.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),An(a,o.getCompare())}else return gt;else{let a=t.get(e.name),l=s;return a&&(l=l.remove(new O(e.name,a))),l.insert(e,e.node)}});return new n(i,this.indexSet_)}removeFromIndexes(e,t){let i=Ft(this.indexes_,s=>{if(s===gt)return s;{let r=t.get(e.name);return r?s.remove(new O(e.name,r)):s}});return new n(i,this.indexSet_)}};var Wt,E=(()=>{class n{constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Co(this.priorityNode_),this.children_.isEmpty()&&b(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Wt||(Wt=new n(new ve(gs),null,xt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wt}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let i=this.children_.get(t);return i===null?Wt:i}}getChild(t){let i=A(t);return i===null?this:this.getImmediateChild(i).getChild(H(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(b(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{let s=new O(t,i),r,o;i.isEmpty()?(r=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(s,this.children_));let a=r.isEmpty()?Wt:this.priorityNode_;return new n(r,a,o)}}updateChild(t,i){let s=A(t);if(s===null)return i;{b(A(t)!==".priority"||Ue(t)===1,".priority must be the last token in a path");let r=this.getImmediateChild(s).updateChild(H(t),i);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let i={},s=0,r=0,o=!0;if(this.forEachChild(U,(a,l)=>{i[a]=l.val(t),s++,o&&n.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!t&&o&&r<2*s){let a=[];for(let l in i)a[l]=i[l];return a}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+bo(this.getPriority().val())+":"),this.forEachChild(U,(i,s)=>{let r=s.hash();r!==""&&(t+=":"+i+":"+r)}),this.lazyHash_=t===""?"":Yr(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){let r=this.resolveIndex_(s);if(r){let o=r.getPredecessorKey(new O(t,i));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let i=this.resolveIndex_(t);if(i){let s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){let i=this.getFirstChildName(t);return i?new O(i,this.children_.get(i)):null}getLastChildName(t){let i=this.resolveIndex_(t);if(i){let s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){let i=this.getLastChildName(t);return i?new O(i,this.children_.get(i)):null}forEachChild(t,i){let s=this.resolveIndex_(t);return s?s.inorderTraversal(r=>i(r.name,r.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){let s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,r=>r);{let r=this.children_.getIteratorFrom(t.name,O.Wrap),o=r.peek();for(;o!=null&&i.compare(o,t)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){let s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,r=>r);{let r=this.children_.getReverseIteratorFrom(t.name,O.Wrap),o=r.peek();for(;o!=null&&i.compare(o,t)>0;)r.getNext(),o=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===nn?-1:0}withIndex(t){if(t===vt||this.indexMap_.hasIndex(t))return this;{let i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===vt||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let s=this.getIterator(U),r=i.getIterator(U),o=s.getNext(),a=r.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=s.getNext(),a=r.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===vt?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),Di=class extends E{constructor(){super(new ve(gs),E.EMPTY_NODE,xt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return E.EMPTY_NODE}isEmpty(){return!1}},nn=new Di;Object.defineProperties(O,{MIN:{value:new O(yt,E.EMPTY_NODE)},MAX:{value:new O(st,nn)}});Nn.__EMPTY_NODE=E.EMPTY_NODE;St.__childrenNodeConstructor=E;ml(nn);bl(nn);var vl=!0;function ee(n,e=null){if(n===null)return E.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),b(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new St(t,ee(e))}if(!(n instanceof Array)&&vl){let t=[],i=!1;if(he(n,(o,a)=>{if(o.substring(0,1)!=="."){let l=ee(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new O(o,l)))}}),t.length===0)return E.EMPTY_NODE;let r=An(t,_l,o=>o.name,gs);if(i){let o=An(t,U.getCompare());return new E(r,ee(e),new xt({".priority":o},{".priority":U}))}else return new E(r,ee(e),xt.Default)}else{let t=E.EMPTY_NODE;return he(n,(i,s)=>{if(Te(n,i)&&i.substring(0,1)!=="."){let r=ee(s);(r.isLeafNode()||!r.isEmpty())&&(t=t.updateImmediateChild(i,r))}}),t.updatePriority(ee(e))}}gl(ee);var Fi=class extends wt{constructor(e){super(),this.indexPath_=e,b(!N(e)&&A(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let i=this.extractChild(e.node),s=this.extractChild(t.node),r=i.compareTo(s);return r===0?Et(e.name,t.name):r}makePost(e,t){let i=ee(e),s=E.EMPTY_NODE.updateChild(this.indexPath_,i);return new O(t,s)}maxPost(){let e=E.EMPTY_NODE.updateChild(this.indexPath_,nn);return new O(st,e)}toString(){return po(this.indexPath_,0).join("/")}};var Li=class extends wt{compare(e,t){let i=e.node.compareTo(t.node);return i===0?Et(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return O.MIN}maxPost(){return O.MAX}makePost(e,t){let i=ee(e);return new O(t,i)}toString(){return".value"}},yl=new Li;function wo(n){return{type:"value",snapshotNode:n}}function kt(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Kt(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function $t(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function wl(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Qt=class{constructor(e){this.index_=e}updateChild(e,t,i,s,r,o){b(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(s).equals(i.getChild(s))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(Kt(t,a)):b(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(kt(t,i)):o.trackChildChange($t(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(U,(s,r)=>{t.hasChild(s)||i.trackChildChange(Kt(s,r))}),t.isLeafNode()||t.forEachChild(U,(s,r)=>{if(e.hasChild(s)){let o=e.getImmediateChild(s);o.equals(r)||i.trackChildChange($t(s,r,o))}else i.trackChildChange(kt(s,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?E.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Rn=class n{constructor(e){this.indexedFilter_=new Qt(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,s,r,o){return this.matches(new O(t,i))||(i=E.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,r,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=E.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(E.EMPTY_NODE);let r=this;return t.forEachChild(U,(o,a)=>{r.matches(new O(o,a))||(s=s.updateImmediateChild(o,E.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var Vi=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{let i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Rn(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,s,r,o){return this.rangedFilter_.matches(new O(t,i))||(i=E.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,r,o):this.fullLimitUpdateChild_(e,t,i,r,o)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=E.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=E.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){let a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(E.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let o=0;for(;r.hasNext();){let a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,E.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,r){let o;if(this.reverse_){let u=this.index_.getCompare();o=(f,v)=>u(v,f)}else o=this.index_.getCompare();let a=e;b(a.numChildren()===this.limit_,"");let l=new O(t,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(t)){let u=a.getImmediateChild(t),f=s.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);let v=f==null?1:o(f,l);if(h&&!i.isEmpty()&&v>=0)return r?.trackChildChange($t(t,i,u)),a.updateImmediateChild(t,i);{r?.trackChildChange(Kt(t,u));let W=a.updateImmediateChild(t,E.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(r?.trackChildChange(kt(f.name,f.node)),W.updateImmediateChild(f.name,f.node)):W}}else return i.isEmpty()?e:h&&o(c,l)>=0?(r!=null&&(r.trackChildChange(Kt(c.name,c.node)),r.trackChildChange(kt(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(c.name,E.EMPTY_NODE)):e}};var Gi=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=U}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return b(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return b(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yt}hasEnd(){return this.endSet_}getIndexEndValue(){return b(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return b(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:st}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return b(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===U}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Sl(n){return n.loadsAllData()?new Qt(n.getIndex()):n.hasLimit()?new Vi(n):new Rn(n)}function Pr(n){let e={};if(n.isDefault())return e;let t;if(n.index_===U?t="$priority":n.index_===yl?t="$value":n.index_===vt?t="$key":(b(n.index_ instanceof Fi,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=K(t),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";e[i]=K(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+K(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";e[i]=K(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+K(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Or(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==U&&(e.i=n.index_.toString()),e}var ji=class n extends In{constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=tn("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(b(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,s){let r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);let o=n.getListenId_(e,i),a={};this.listens_[o]=a;let l=Pr(e._queryParams);this.restRequest_(r+".json",l,(c,h)=>{let u=h;if(c===404&&(u=null,c=null),c===null&&this.onDataUpdate_(r,u,!1,i),Qe(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,t){let i=n.getListenId_(e,t);delete this.listens_[i]}get(e){let t=Pr(e._queryParams),i=e._path.toString(),s=new Cn;return this.restRequest_(i+".json",t,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(t.auth=s.accessToken),r&&r.token&&(t.ac=r.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+er(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=vn(a.responseText)}catch{de("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&de("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var Wi=class{constructor(){this.rootNode_=E.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Dn(){return{value:null,children:new Map}}function So(n,e,t){if(N(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let i=A(e);n.children.has(i)||n.children.set(i,Dn());let s=n.children.get(i);e=H(e),So(s,e,t)}}function Bi(n,e,t){n.value!==null?t(e,n.value):xl(n,(i,s)=>{let r=new j(e.toString()+"/"+i);Bi(s,r,t)})}function xl(n,e){n.children.forEach((t,i)=>{e(i,t)})}var Hi=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&he(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}};var Nr=10*1e3,kl=30*1e3,Ml=5*60*1e3,zi=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Hi(e);let i=Nr+(kl-Nr)*Math.random();Ht(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),t={},i=!1;he(e,(s,r)=>{r>0&&Te(this.statsToReport_,s)&&(t[s]=r,i=!0)}),i&&this.server_.reportStats(t),Ht(this.reportStats_.bind(this),Math.floor(Math.random()*2*Ml))}};var Ee=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ee||{});function xo(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bs(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Cs(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Ui=class n{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Ee.ACK_USER_WRITE,this.source=xo()}operationForChild(e){if(N(this.path)){if(this.affectedTree.value!=null)return b(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new j(e));return new n(L(),t,this.revert)}}else return b(A(this.path)===e,"operationForChild called for unrelated child."),new n(H(this.path),this.affectedTree,this.revert)}};var Fn=class n{constructor(e,t){this.source=e,this.path=t,this.type=Ee.LISTEN_COMPLETE}operationForChild(e){return N(this.path)?new n(this.source,L()):new n(this.source,H(this.path))}};var Mt=class n{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Ee.OVERWRITE}operationForChild(e){return N(this.path)?new n(this.source,L(),this.snap.getImmediateChild(e)):new n(this.source,H(this.path),this.snap)}};var Ln=class n{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Ee.MERGE}operationForChild(e){if(N(this.path)){let t=this.children.subtree(new j(e));return t.isEmpty()?null:t.value?new Mt(this.source,L(),t.value):new n(this.source,L(),t)}else return b(A(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,H(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ie=class{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(N(e))return this.isFullyInitialized()&&!this.filtered_;let t=A(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var qi=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function Tl(n,e,t,i){let s=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(wl(o.childName,o.snapshotNode))}),Bt(n,s,"child_removed",e,i,t),Bt(n,s,"child_added",e,i,t),Bt(n,s,"child_moved",r,i,t),Bt(n,s,"child_changed",e,i,t),Bt(n,s,"value",e,i,t),s}function Bt(n,e,t,i,s,r){let o=i.filter(a=>a.type===t);o.sort((a,l)=>Il(n,a,l)),o.forEach(a=>{let l=El(n,a,r);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function El(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Il(n,e,t){if(e.childName==null||t.childName==null)throw ht("Should only compare child_ events.");let i=new O(e.childName,e.snapshotNode),s=new O(t.childName,t.snapshotNode);return n.index_.compare(i,s)}function Yn(n,e){return{eventCache:n,serverCache:e}}function Ut(n,e,t,i){return Yn(new Ie(e,t,i),n.serverCache)}function ko(n,e,t,i){return Yn(n.eventCache,new Ie(e,t,i))}function Vn(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function rt(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var pi,Pl=()=>(pi||(pi=new ve(Oa)),pi),ue=class n{constructor(e,t=Pl()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return he(e,(i,s)=>{t=t.set(new j(i),s)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:L(),value:this.value};if(N(e))return null;{let i=A(e),s=this.children.get(i);if(s!==null){let r=s.findRootMostMatchingPathAndValue(H(e),t);return r!=null?{path:$(new j(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(N(e))return this;{let t=A(e),i=this.children.get(t);return i!==null?i.subtree(H(e)):new n(null)}}set(e,t){if(N(e))return new n(t,this.children);{let i=A(e),r=(this.children.get(i)||new n(null)).set(H(e),t),o=this.children.insert(i,r);return new n(this.value,o)}}remove(e){if(N(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=A(e),i=this.children.get(t);if(i){let s=i.remove(H(e)),r;return s.isEmpty()?r=this.children.remove(t):r=this.children.insert(t,s),this.value===null&&r.isEmpty()?new n(null):new n(this.value,r)}else return this}}get(e){if(N(e))return this.value;{let t=A(e),i=this.children.get(t);return i?i.get(H(e)):null}}setTree(e,t){if(N(e))return t;{let i=A(e),r=(this.children.get(i)||new n(null)).setTree(H(e),t),o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new n(this.value,o)}}fold(e){return this.fold_(L(),e)}fold_(e,t){let i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_($(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,L(),t)}findOnPath_(e,t,i){let s=this.value?i(t,this.value):!1;if(s)return s;if(N(e))return null;{let r=A(e),o=this.children.get(r);return o?o.findOnPath_(H(e),$(t,r),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,L(),t)}foreachOnPath_(e,t,i){if(N(e))return this;{this.value&&i(t,this.value);let s=A(e),r=this.children.get(s);return r?r.foreachOnPath_(H(e),$(t,s),i):new n(null)}}foreach(e){this.foreach_(L(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_($(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}};var ke=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new ue(null))}};function qt(n,e,t){if(N(e))return new ke(new ue(t));{let i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){let s=i.path,r=i.value,o=ae(s,e);return r=r.updateChild(o,t),new ke(n.writeTree_.set(s,r))}else{let s=new ue(t),r=n.writeTree_.setTree(e,s);return new ke(r)}}}function Ar(n,e,t){let i=n;return he(t,(s,r)=>{i=qt(i,$(e,s),r)}),i}function Rr(n,e){if(N(e))return ke.empty();{let t=n.writeTree_.setTree(e,new ue(null));return new ke(t)}}function Yi(n,e){return ot(n,e)!=null}function ot(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(ae(t.path,e)):null}function Dr(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(U,(i,s)=>{e.push(new O(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new O(i,s.value))}),e}function He(n,e){if(N(e))return n;{let t=ot(n,e);return t!=null?new ke(new ue(t)):new ke(n.writeTree_.subtree(e))}}function Ki(n){return n.writeTree_.isEmpty()}function Tt(n,e){return Mo(L(),n.writeTree_,e)}function Mo(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(b(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):t=Mo($(n,s),r,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild($(n,".priority"),i)),t}}function Kn(n,e){return Po(e,n)}function Ol(n,e,t,i,s){b(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=qt(n.visibleWrites,e,t)),n.lastWriteId=i}function Nl(n,e){for(let t=0;t<n.allWrites.length;t++){let i=n.allWrites[t];if(i.writeId===e)return i}return null}function Al(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);b(t>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,r=!1,o=n.allWrites.length-1;for(;s&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&Rl(a,i.path)?s=!1:xe(i.path,a.path)&&(r=!0)),o--}if(s){if(r)return Dl(n),!0;if(i.snap)n.visibleWrites=Rr(n.visibleWrites,i.path);else{let a=i.children;he(a,l=>{n.visibleWrites=Rr(n.visibleWrites,$(i.path,l))})}return!0}else return!1}function Rl(n,e){if(n.snap)return xe(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&xe($(n.path,t),e))return!0;return!1}function Dl(n){n.visibleWrites=To(n.allWrites,Fl,L()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Fl(n){return n.visible}function To(n,e,t){let i=ke.empty();for(let s=0;s<n.length;++s){let r=n[s];if(e(r)){let o=r.path,a;if(r.snap)xe(t,o)?(a=ae(t,o),i=qt(i,a,r.snap)):xe(o,t)&&(a=ae(o,t),i=qt(i,L(),r.snap.getChild(a)));else if(r.children){if(xe(t,o))a=ae(t,o),i=Ar(i,a,r.children);else if(xe(o,t))if(a=ae(o,t),N(a))i=Ar(i,L(),r.children);else{let l=Qe(r.children,A(a));if(l){let c=l.getChild(H(a));i=qt(i,L(),c)}}}else throw ht("WriteRecord should have .snap or .children")}}return i}function Eo(n,e,t,i,s){if(!i&&!s){let r=ot(n.visibleWrites,e);if(r!=null)return r;{let o=He(n.visibleWrites,e);if(Ki(o))return t;if(t==null&&!Yi(o,L()))return null;{let a=t||E.EMPTY_NODE;return Tt(o,a)}}}else{let r=He(n.visibleWrites,e);if(!s&&Ki(r))return t;if(!s&&t==null&&!Yi(r,L()))return null;{let o=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(xe(c.path,e)||xe(e,c.path))},a=To(n.allWrites,o,e),l=t||E.EMPTY_NODE;return Tt(a,l)}}}function Ll(n,e,t){let i=E.EMPTY_NODE,s=ot(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(U,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(t){let r=He(n.visibleWrites,e);return t.forEachChild(U,(o,a)=>{let l=Tt(He(r,new j(o)),a);i=i.updateImmediateChild(o,l)}),Dr(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let r=He(n.visibleWrites,e);return Dr(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Vl(n,e,t,i,s){b(i||s,"Either existingEventSnap or existingServerSnap must exist");let r=$(e,t);if(Yi(n.visibleWrites,r))return null;{let o=He(n.visibleWrites,r);return Ki(o)?s.getChild(t):Tt(o,s.getChild(t))}}function Gl(n,e,t,i){let s=$(e,t),r=ot(n.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(t)){let o=He(n.visibleWrites,s);return Tt(o,i.getNode().getImmediateChild(t))}else return null}function jl(n,e){return ot(n.visibleWrites,e)}function Wl(n,e,t,i,s,r,o){let a,l=He(n.visibleWrites,e),c=ot(l,L());if(c!=null)a=c;else if(t!=null)a=Tt(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let h=[],u=o.getCompare(),f=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),v=f.getNext();for(;v&&h.length<s;)u(v,i)!==0&&h.push(v),v=f.getNext();return h}else return[]}function Bl(){return{visibleWrites:ke.empty(),allWrites:[],lastWriteId:-1}}function Gn(n,e,t,i){return Eo(n.writeTree,n.treePath,e,t,i)}function vs(n,e){return Ll(n.writeTree,n.treePath,e)}function Fr(n,e,t,i){return Vl(n.writeTree,n.treePath,e,t,i)}function jn(n,e){return jl(n.writeTree,$(n.treePath,e))}function Hl(n,e,t,i,s,r){return Wl(n.writeTree,n.treePath,e,t,i,s,r)}function ys(n,e,t){return Gl(n.writeTree,n.treePath,e,t)}function Io(n,e){return Po($(n.treePath,e),n.writeTree)}function Po(n,e){return{treePath:n,writeTree:e}}var $i=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,i=e.childName;b(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),b(i!==".priority","Only non-priority child changes can be tracked.");let s=this.changeMap.get(i);if(s){let r=s.type;if(t==="child_added"&&r==="child_removed")this.changeMap.set(i,$t(i,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&r==="child_changed")this.changeMap.set(i,Kt(i,s.oldSnap));else if(t==="child_changed"&&r==="child_added")this.changeMap.set(i,kt(i,e.snapshotNode));else if(t==="child_changed"&&r==="child_changed")this.changeMap.set(i,$t(i,e.snapshotNode,s.oldSnap));else throw ht("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var Qi=class{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}},Oo=new Qi,Zt=class{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new Ie(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ys(this.writes_,e,i)}}getChildAfterChild(e,t,i){let s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:rt(this.viewCache_),r=Hl(this.writes_,s,t,1,i,e);return r.length===0?null:r[0]}};function zl(n){return{filter:n}}function Ul(n,e){b(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),b(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function ql(n,e,t,i,s){let r=new $i,o,a;if(t.type===Ee.OVERWRITE){let c=t;c.source.fromUser?o=Zi(n,e,c.path,c.snap,i,s,r):(b(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!N(c.path),o=Wn(n,e,c.path,c.snap,i,s,a,r))}else if(t.type===Ee.MERGE){let c=t;c.source.fromUser?o=Kl(n,e,c.path,c.children,i,s,r):(b(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Xi(n,e,c.path,c.children,i,s,a,r))}else if(t.type===Ee.ACK_USER_WRITE){let c=t;c.revert?o=Zl(n,e,c.path,i,s,r):o=$l(n,e,c.path,c.affectedTree,i,s,r)}else if(t.type===Ee.LISTEN_COMPLETE)o=Ql(n,e,t.path,i,r);else throw ht("Unknown operation type: "+t.type);let l=r.getChanges();return Yl(e,o,l),{viewCache:o,changes:l}}function Yl(n,e,t){let i=e.eventCache;if(i.isFullyInitialized()){let s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=Vn(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&t.push(wo(Vn(e)))}}function No(n,e,t,i,s,r){let o=e.eventCache;if(jn(i,t)!=null)return e;{let a,l;if(N(t))if(b(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=rt(e),h=c instanceof E?c:E.EMPTY_NODE,u=vs(i,h);a=n.filter.updateFullNode(e.eventCache.getNode(),u,r)}else{let c=Gn(i,rt(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{let c=A(t);if(c===".priority"){b(Ue(t)===1,"Can't have a priority with additional path components");let h=o.getNode();l=e.serverCache.getNode();let u=Fr(i,t,h,l);u!=null?a=n.filter.updatePriority(h,u):a=o.getNode()}else{let h=H(t),u;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let f=Fr(i,t,o.getNode(),l);f!=null?u=o.getNode().getImmediateChild(c).updateChild(h,f):u=o.getNode().getImmediateChild(c)}else u=ys(i,c,e.serverCache);u!=null?a=n.filter.updateChild(o.getNode(),c,u,h,s,r):a=o.getNode()}}return Ut(e,a,o.isFullyInitialized()||N(t),n.filter.filtersNodes())}}function Wn(n,e,t,i,s,r,o,a){let l=e.serverCache,c,h=o?n.filter:n.filter.getIndexedFilter();if(N(t))c=h.updateFullNode(l.getNode(),i,null);else if(h.filtersNodes()&&!l.isFiltered()){let v=l.getNode().updateChild(t,i);c=h.updateFullNode(l.getNode(),v,null)}else{let v=A(t);if(!l.isCompleteForPath(t)&&Ue(t)>1)return e;let x=H(t),ne=l.getNode().getImmediateChild(v).updateChild(x,i);v===".priority"?c=h.updatePriority(l.getNode(),ne):c=h.updateChild(l.getNode(),v,ne,x,Oo,null)}let u=ko(e,c,l.isFullyInitialized()||N(t),h.filtersNodes()),f=new Zt(s,u,r);return No(n,u,t,s,f,a)}function Zi(n,e,t,i,s,r,o){let a=e.eventCache,l,c,h=new Zt(s,e,r);if(N(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Ut(e,c,!0,n.filter.filtersNodes());else{let u=A(t);if(u===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),i),l=Ut(e,c,a.isFullyInitialized(),a.isFiltered());else{let f=H(t),v=a.getNode().getImmediateChild(u),x;if(N(f))x=i;else{let W=h.getCompleteChild(u);W!=null?fo(f)===".priority"&&W.getChild(_o(f)).isEmpty()?x=W:x=W.updateChild(f,i):x=E.EMPTY_NODE}if(v.equals(x))l=e;else{let W=n.filter.updateChild(a.getNode(),u,x,f,h,o);l=Ut(e,W,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function Lr(n,e){return n.eventCache.isCompleteForChild(e)}function Kl(n,e,t,i,s,r,o){let a=e;return i.foreach((l,c)=>{let h=$(t,l);Lr(e,A(h))&&(a=Zi(n,a,h,c,s,r,o))}),i.foreach((l,c)=>{let h=$(t,l);Lr(e,A(h))||(a=Zi(n,a,h,c,s,r,o))}),a}function Vr(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function Xi(n,e,t,i,s,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;N(t)?c=i:c=new ue(null).setTree(t,i);let h=e.serverCache.getNode();return c.children.inorderTraversal((u,f)=>{if(h.hasChild(u)){let v=e.serverCache.getNode().getImmediateChild(u),x=Vr(n,v,f);l=Wn(n,l,new j(u),x,s,r,o,a)}}),c.children.inorderTraversal((u,f)=>{let v=!e.serverCache.isCompleteForChild(u)&&f.value===null;if(!h.hasChild(u)&&!v){let x=e.serverCache.getNode().getImmediateChild(u),W=Vr(n,x,f);l=Wn(n,l,new j(u),W,s,r,o,a)}}),l}function $l(n,e,t,i,s,r,o){if(jn(s,t)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(N(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Wn(n,e,t,l.getNode().getChild(t),s,r,a,o);if(N(t)){let c=new ue(null);return l.getNode().forEachChild(vt,(h,u)=>{c=c.set(new j(h),u)}),Xi(n,e,t,c,s,r,a,o)}else return e}else{let c=new ue(null);return i.foreach((h,u)=>{let f=$(t,h);l.isCompleteForPath(f)&&(c=c.set(h,l.getNode().getChild(f)))}),Xi(n,e,t,c,s,r,a,o)}}function Ql(n,e,t,i,s){let r=e.serverCache,o=ko(e,r.getNode(),r.isFullyInitialized()||N(t),r.isFiltered());return No(n,o,t,i,Oo,s)}function Zl(n,e,t,i,s,r){let o;if(jn(i,t)!=null)return e;{let a=new Zt(i,e,s),l=e.eventCache.getNode(),c;if(N(t)||A(t)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Gn(i,rt(e));else{let u=e.serverCache.getNode();b(u instanceof E,"serverChildren would be complete if leaf node"),h=vs(i,u)}h=h,c=n.filter.updateFullNode(l,h,r)}else{let h=A(t),u=ys(i,h,e.serverCache);u==null&&e.serverCache.isCompleteForChild(h)&&(u=l.getImmediateChild(h)),u!=null?c=n.filter.updateChild(l,h,u,H(t),a,r):e.eventCache.getNode().hasChild(h)?c=n.filter.updateChild(l,h,E.EMPTY_NODE,H(t),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Gn(i,rt(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||jn(i,L())!=null,Ut(e,c,o,n.filter.filtersNodes())}}var Ji=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let i=this.query_._queryParams,s=new Qt(i.getIndex()),r=Sl(i);this.processor_=zl(r);let o=t.serverCache,a=t.eventCache,l=s.updateFullNode(E.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(E.EMPTY_NODE,a.getNode(),null),h=new Ie(l,o.isFullyInitialized(),s.filtersNodes()),u=new Ie(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=Yn(u,h),this.eventGenerator_=new qi(this.query_)}get query(){return this.query_}};function Xl(n){return n.viewCache_.serverCache.getNode()}function Jl(n){return Vn(n.viewCache_)}function ec(n,e){let t=rt(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!N(e)&&!t.getImmediateChild(A(e)).isEmpty())?t.getChild(e):null}function Gr(n){return n.eventRegistrations_.length===0}function tc(n,e){n.eventRegistrations_.push(e)}function jr(n,e,t){let i=[];if(t){b(e==null,"A cancel should cancel all event registrations.");let s=n.query._path;n.eventRegistrations_.forEach(r=>{let o=r.createCancelEvent(t,s);o&&i.push(o)})}if(e){let s=[];for(let r=0;r<n.eventRegistrations_.length;++r){let o=n.eventRegistrations_[r];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(r+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function Wr(n,e,t,i){e.type===Ee.MERGE&&e.source.queryId!==null&&(b(rt(n.viewCache_),"We should always have a full cache before handling merges"),b(Vn(n.viewCache_),"Missing event cache, even though we have a server cache"));let s=n.viewCache_,r=ql(n.processor_,s,e,t,i);return Ul(n.processor_,r.viewCache),b(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=r.viewCache,Ao(n,r.changes,r.viewCache.eventCache.getNode(),null)}function nc(n,e){let t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(U,(r,o)=>{i.push(kt(r,o))}),t.isFullyInitialized()&&i.push(wo(t.getNode())),Ao(n,i,t.getNode(),e)}function Ao(n,e,t,i){let s=i?[i]:n.eventRegistrations_;return Tl(n.eventGenerator_,e,t,s)}var Bn,Hn=class{constructor(){this.views=new Map}};function ic(n){b(!Bn,"__referenceConstructor has already been defined"),Bn=n}function sc(){return b(Bn,"Reference.ts has not been loaded"),Bn}function rc(n){return n.views.size===0}function ws(n,e,t,i){let s=e.source.queryId;if(s!==null){let r=n.views.get(s);return b(r!=null,"SyncTree gave us an op for an invalid query."),Wr(r,e,t,i)}else{let r=[];for(let o of n.views.values())r=r.concat(Wr(o,e,t,i));return r}}function Ro(n,e,t,i,s){let r=e._queryIdentifier,o=n.views.get(r);if(!o){let a=Gn(t,s?i:null),l=!1;a?l=!0:i instanceof E?(a=vs(t,i),l=!1):(a=E.EMPTY_NODE,l=!1);let c=Yn(new Ie(a,l,!1),new Ie(i,s,!1));return new Ji(e,c)}return o}function oc(n,e,t,i,s,r){let o=Ro(n,e,i,s,r);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),tc(o,t),nc(o,t)}function ac(n,e,t,i){let s=e._queryIdentifier,r=[],o=[],a=qe(n);if(s==="default")for(let[l,c]of n.views.entries())o=o.concat(jr(c,t,i)),Gr(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{let l=n.views.get(s);l&&(o=o.concat(jr(l,t,i)),Gr(l)&&(n.views.delete(s),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!qe(n)&&r.push(new(sc())(e._repo,e._path)),{removed:r,events:o}}function Do(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ze(n,e){let t=null;for(let i of n.views.values())t=t||ec(i,e);return t}function Fo(n,e){if(e._queryParams.loadsAllData())return $n(n);{let i=e._queryIdentifier;return n.views.get(i)}}function Lo(n,e){return Fo(n,e)!=null}function qe(n){return $n(n)!=null}function $n(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var zn;function lc(n){b(!zn,"__referenceConstructor has already been defined"),zn=n}function cc(){return b(zn,"Reference.ts has not been loaded"),zn}var dc=1,Un=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ue(null),this.pendingWriteTree_=Bl(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Vo(n,e,t,i,s){return Ol(n.pendingWriteTree_,e,t,i,s),s?rn(n,new Mt(xo(),e,t)):[]}function nt(n,e,t=!1){let i=Nl(n.pendingWriteTree_,e);if(Al(n.pendingWriteTree_,e)){let r=new ue(null);return i.snap!=null?r=r.set(L(),!0):he(i.children,o=>{r=r.set(new j(o),!0)}),rn(n,new Ui(i.path,r,t))}else return[]}function sn(n,e,t){return rn(n,new Mt(bs(),e,t))}function hc(n,e,t){let i=ue.fromObject(t);return rn(n,new Ln(bs(),e,i))}function uc(n,e){return rn(n,new Fn(bs(),e))}function fc(n,e,t){let i=xs(n,t);if(i){let s=ks(i),r=s.path,o=s.queryId,a=ae(r,e),l=new Fn(Cs(o),a);return Ms(n,r,l)}else return[]}function Go(n,e,t,i,s=!1){let r=e._path,o=n.syncPointTree_.get(r),a=[];if(o&&(e._queryIdentifier==="default"||Lo(o,e))){let l=ac(o,e,t,i);rc(o)&&(n.syncPointTree_=n.syncPointTree_.remove(r));let c=l.removed;if(a=l.events,!s){let h=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,u=n.syncPointTree_.findOnPath(r,(f,v)=>qe(v));if(h&&!u){let f=n.syncPointTree_.subtree(r);if(!f.isEmpty()){let v=gc(f);for(let x=0;x<v.length;++x){let W=v[x],ne=W.query,lt=Ho(n,W);n.listenProvider_.startListening(Yt(ne),Xt(n,ne),lt.hashFn,lt.onComplete)}}}!u&&c.length>0&&!i&&(h?n.listenProvider_.stopListening(Yt(e),null):c.forEach(f=>{let v=n.queryToTagMap.get(Qn(f));n.listenProvider_.stopListening(Yt(f),v)}))}bc(n,c)}return a}function jo(n,e,t,i){let s=xs(n,i);if(s!=null){let r=ks(s),o=r.path,a=r.queryId,l=ae(o,e),c=new Mt(Cs(a),l,t);return Ms(n,o,c)}else return[]}function pc(n,e,t,i){let s=xs(n,i);if(s){let r=ks(s),o=r.path,a=r.queryId,l=ae(o,e),c=ue.fromObject(t),h=new Ln(Cs(a),l,c);return Ms(n,o,h)}else return[]}function _c(n,e,t,i=!1){let s=e._path,r=null,o=!1;n.syncPointTree_.foreachOnPath(s,(f,v)=>{let x=ae(f,s);r=r||ze(v,x),o=o||qe(v)});let a=n.syncPointTree_.get(s);a?(o=o||qe(a),r=r||ze(a,L())):(a=new Hn,n.syncPointTree_=n.syncPointTree_.set(s,a));let l;r!=null?l=!0:(l=!1,r=E.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((v,x)=>{let W=ze(x,L());W&&(r=r.updateImmediateChild(v,W))}));let c=Lo(a,e);if(!c&&!e._queryParams.loadsAllData()){let f=Qn(e);b(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");let v=Cc();n.queryToTagMap.set(f,v),n.tagToQueryMap.set(v,f)}let h=Kn(n.pendingWriteTree_,s),u=oc(a,e,t,h,r,l);if(!c&&!o&&!i){let f=Fo(a,e);u=u.concat(vc(n,e,f))}return u}function Ss(n,e,t){let s=n.pendingWriteTree_,r=n.syncPointTree_.findOnPath(e,(o,a)=>{let l=ae(o,e),c=ze(a,l);if(c)return c});return Eo(s,e,r,t,!0)}function mc(n,e){let t=e._path,i=null;n.syncPointTree_.foreachOnPath(t,(c,h)=>{let u=ae(c,t);i=i||ze(h,u)});let s=n.syncPointTree_.get(t);s?i=i||ze(s,L()):(s=new Hn,n.syncPointTree_=n.syncPointTree_.set(t,s));let r=i!=null,o=r?new Ie(i,!0,!1):null,a=Kn(n.pendingWriteTree_,e._path),l=Ro(s,e,a,r?o.getNode():E.EMPTY_NODE,r);return Jl(l)}function rn(n,e){return Wo(e,n.syncPointTree_,null,Kn(n.pendingWriteTree_,L()))}function Wo(n,e,t,i){if(N(n.path))return Bo(n,e,t,i);{let s=e.get(L());t==null&&s!=null&&(t=ze(s,L()));let r=[],o=A(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){let c=t?t.getImmediateChild(o):null,h=Io(i,o);r=r.concat(Wo(a,l,c,h))}return s&&(r=r.concat(ws(s,n,i,t))),r}}function Bo(n,e,t,i){let s=e.get(L());t==null&&s!=null&&(t=ze(s,L()));let r=[];return e.children.inorderTraversal((o,a)=>{let l=t?t.getImmediateChild(o):null,c=Io(i,o),h=n.operationForChild(o);h&&(r=r.concat(Bo(h,a,l,c)))}),s&&(r=r.concat(ws(s,n,i,t))),r}function Ho(n,e){let t=e.query,i=Xt(n,t);return{hashFn:()=>(Xl(e)||E.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?fc(n,t._path,i):uc(n,t._path);{let r=Ra(s,t);return Go(n,t,null,r)}}}}function Xt(n,e){let t=Qn(e);return n.queryToTagMap.get(t)}function Qn(n){return n._path.toString()+"$"+n._queryIdentifier}function xs(n,e){return n.tagToQueryMap.get(e)}function ks(n){let e=n.indexOf("$");return b(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new j(n.substr(0,e))}}function Ms(n,e,t){let i=n.syncPointTree_.get(e);b(i,"Missing sync point for query tag that we're tracking");let s=Kn(n.pendingWriteTree_,e);return ws(i,t,s,null)}function gc(n){return n.fold((e,t,i)=>{if(t&&qe(t))return[$n(t)];{let s=[];return t&&(s=Do(t)),he(i,(r,o)=>{s=s.concat(o)}),s}})}function Yt(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(cc())(n._repo,n._path):n}function bc(n,e){for(let t=0;t<e.length;++t){let i=e[t];if(!i._queryParams.loadsAllData()){let s=Qn(i),r=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(r)}}}function Cc(){return dc++}function vc(n,e,t){let i=e._path,s=Xt(n,e),r=Ho(n,t),o=n.listenProvider_.startListening(Yt(e),s,r.hashFn,r.onComplete),a=n.syncPointTree_.subtree(i);if(s)b(!qe(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,h,u)=>{if(!N(c)&&h&&qe(h))return[$n(h).query];{let f=[];return h&&(f=f.concat(Do(h).map(v=>v.query))),he(u,(v,x)=>{f=f.concat(x)}),f}});for(let c=0;c<l.length;++c){let h=l[c];n.listenProvider_.stopListening(Yt(h),Xt(n,h))}}return o}var es=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},ts=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=$(this.path_,e);return new n(this.syncTree_,t)}node(){return Ss(this.syncTree_,this.path_)}},yc=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Br=function(n,e,t){if(!n||typeof n!="object")return n;if(b(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return wc(n[".sv"],e,t);if(typeof n[".sv"]=="object")return Sc(n[".sv"],e);b(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},wc=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:b(!1,"Unexpected server value: "+n)}},Sc=function(n,e,t){n.hasOwnProperty("increment")||b(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&b(!1,"Unexpected increment value: "+i);let s=e.node();if(b(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;let o=s.getValue();return typeof o!="number"?i:o+i},xc=function(n,e,t,i){return Ts(e,new ts(t,n),i)},zo=function(n,e,t){return Ts(n,new es(e),t)};function Ts(n,e,t){let i=n.getPriority().val(),s=Br(i,e.getImmediateChild(".priority"),t),r;if(n.isLeafNode()){let o=n,a=Br(o.getValue(),e,t);return a!==o.getValue()||s!==o.getPriority().val()?new St(a,ee(s)):n}else{let o=n;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new St(s))),o.forEachChild(U,(a,l)=>{let c=Ts(l,e.getImmediateChild(a),t);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}var Jt=class{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}};function Es(n,e){let t=e instanceof j?e:new j(e),i=n,s=A(t);for(;s!==null;){let r=Qe(i.node.children,s)||{children:{},childCount:0};i=new Jt(s,i,r),t=H(t),s=A(t)}return i}function Pt(n){return n.node.value}function Uo(n,e){n.node.value=e,ns(n)}function qo(n){return n.node.childCount>0}function kc(n){return Pt(n)===void 0&&!qo(n)}function Zn(n,e){he(n.node.children,(t,i)=>{e(new Jt(t,n,i))})}function Yo(n,e,t,i){t&&!i&&e(n),Zn(n,s=>{Yo(s,e,!0,i)}),t&&i&&e(n)}function Mc(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function on(n){return new j(n.parent===null?n.name:on(n.parent)+"/"+n.name)}function ns(n){n.parent!==null&&Tc(n.parent,n.name,n)}function Tc(n,e,t){let i=kc(t),s=Te(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,ns(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,ns(n))}var Ec=/[\[\].#$\/\u0000-\u001F\u007F]/,Ic=/[\[\].#$\u0000-\u001F\u007F]/,_i=10*1024*1024,Ko=function(n){return typeof n=="string"&&n.length!==0&&!Ec.test(n)},$o=function(n){return typeof n=="string"&&n.length!==0&&!Ic.test(n)},Pc=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$o(n)};var Oc=function(n,e,t,i){i&&e===void 0||Is(yn(n,"value"),e,t)},Is=function(n,e,t){let i=t instanceof j?new Ii(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+et(i));if(typeof e=="function")throw new Error(n+"contains a function "+et(i)+" with contents = "+e.toString());if(Kr(e))throw new Error(n+"contains "+e.toString()+" "+et(i));if(typeof e=="string"&&e.length>_i/3&&Lt(e)>_i)throw new Error(n+"contains a string greater than "+_i+" utf8 bytes "+et(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(he(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!Ko(o)))throw new Error(n+" contains an invalid key ("+o+") "+et(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cl(i,o),Is(n,a,i),dl(i)}),s&&r)throw new Error(n+' contains ".value" child '+et(i)+" in addition to actual children.")}};var Qo=function(n,e,t,i){if(!(i&&t===void 0)&&!$o(t))throw new Error(yn(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Nc=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Qo(n,e,t,i)},Zo=function(n,e){if(A(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Ac=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ko(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Pc(t))throw new Error(yn(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var is=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Xo(n,e){let t=null;for(let i=0;i<e.length;i++){let s=e[i],r=s.getPath();t!==null&&!mo(r,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:r}),t.events.push(s)}t&&n.eventLists_.push(t)}function Pe(n,e,t){Xo(n,t),Rc(n,i=>xe(i,e)||xe(e,i))}function Rc(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){let s=n.eventLists_[i];if(s){let r=s.path;e(r)?(Dc(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Dc(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let i=t.getEventRunner();it&&re("event: "+t.toString()),It(i)}}}var Fc="repo_interrupt",Lc=25,ss=class{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new is,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Dn(),this.transactionQueueTree_=new Jt,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Vc(n,e,t){if(n.stats_=_s(n.repoInfo_),n.forceRestClient_||Va())n.server_=new ji(n.repoInfo_,(i,s,r,o)=>{Hr(n,i,s,r,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>zr(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{K(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ms(n.repoInfo_,e,(i,s,r,o)=>{Hr(n,i,s,r,o)},i=>{zr(n,i)},i=>{jc(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=ja(n.repoInfo_,()=>new zi(n.stats_,n.server_)),n.infoData_=new Wi,n.infoSyncTree_=new Un({startListening:(i,s,r,o)=>{let a=[],l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=sn(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Os(n,"connected",!1),n.serverSyncTree_=new Un({startListening:(i,s,r,o)=>(n.server_.listen(i,r,s,(a,l)=>{let c=o(a,l);Pe(n.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function Gc(n){let t=n.infoData_.getNode(new j(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Ps(n){return yc({timestamp:Gc(n)})}function Hr(n,e,t,i,s){n.dataUpdateCount++;let r=new j(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(s)if(i){let l=Ft(t,c=>ee(c));o=pc(n.serverSyncTree_,r,l,s)}else{let l=ee(t);o=jo(n.serverSyncTree_,r,l,s)}else if(i){let l=Ft(t,c=>ee(c));o=hc(n.serverSyncTree_,r,l)}else{let l=ee(t);o=sn(n.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=Jn(n,r)),Pe(n.eventQueue_,a,o)}function zr(n,e){Os(n,"connected",e),e===!1&&Hc(n)}function jc(n,e){he(e,(t,i)=>{Os(n,t,i)})}function Os(n,e,t){let i=new j("/.info/"+e),s=ee(t);n.infoData_.updateSnapshot(i,s);let r=sn(n.infoSyncTree_,i,s);Pe(n.eventQueue_,i,r)}function Jo(n){return n.nextWriteId_++}function Wc(n,e,t){let i=mc(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(s=>{let r=ee(s).withIndex(e._queryParams.getIndex());_c(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=sn(n.serverSyncTree_,e._path,r);else{let a=Xt(n.serverSyncTree_,e);o=jo(n.serverSyncTree_,e._path,r,a)}return Pe(n.eventQueue_,e._path,o),Go(n.serverSyncTree_,e,t,null,!0),r},s=>(Xn(n,"get for query "+K(e)+" failed: "+s),Promise.reject(new Error(s))))}function Bc(n,e,t,i,s){Xn(n,"set",{path:e.toString(),value:t,priority:i});let r=Ps(n),o=ee(t,i),a=Ss(n.serverSyncTree_,e),l=zo(o,a,r),c=Jo(n),h=Vo(n.serverSyncTree_,e,l,c,!0);Xo(n.eventQueue_,h),n.server_.put(e.toString(),o.val(!0),(f,v)=>{let x=f==="ok";x||de("set at "+e+" failed: "+f);let W=nt(n.serverSyncTree_,c,!x);Pe(n.eventQueue_,e,W),Uc(n,s,f,v)});let u=sa(n,e);Jn(n,u),Pe(n.eventQueue_,u,[])}function Hc(n){Xn(n,"onDisconnectEvents");let e=Ps(n),t=Dn();Bi(n.onDisconnect_,L(),(s,r)=>{let o=xc(s,r,n.serverSyncTree_,e);So(t,s,o)});let i=[];Bi(t,L(),(s,r)=>{i=i.concat(sn(n.serverSyncTree_,s,r));let o=sa(n,s);Jn(n,o)}),n.onDisconnect_=Dn(),Pe(n.eventQueue_,L(),i)}function zc(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Fc)}function Xn(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),re(t,...e)}function Uc(n,e,t,i){e&&It(()=>{if(t==="ok")e(null);else{let s=(t||"error").toUpperCase(),r=s;i&&(r+=": "+i);let o=new Error(r);o.code=s,e(o)}})}function ea(n,e,t){return Ss(n.serverSyncTree_,e,t)||E.EMPTY_NODE}function Ns(n,e=n.transactionQueueTree_){if(e||ei(n,e),Pt(e)){let t=na(n,e);b(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&qc(n,on(e),t)}else qo(e)&&Zn(e,t=>{Ns(n,t)})}function qc(n,e,t){let i=t.map(c=>c.currentWriteId),s=ea(n,e,i),r=s,o=s.hash();for(let c=0;c<t.length;c++){let h=t[c];b(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let u=ae(e,h.path);r=r.updateChild(u,h.currentOutputSnapshotRaw)}let a=r.val(!0),l=e;n.server_.put(l.toString(),a,c=>{Xn(n,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){let u=[];for(let f=0;f<t.length;f++)t[f].status=2,h=h.concat(nt(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&u.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();ei(n,Es(n.transactionQueueTree_,e)),Ns(n,n.transactionQueueTree_),Pe(n.eventQueue_,e,h);for(let f=0;f<u.length;f++)It(u[f])}else{if(c==="datastale")for(let u=0;u<t.length;u++)t[u].status===3?t[u].status=4:t[u].status=0;else{de("transaction at "+l.toString()+" failed: "+c);for(let u=0;u<t.length;u++)t[u].status=4,t[u].abortReason=c}Jn(n,e)}},o)}function Jn(n,e){let t=ta(n,e),i=on(t),s=na(n,t);return Yc(n,s,i),i}function Yc(n,e,t){if(e.length===0)return;let i=[],s=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=ae(t,l.path),h=!1,u;if(b(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,u=l.abortReason,s=s.concat(nt(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Lc)h=!0,u="maxretry",s=s.concat(nt(n.serverSyncTree_,l.currentWriteId,!0));else{let f=ea(n,l.path,o);l.currentInputSnapshot=f;let v=e[a].update(f.val());if(v!==void 0){Is("transaction failed: Data returned ",v,l.path);let x=ee(v);typeof v=="object"&&v!=null&&Te(v,".priority")||(x=x.updatePriority(f.getPriority()));let ne=l.currentWriteId,lt=Ps(n),dn=zo(x,f,lt);l.currentOutputSnapshotRaw=x,l.currentOutputSnapshotResolved=dn,l.currentWriteId=Jo(n),o.splice(o.indexOf(ne),1),s=s.concat(Vo(n.serverSyncTree_,l.path,dn,l.currentWriteId,l.applyLocally)),s=s.concat(nt(n.serverSyncTree_,ne,!0))}else h=!0,u="nodata",s=s.concat(nt(n.serverSyncTree_,l.currentWriteId,!0))}Pe(n.eventQueue_,t,s),s=[],h&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(u==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(u),!1,null))))}ei(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)It(i[a]);Ns(n,n.transactionQueueTree_)}function ta(n,e){let t,i=n.transactionQueueTree_;for(t=A(e);t!==null&&Pt(i)===void 0;)i=Es(i,t),e=H(e),t=A(e);return i}function na(n,e){let t=[];return ia(n,e,t),t.sort((i,s)=>i.order-s.order),t}function ia(n,e,t){let i=Pt(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);Zn(e,s=>{ia(n,s,t)})}function ei(n,e){let t=Pt(e);if(t){let i=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[i]=t[s],i++);t.length=i,Uo(e,t.length>0?t:void 0)}Zn(e,i=>{ei(n,i)})}function sa(n,e){let t=on(ta(n,e)),i=Es(n.transactionQueueTree_,e);return Mc(i,s=>{mi(n,s)}),mi(n,i),Yo(i,s=>{mi(n,s)}),t}function mi(n,e){let t=Pt(e);if(t){let i=[],s=[],r=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(b(r===o-1,"All SENT items should be at beginning of queue."),r=o,t[o].status=3,t[o].abortReason="set"):(b(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),s=s.concat(nt(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?Uo(e,void 0):t.length=r+1,Pe(n.eventQueue_,on(e),s);for(let o=0;o<i.length;o++)It(i[o])}}function Kc(n){let e="",t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function $c(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):de(`Invalid query segment '${t}' in query '${n}'`)}return e}var Ur=function(n,e){let t=Qc(n),i=t.namespace;t.domain==="firebase.com"&&De(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&De("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||Ia();let s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Tn(t.host,t.secure,i,s,e,"",i!==t.subdomain),path:new j(t.pathString)}},Qc=function(n){let e="",t="",i="",s="",r="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let h=n.indexOf("/");h===-1&&(h=n.length);let u=n.indexOf("?");u===-1&&(u=n.length),e=n.substring(0,Math.min(h,u)),h<u&&(s=Kc(n.substring(h,u)));let f=$c(n.substring(Math.min(n.length,u)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let v=e.slice(0,c);if(v.toLowerCase()==="localhost")t="localhost";else if(v.split(".").length<=2)t=v;else{let x=e.indexOf(".");i=e.substring(0,x).toLowerCase(),t=e.substring(x+1),r=i}"ns"in f&&(r=f.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};var rs=class{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+K(this.snapshot.exportVal())}},os=class{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var as=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return b(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var ls=class n{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return N(this._path)?null:fo(this._path)}get ref(){return new Fe(this._repo,this._path)}get _queryIdentifier(){let e=Or(this._queryParams),t=ps(e);return t==="{}"?"default":t}get _queryObject(){return Or(this._queryParams)}isEqual(e){if(e=Ze(e),!(e instanceof n))return!1;let t=this._repo===e._repo,i=mo(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+ll(this._path)}};var Fe=class n extends ls{constructor(e,t){super(e,t,new Gi,!1)}get parent(){let e=_o(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},qn=class n{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new j(e),i=cs(this.ref,e);return new n(this._node.getChild(t),i,U)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new n(s,cs(this.ref,i),U)))}hasChild(e){let t=new j(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function ye(n,e){return n=Ze(n),n._checkNotDeleted("ref"),e!==void 0?cs(n._root,e):n._root}function cs(n,e){return n=Ze(n),A(n._path)===null?Nc("child","path",e,!1):Qo("child","path",e,!1),new Fe(n._repo,$(n._path,e))}function As(n){return Zo("remove",n._path),at(n,null)}function at(n,e){n=Ze(n),Zo("set",n._path),Oc("set",e,n._path,!1);let t=new Cn;return Bc(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function an(n){n=Ze(n);let e=new as(()=>{}),t=new ds(e);return Wc(n._repo,n,t).then(i=>new qn(i,new Fe(n._repo,n._path),n._queryParams.getIndex()))}var ds=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let i=t._queryParams.getIndex();return new rs("value",this,new qn(e.snapshotNode,new Fe(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new os(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}};ic(Fe);lc(Fe);var Zc="FIREBASE_DATABASE_EMULATOR_HOST",hs={},Xc=!1;function Jc(n,e,t,i){n.repoInfo_=new Tn(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function ed(n,e,t,i,s){let r=i||n.options.databaseURL;r===void 0&&(n.options.projectId||De("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),re("Using default host for project ",n.options.projectId),r=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=Ur(r,s),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[Zc]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=Ur(r,s),a=o.repoInfo):l=!o.repoInfo.secure;let h=s&&l?new zt(zt.OWNER):new wi(n.name,n.options,e);Ac("Invalid Firebase Database URL",o),N(o.path)||De("Database URL must point to the root of a Firebase Database (not including a child path).");let u=nd(a,n,h,new yi(n.name,t));return new us(u,n)}function td(n,e){let t=hs[e];(!t||t[n.key]!==n)&&De(`Database ${e}(${n.repoInfo_}) has already been deleted.`),zc(n),delete t[n.key]}function nd(n,e,t,i){let s=hs[e.name];s||(s={},hs[e.name]=s);let r=s[n.toURLString()];return r&&De("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new ss(n,Xc,t,i),s[n.toURLString()]=r,r}var us=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Vc(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fe(this._repo,L())),this._rootInternal}_delete(){return this._rootInternal!==null&&(td(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&De("Cannot call "+e+" on a deleted database.")}};function ra(n=cr(),e){let t=ar(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let i=$s("database");i&&id(t,...i)}return t}function id(n,e,t,i={}){n=Ze(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&De("Cannot call useEmulator() after instance has already been initialized.");let s=n._repoInternal,r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&De('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new zt(zt.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Qs(i.mockUserToken,n.app.options.projectId);r=new zt(o)}Jc(s,e,t,r)}function sd(n){Ma(lr),or(new ir("database",(e,{instanceIdentifier:t})=>{let i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return ed(i,s,r,t)},"PUBLIC").setMultipleInstances(!0)),ci(pr,_r,n),ci(pr,_r,"esm2017")}ms.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ms.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};sd();var Ot=(()=>{let e=class e{constructor(){}isLocal(){return location.hostname==="localhost"}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ye=(()=>{let e=class e{constructor(i,s,r){this.authService=i,this.envService=s,this.router=r}getCardsLocation(){return this.authService.user+"/cards"}getSetsLocation(){return this.authService.user+"/sets"}getDb(){let i=this.authService.getFirebaseApp();return i||this.router.navigateByUrl("/auth"),i?ra(i):null}getLocalLang(i){return i==="base_lang"?"en":"de"}getLanguage(i){return M(this,null,function*(){if(this.envService.isLocal())return this.getLocalLang(i);let s=this.getDb();if(!s)return null;let r=ye(s,this.authService.user+"/"+i);return yield an(r).then(o=>o.exists()?o.toJSON():null)})}getBaseLanguage(){return M(this,null,function*(){return this.getLanguage("base_lang")})}getGoalLanguage(){return M(this,null,function*(){return this.getLanguage("goal_lang")})}getSettings(){return M(this,null,function*(){let i=this.getDb();if(!i||this.envService.isLocal())return null;let s=ye(i,this.authService.user+"/settings");return yield an(s).then(r=>r.exists()?r.toJSON():null)})}setSettings(i){return M(this,null,function*(){let s=this.getDb();if(!s||this.envService.isLocal())return;let r=ye(s,this.authService.user+"/settings");return yield at(r,i)})}getCards(){return M(this,null,function*(){let i=this.getDb();if(!i)return null;let s=ye(i,this.getCardsLocation());return yield an(s).then(r=>r.exists()?r.toJSON():null)})}updateCard(i){return M(this,null,function*(){let s=this.getDb();if(s)return at(ye(s,this.getCardsLocation()+"/"+i.id),i)})}addCard(i){return M(this,null,function*(){let s=this.getDb();if(s)return at(ye(s,this.getCardsLocation()+"/"+i.id),i)})}deleteCard(i){return M(this,null,function*(){let s=this.getDb();if(s)return As(ye(s,this.getCardsLocation()+"/"+i))})}getSets(){return M(this,null,function*(){let i=this.getDb();if(!i)return null;let s=ye(i,this.getSetsLocation());return yield an(s).then(r=>r.exists()?r.toJSON():null)})}addSet(i){return M(this,null,function*(){let s=this.getDb();if(s)return at(ye(s,this.getSetsLocation()+"/"+i.id),i)})}updateSet(i){return M(this,null,function*(){let s=this.getDb();if(s)return at(ye(s,this.getSetsLocation()+"/"+i.id),i)})}deleteSet(i){return M(this,null,function*(){let s=this.getDb();if(s)return As(ye(s,this.getSetsLocation()+"/"+i))})}};e.\u0275fac=function(s){return new(s||e)(Q(_e),Q(Ot),Q(Le))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Oe=(()=>{let e=class e{constructor(i,s,r){this.dbService=i,this.envService=s,this.notificationService=r,this.cards=null,this.cardAdded=new q,this.typeOptions=["masculine","feminine","neuter","verb","other"]}loadCards(i){return M(this,null,function*(){return this.cards&&this.cards.length>0?this.cards:this.envService.isLocal()?(this.cards=fr,this.notificationService.push({message:"Sample cards loaded!",success:!0}),this.cards?this.cards:[]):this.dbService.getCards().then(s=>(this.cards=Object.values(s),this.notificationService.push({message:"Cards loaded!",success:!0}),this.cards))})}getCard(i){let s=this.findCardIndex(i);return s===null||!this.cards?null:this.cards[s]}getCards(){return this.cards?this.cards:[]}getStarred(){return this.cards?this.cards.filter(i=>i.starred):[]}findCardIndex(i){let s=this.getCards(),r=0,o=s.length-1;for(;o>=r;){let a=Math.floor((o+r)/2),l=s[a];if(l.id===i)return a;l.id<i?r=a+1:l.id>i&&(o=a-1)}return this.notificationService.push({message:"Couldn't find card!",success:!1}),null}update(i,s){return M(this,null,function*(){if(this.cards=yield this.loadCards(),this.envService.isLocal()){this.cards[s]=i;return}return this.dbService.updateCard(i).then(()=>{this.cards&&(this.cards[s]=i)})})}add(i){return M(this,null,function*(){if(this.cards=yield this.loadCards(),i.id=this.cards[this.cards.length-1].id+1,this.envService.isLocal()){this.cards.push(i),this.cardAdded.next(i);return}return this.dbService.addCard(i).then(()=>{this.cards?.push(i),this.cardAdded.next(i)})})}delete(i,s){return M(this,null,function*(){if(this.cards=yield this.loadCards(),this.envService.isLocal()){this.cards.splice(s,1);return}return this.dbService.deleteCard(i).then(()=>{this.cards?.splice(s,1)})})}};e.\u0275fac=function(s){return new(s||e)(Q(Ye),Q(Ot),Q(ce))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var we=(()=>{let e=class e{constructor(i,s,r,o){this.cardsService=i,this.dbService=s,this.envService=r,this.notificationService=o,this.updated=new q,this.sets=null,this.colorOptions=["plum","lightgreen","palegoldenrod","lightpink","lightblue"]}parse(i){return Object.values(i).map(s=>(s.cards=s.cards?Object.values(s.cards):[],s))}loadSets(){return M(this,null,function*(){return this.sets?this.sets:this.dbService.getSets().then(i=>(this.sets=i?this.parse(i):[],this.sets))})}loadSetFromParams(i){return M(this,null,function*(){let s=i.get("setId");return s===null?null:this.getSet(Number.parseInt(s))})}getSets(){return this.sets?this.sets:[]}getSet(i){return M(this,null,function*(){this.sets||(yield this.loadSets());let s=this.sets?.find(r=>r.id===i);return s||null})}getCards(i){return M(this,null,function*(){let s=yield this.getSet(i);if(!s)return[];let r=[];return s.cards.forEach(o=>{let a=this.cardsService.getCard(o);a!==null&&r.push(a)}),r.sort((o,a)=>o.id-a.id)})}add(i){return M(this,null,function*(){if(this.sets=yield this.loadSets(),!this.sets){this.notificationService.push({message:"Failed to add set!",success:!1});return}return i.id=this.sets.length===0?0:i.id=this.sets[this.sets.length-1].id+1,this.dbService.addSet(i).then(()=>{this.sets?.push(i)})})}updateSet(i){return M(this,null,function*(){return this.dbService.updateSet(i).then(()=>{this.notificationService.push({message:"Set updated!",success:!0});let s=this.sets?.findIndex(r=>r.id===i.id);s&&this.sets&&(this.sets[s]=i),this.updated.next()}).catch(()=>{this.notificationService.push({message:"Failed to update set!",success:!1})})})}deleteSet(i){return M(this,null,function*(){return this.dbService.deleteSet(i).then(()=>{this.notificationService.push({message:"Set deleted!",success:!0});let s=this.sets?.findIndex(r=>r.id===i);s&&this.sets?.splice(s,1)}).catch(s=>{this.notificationService.push({message:"Failed to delete set!",success:!1})})})}};e.\u0275fac=function(s){return new(s||e)(Q(Oe),Q(Ye),Q(Ot),Q(ce))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var At=(()=>{let e=class e{constructor(){this.setSelectOpened=new q,this.setSelectClosed=new q}open(i){this.setSelectOpened.next(i)}close(){this.setSelectClosed.next()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var od=n=>({backgroundColor:n});function ad(n,e){if(n&1){let t=R();d(0,"button",16),y("click",function(){w(t);let s=m().$implicit,r=m(2);return S(r.addSelection(s))}),T(),d(1,"svg",6),_(2,"g",7)(3,"g",8),d(4,"g",9),_(5,"path",17)(6,"path",18),p()()()}}function ld(n,e){if(n&1){let t=R();d(0,"button",16),y("click",function(){w(t);let s=m().$implicit,r=m(2);return S(r.removeSelection(s))}),T(),d(1,"svg",6),_(2,"g",7)(3,"g",8),d(4,"g",9),_(5,"path",19),p()()()}}function cd(n,e){if(n&1&&(d(0,"div",12)(1,"div",13)(2,"div",14),P(3),I(4,ad,7,0,"button",15)(5,ld,6,0,"button",15),p()()()),n&2){let t=e.$implicit,i=m(2);g(),le(te(5,od,t.color)),g(2),oe(" ",t.name," "),g(),C("ngIf",!t.cards.includes(i.selection)),g(),C("ngIf",t.cards.includes(i.selection))}}function dd(n,e){if(n&1){let t=R();d(0,"app-modal",1)(1,"h3"),P(2,"Add to set(s)"),p(),d(3,"div",2),I(4,cd,6,7,"div",3),p(),d(5,"div",4)(6,"button",5),y("click",function(){w(t);let s=m();return S(s.close())}),T(),d(7,"svg",6),_(8,"g",7)(9,"g",8),d(10,"g",9)(11,"g",10),_(12,"path",11),p()()()(),Z(),d(13,"button",5),y("click",function(){w(t);let s=m();return S(s.close())}),T(),d(14,"svg",6),_(15,"g",7)(16,"g",8),d(17,"g",9)(18,"g",10),_(19,"path",11),p()()()()()()}if(n&2){let t=m();g(4),C("ngForOf",t.sets)}}var oa=(()=>{let e=class e{constructor(i,s){this.setsService=i,this.setSelectService=s,this.subs=[],this.open=!1,this.sets=[]}ngOnInit(){this.subs=[this.setSelectService.setSelectOpened.subscribe(i=>this.handleOpen(i)),this.setSelectService.setSelectClosed.subscribe(()=>this.open=!1)]}handleOpen(i){this.open=!0,this.selection=i,this.setsService.loadSets().then(s=>{this.sets=s})}addSelection(i){i.cards.push(this.selection),this.setsService.updateSet(i)}removeSelection(i){i.cards.splice(i.cards.findIndex(s=>s===this.selection),1),this.setsService.updateSet(i)}close(){this.open=!1}ngOnDestroy(){this.subs.forEach(i=>i.unsubscribe())}};e.\u0275fac=function(s){return new(s||e)(k(we),k(At))},e.\u0275cmp=V({type:e,selectors:[["app-set-select"]],standalone:!0,features:[G],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"select-list"],["class","set-row",4,"ngFor","ngForOf"],[1,"row-between",2,"margin-top","1rem"],[1,"icon-btn",3,"click"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["id","Menu / Close_LG"],["id","Vector","d","M21 21L12 12M12 12L3 3M12 12L21.0001 3M12 12L3 21.0001","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"set-row"],[1,"list-card"],[1,"row-between"],["class","icon-btn","style","width: 3rem; height: 3rem;",3,"click",4,"ngIf"],[1,"icon-btn",2,"width","3rem","height","3rem",3,"click"],["d","M11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8V11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H13V16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16V13H8C7.44771 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11H11V8Z","fill","#0F0F0F"],["fill-rule","evenodd","clip-rule","evenodd","d","M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM3.00683 12C3.00683 16.9668 7.03321 20.9932 12 20.9932C16.9668 20.9932 20.9932 16.9668 20.9932 12C20.9932 7.03321 16.9668 3.00683 12 3.00683C7.03321 3.00683 3.00683 7.03321 3.00683 12Z","fill","#0F0F0F"],["d","M4 12.6111L8.92308 17.5L20 6.5","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(s,r){s&1&&I(0,dd,20,1,"app-modal",0),s&2&&C("ngIf",r.open)},dependencies:[J,X,pe,mt],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.select-list[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;gap:.5rem}"]});let n=e;return n})();var aa=Xe("drop",[be("active",ge({top:"0"})),be("inactive",ge({top:"-100%"})),Ce("active => inactive",me("200ms ease-out")),Ce("inactive => active",me("200ms ease-in"))]);var hd=n=>({background:n}),la=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=V({type:e,selectors:[["app-action-slider"]],inputs:{active:"active"},standalone:!0,features:[G],decls:2,vars:5,consts:[[1,"track",3,"ngStyle"]],template:function(s,r){s&1&&(d(0,"div",0),_(1,"div"),p()),s&2&&(C("ngStyle",te(3,hd,r.active?"lightgreen":"gray")),g(),Re(r.active?"slider right":"slider left"))},dependencies:[zs],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:4px;margin-right:4px}.track[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;border-radius:2rem;width:42px;height:24px;box-shadow:0 1px 1px gray}.slider[_ngcontent-%COMP%]{border-radius:2rem;width:18px;height:18px;background:#dedede;box-shadow:1px 1px 2px #00000070}.left[_ngcontent-%COMP%]{transition:all .3s ease;margin-left:4px}.right[_ngcontent-%COMP%]{transition:all .3s ease;margin-left:20px}"]});let n=e;return n})();var ni=(()=>{let e=class e{constructor(){this.selected=!1}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=V({type:e,selectors:[["app-color-choice"]],inputs:{value:"value",selected:"selected"},standalone:!0,features:[G],decls:1,vars:4,template:function(s,r){s&1&&_(0,"div"),s&2&&(Re(r.selected?"choice selected":"choice"),dt("background-color",r.value))},styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}.choice[_ngcontent-%COMP%]{width:4rem;height:3rem;border-radius:10px;box-shadow:0 1px 2px gray}.choice[_ngcontent-%COMP%]:hover{cursor:pointer}.selected[_ngcontent-%COMP%]{outline:2px solid black}"]});let n=e;return n})();var Ke=(()=>{let e=class e{transform(i){switch(i){case"masculine":return"lightblue";case"feminine":return"lightpink";case"neuter":return"palegoldenrod";case"verb":return"plum";case"other":return"lightgreen";default:return"gray"}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275pipe=hn({name:"typeColor",type:e,pure:!0,standalone:!0});let n=e;return n})();var ca=(()=>{let e=class e{constructor(i){this.dbService=i}getBase(){return M(this,null,function*(){if(this.base)return this.base;let i=yield this.dbService.getBaseLanguage();return typeof i=="string"?(this.base=i,i):""})}getGoal(){return M(this,null,function*(){if(this.goal)return this.goal;let i=yield this.dbService.getGoalLanguage();return typeof i=="string"?(this.goal=i,i):""})}};e.\u0275fac=function(s){return new(s||e)(Q(Ye))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ii=(()=>{let e=class e{constructor(i){this.languageService=i}name(i){switch(i){case"en":return"English";case"es":return"Spanish";case"de":return"German";default:return"Unknown"}}transform(i){return M(this,null,function*(){switch(i){case"base":{let s=this.name(yield this.languageService.getBase());return s==="Unknown"?"Base":s}case"goal":{let s=this.name(yield this.languageService.getGoal());return s==="Unknown"?"Goal":s}default:return"Unknown"}})}};e.\u0275fac=function(s){return new(s||e)(k(ca,16))},e.\u0275pipe=hn({name:"language",type:e,pure:!0,standalone:!0});let n=e;return n})();var Ne=(()=>{let e=class e{constructor(){this.settingsOpen=new q,this.addCardOpen=new q,this.addSetOpen=new q}openSettings(){this.settingsOpen.next(!0)}closeSettings(){this.settingsOpen.next(!1)}openAddCard(){this.addCardOpen.next(!0)}closeAddCard(){this.addCardOpen.next(!1)}openAddSet(){this.addSetOpen.next(!0)}closeAddSet(){this.addSetOpen.next(!1)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Rt=(()=>{let e=class e{constructor(i,s){this.dbService=i,this.notificationsService=s,this.settings={base_front:!0,deal_starred:!1,deck_size:10},this.loading=!0,this.loaded=new q,this.dealStarredChanged=new q,this.dbService.getSettings().then(r=>{this.loading=!1,this.loaded.next(),r&&(this.settings=r)})}update(i){return M(this,null,function*(){return this.dbService.setSettings(i).then(()=>{this.settings=i,this.notificationsService.push({message:"Settings updated!",success:!0})}).catch(()=>{this.notificationsService.push({message:"Failed to update settings!",success:!1})})})}getDealStarred(){return this.settings.deal_starred}setDealStarred(i){let s=ct(Ae({},this.settings),{deal_starred:i});this.update(s).then(()=>this.dealStarredChanged.next())}getBaseFront(){return this.settings.base_front}setBaseFront(i){let s=ct(Ae({},this.settings),{base_front:i});this.update(s)}getDeckSize(){return this.settings.deck_size}setDeckSize(i){let s=ct(Ae({},this.settings),{deck_size:i});this.update(s)}};e.\u0275fac=function(s){return new(s||e)(Q(Ye),Q(ce))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function fd(n,e){if(n&1){let t=R();d(0,"form",1)(1,"div",12)(2,"p",13),P(3,"Deal from starred cards only?"),p(),d(4,"app-action-slider",14),y("click",function(){w(t);let s=m();return S(s.toggleDealFromStarred())}),p()(),d(5,"div",12)(6,"p",13),P(7),D(8,"language"),D(9,"async"),p(),d(10,"app-action-slider",14),y("click",function(){w(t);let s=m();return S(s.toggleBaseFront())}),p()(),d(11,"div",12),_(12,"input",15),d(13,"button",16),y("click",function(){w(t);let s=m();return S(s.setDeckSize())}),P(14,"Set deck size"),p()()()}if(n&2){let t=m();C("formGroup",t.settingsForm),g(4),C("active",t.getDealFromStarred()),g(3),oe("",F(9,6,F(8,4,"base"))," on front?"),g(3),C("active",t.getBaseFront())}}function pd(n,e){if(n&1&&(d(0,"option",25),D(1,"typeColor"),P(2),p()),n&2){let t=e.$implicit;dt("background",F(1,4,t)),C("ngValue",t),g(2),fe(t)}}function _d(n,e){if(n&1&&(d(0,"form",2)(1,"h2"),P(2,"Add card"),p(),_(3,"input",17),D(4,"language"),D(5,"async"),_(6,"input",18),D(7,"language"),D(8,"async"),d(9,"select",19),I(10,pd,3,6,"option",20),p(),_(11,"textarea",21),D(12,"language"),D(13,"async"),_(14,"textarea",22),D(15,"language"),D(16,"async"),_(17,"textarea",23),D(18,"language"),D(19,"async"),_(20,"textarea",24),D(21,"language"),D(22,"async"),p()),n&2){let t=m();C("formGroup",t.addCardForm),g(3),C("placeholder",F(5,10,F(4,8,"base"))),g(3),C("placeholder",F(8,14,F(7,12,"goal"))),g(4),C("ngForOf",t.typeOptions),g(),C("placeholder",F(13,18,F(12,16,"goal"))+" sentence 1"),g(3),C("placeholder",F(16,22,F(15,20,"base"))+" sentence 1"),g(3),C("placeholder",F(19,26,F(18,24,"goal"))+" sentence 2"),g(3),C("placeholder",F(22,30,F(21,28,"base"))+" sentence 2")}}function md(n,e){if(n&1){let t=R();d(0,"app-color-choice",29),y("click",function(){let s=w(t).$implicit,r=m(2);return S(r.addSetForm.patchValue({color:s}))}),p()}if(n&2){let t,i=e.$implicit,s=m(2);C("value",i)("selected",((t=s.addSetForm.get("color"))==null?null:t.value)===i)}}function gd(n,e){if(n&1&&(d(0,"form",2)(1,"h2"),P(2,"Add set"),p(),_(3,"input",26),d(4,"div",27),I(5,md,1,2,"app-color-choice",28),p()()),n&2){let t=m();C("formGroup",t.addSetForm),g(5),C("ngForOf",t.getColorOptions())}}function bd(n,e){if(n&1){let t=R();d(0,"button",4),y("click",function(){w(t);let s=m();return S(s.save())}),T(),d(1,"svg",5),_(2,"g",6)(3,"g",7),d(4,"g",8),_(5,"path",30),p()()()}}var da=(()=>{let e=class e{constructor(i,s,r,o,a){this.cardsService=i,this.menuService=s,this.notificationsService=r,this.setsService=o,this.settingsService=a,this.subs=[],this.dropState="inactive",this.settingsOpen=!1,this.addCardOpen=!1,this.addSetOpen=!1,this.settingsForm=new je({deckSize:new z(this.settingsService.getDeckSize(),[se.min(1),se.required])}),this.addCardForm=new je({base:new z(null,[se.required,se.minLength(1)]),goal:new z(null,se.required),type:new z("masculine",se.required),goal_sent_1:new z(""),base_sent_1:new z(""),goal_sent_2:new z(""),base_sent_2:new z("")}),this.addSetForm=new je({name:new z(null,se.required),color:new z(null,se.required)})}ngOnInit(){this.subs=[this.menuService.settingsOpen.subscribe(i=>this.settingsOpen=i),this.menuService.addCardOpen.subscribe(i=>this.addCardOpen=i),this.menuService.addSetOpen.subscribe(i=>this.addSetOpen=i),this.settingsService.loaded.subscribe(()=>{this.settingsForm.patchValue({deckSize:this.settingsService.getDeckSize()})})],this.typeOptions=this.cardsService.typeOptions}resetAddForm(){this.addCardForm.reset(),this.addCardForm.patchValue({type:"masculine"})}close(){this.addCardOpen&&this.resetAddForm(),this.addSetOpen&&this.addSetForm.reset(),this.menuService.closeSettings(),this.menuService.closeAddCard(),this.menuService.closeAddSet()}save(){this.addCardOpen?this.addCard():this.addSetOpen&&this.addSet()}addCard(){let i={id:-1,base:this.addCardForm.controls.base.value?this.addCardForm.controls.base.value:"",goal:this.addCardForm.controls.goal.value?this.addCardForm.controls.goal.value:"",type:this.addCardForm.controls.type.value?this.addCardForm.controls.type.value:"other",goal_sent_1:this.addCardForm.controls.goal_sent_1.value?this.addCardForm.controls.goal_sent_1.value:"",base_sent_1:this.addCardForm.controls.base_sent_1.value?this.addCardForm.controls.base_sent_1.value:"",goal_sent_2:this.addCardForm.controls.goal_sent_2.value?this.addCardForm.controls.goal_sent_2.value:"",base_sent_2:this.addCardForm.controls.base_sent_2.value?this.addCardForm.controls.base_sent_2.value:"",starred:!1};this.cardsService.add(i).then(()=>{this.close(),this.notificationsService.push({message:"Card added!",success:!0})}).catch(s=>{this.notificationsService.push({message:"Error adding card to db! "+s,success:!1})})}getColorOptions(){return this.setsService.colorOptions}addSet(){let i=this.addSetForm.value,s={id:-1,name:i.name?i.name:"",color:i.color?i.color:"lightgray",cards:[]};this.setsService.add(s).then(()=>this.close())}getDropState(){return this.settingsOpen||this.addCardOpen||this.addSetOpen?"active":"inactive"}getDealFromStarred(){return this.settingsService.getDealStarred()}toggleDealFromStarred(){this.settingsService.setDealStarred(!this.settingsService.getDealStarred())}getBaseFront(){return this.settingsService.getBaseFront()}toggleBaseFront(){this.settingsService.setBaseFront(!this.settingsService.getBaseFront())}setDeckSize(){let i=this.settingsForm.controls.deckSize.value;i&&this.settingsService.setDeckSize(i)}ngOnDestroy(){this.subs.forEach(i=>i.unsubscribe())}};e.\u0275fac=function(s){return new(s||e)(k(Oe),k(Ne),k(ce),k(we),k(Rt))},e.\u0275cmp=V({type:e,selectors:[["app-menu"]],standalone:!0,features:[G],decls:20,vars:3,consts:[[1,"menu-container"],[3,"formGroup"],[1,"add-form",3,"formGroup"],[1,"navbar"],[1,"icon-btn",3,"click"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["id","Menu / Close_LG"],["id","Vector","d","M21 21L12 12M12 12L3 3M12 12L21.0001 3M12 12L3 21.0001","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","icon-btn",3,"click",4,"ngIf"],[1,"row"],[1,"label",2,"margin-right","1rem"],[3,"click","active"],["type","number","placeholder","deck size","formControlName","deckSize",2,"margin","0"],[1,"btn",2,"margin","0",3,"click"],["type","text","formControlName","base",1,"border-input",3,"placeholder"],["type","text","formControlName","goal",1,"border-input",3,"placeholder"],["formControlName","type",1,"border-input"],[3,"ngValue","background",4,"ngFor","ngForOf"],["type","text","formControlName","goal_sent_1",1,"border-input",3,"placeholder"],["type","text","formControlName","base_sent_1",1,"border-input",3,"placeholder"],["type","text","formControlName","goal_sent_2",1,"border-input",3,"placeholder"],["type","text","formControlName","base_sent_2",1,"border-input",3,"placeholder"],[3,"ngValue"],["type","text","formControlName","name","placeholder","Name",1,"border-input"],[1,"color-container"],[3,"value","selected","click",4,"ngFor","ngForOf"],[3,"click","value","selected"],["fill-rule","evenodd","clip-rule","evenodd","d","M18.1716 1C18.702 1 19.2107 1.21071 19.5858 1.58579L22.4142 4.41421C22.7893 4.78929 23 5.29799 23 5.82843V20C23 21.6569 21.6569 23 20 23H4C2.34315 23 1 21.6569 1 20V4C1 2.34315 2.34315 1 4 1H18.1716ZM4 3C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21L5 21L5 15C5 13.3431 6.34315 12 8 12L16 12C17.6569 12 19 13.3431 19 15V21H20C20.5523 21 21 20.5523 21 20V6.82843C21 6.29799 20.7893 5.78929 20.4142 5.41421L18.5858 3.58579C18.2107 3.21071 17.702 3 17.1716 3H17V5C17 6.65685 15.6569 8 14 8H10C8.34315 8 7 6.65685 7 5V3H4ZM17 21V15C17 14.4477 16.5523 14 16 14L8 14C7.44772 14 7 14.4477 7 15L7 21L17 21ZM9 3H15V5C15 5.55228 14.5523 6 14 6H10C9.44772 6 9 5.55228 9 5V3Z","fill","#0F0F0F"]],template:function(s,r){s&1&&(d(0,"div",0),I(1,fd,15,8,"form",1)(2,_d,23,32,"form",2)(3,gd,6,2,"form",2),d(4,"div",3)(5,"button",4),y("click",function(){return r.close()}),T(),d(6,"svg",5),_(7,"g",6)(8,"g",7),d(9,"g",8)(10,"g",9),_(11,"path",10),p()()()(),I(12,bd,6,0,"button",11),Z(),d(13,"button",4),y("click",function(){return r.close()}),T(),d(14,"svg",5),_(15,"g",6)(16,"g",7),d(17,"g",8)(18,"g",9),_(19,"path",10),p()()()()()()),s&2&&(C("@drop",r.getDropState()),g(),ie(r.settingsOpen?1:r.addCardOpen?2:r.addSetOpen?3:-1),g(11),C("ngIf",r.addCardOpen&&r.addCardForm.valid||r.addSetOpen&&r.addSetForm.valid))},dependencies:[J,X,pe,mn,We,ft,Sn,xn,Ve,dr,wn,Ge,ut,pt,_t,la,ni,Ke,ii],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}.menu-container[_ngcontent-%COMP%]{position:absolute;left:0;display:flex;flex-direction:column;justify-content:flex-end;width:100%;height:100%;background:#dedede;z-index:1}.row[_ngcontent-%COMP%]{margin:0 1rem;display:flex;flex-direction:row;justify-content:space-between}.add-form[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:flex-end;margin:1rem 0;text-align:center;gap:.5rem}"],data:{animation:[aa]}});let n=e;return n})();var Cd=["*"],$e=(()=>{let e=class e{constructor(i){this.menuService=i}ngOnInit(){}settingsPressed(){this.menuService.openSettings()}};e.\u0275fac=function(s){return new(s||e)(k(Ne))},e.\u0275cmp=V({type:e,selectors:[["app-navbar"]],standalone:!0,features:[G],ngContentSelectors:Cd,decls:13,vars:0,consts:[[1,"navbar"],["title","Settings",1,"icon-btn",3,"click"],["viewBox","-0.5 0 25 25","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M12 7.82001H22","stroke","#000000","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M2 7.82001H4","stroke","#000000","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M20 16.82H22","stroke","#000000","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M2 16.82H12","stroke","#000000","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M8 11.82C10.2091 11.82 12 10.0291 12 7.82001C12 5.61087 10.2091 3.82001 8 3.82001C5.79086 3.82001 4 5.61087 4 7.82001C4 10.0291 5.79086 11.82 8 11.82Z","stroke","#000000","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M16 20.82C18.2091 20.82 20 19.0291 20 16.82C20 14.6109 18.2091 12.82 16 12.82C13.7909 12.82 12 14.6109 12 16.82C12 19.0291 13.7909 20.82 16 20.82Z","stroke","#000000","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"]],template:function(s,r){s&1&&(pn(),d(0,"div",0),_n(1),d(2,"button",1),y("click",function(){return r.settingsPressed()}),T(),d(3,"svg",2),_(4,"g",3)(5,"g",4),d(6,"g",5),_(7,"path",6)(8,"path",7)(9,"path",8)(10,"path",9)(11,"path",10)(12,"path",11),p()()()())},styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}.navbar[_ngcontent-%COMP%]{border-radius:10px 10px 0 0;border-bottom:none;box-shadow:0 2px 4px #000;padding-top:.5rem}"]});let n=e;return n})();var Dt=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=V({type:e,selectors:[["app-loading"]],standalone:!0,features:[G],decls:2,vars:0,consts:[[1,"loading-container"],[1,"spinner"]],template:function(s,r){s&1&&(d(0,"div",0),_(1,"div",1),p())},styles:[".loading-container[_ngcontent-%COMP%]{width:100%;height:100%;position:fixed;top:25%;display:flex;flex-direction:row;justify-content:center}.spinner[_ngcontent-%COMP%]{width:2rem;height:2rem;border-radius:100%;animation:_ngcontent-%COMP%_morph 1s alternate infinite}@keyframes _ngcontent-%COMP%_morph{0%{background:plum;border-radius:50%;margin-top:0}to{background:#90ee90;border-radius:100%;margin-top:2rem}}"]});let n=e;return n})();var ha=Xe("flip",[be("active",ge({transform:"rotateY(180deg)"})),be("inactive",ge({transform:"rotateY(0)"})),Ce("active => inactive",me("300ms ease-out")),Ce("inactive => active",me("300ms ease-in"))]),ua=Xe("swipeRight",[be("active",ge({transform:"rotateZ(90deg)",translate:"150% -100%"})),be("inactive",ge({transform:"rotateZ(0deg)",translate:"0% 0%"})),Ce("active => inactive",me("300ms ease-out")),Ce("inactive => active",me("300ms ease-in"))]),fa=Xe("swipeLeft",[be("active",ge({transform:"rotateZ(-90deg)",translate:"-150% -100%"})),be("inactive",ge({transform:"rotateZ(0deg)",translate:"0% 0%"})),Ce("active => inactive",me("400ms ease-out")),Ce("inactive => active",me("400ms ease-in"))]),pa=Xe("fadeIn",[be("active",ge({opacity:"100%"})),be("inactive",ge({opacity:"0%"})),Ce("active => inactive",me("200ms ease-out")),Ce("inactive => active",me("200ms ease-in"))]);var vd=n=>({background:n});function yd(n,e){if(n&1){let t=R();d(0,"app-modal"),P(1," Delete card? "),d(2,"div",3)(3,"button",4),y("click",function(s){w(t);let r=m();return S(r.delete(s))}),P(4,"yes"),p(),d(5,"button",5),y("click",function(){w(t);let s=m();return S(s.showDelete=!1)}),P(6,"no"),p()()()}}function wd(n,e){if(n&1&&(d(0,"div"),P(1),p()),n&2){let t=m();Re(t.flipped?"card-content":"card-content back"),g(),oe(" ",t.flipped?t.getFront():t.getBack()," ")}}function Sd(n,e){n&1&&(T(),d(0,"svg",14),_(1,"g",8)(2,"g",9),d(3,"g",10),_(4,"path",20),p()())}function xd(n,e){n&1&&(T(),d(0,"svg",15),_(1,"g",8)(2,"g",9),d(3,"g",10),_(4,"path",21),p()())}function kd(n,e){if(n&1){let t=R();d(0,"div")(1,"button",6),y("click",function(s){w(t);let r=m();return S(r.editTapped(s))}),T(),d(2,"svg",7),_(3,"g",8)(4,"g",9),d(5,"g",10),_(6,"path",11)(7,"path",12),p()()(),Z(),d(8,"button",13),y("click",function(s){w(t);let r=m();return S(r.starTapped(s,r.card))}),I(9,Sd,5,0,":svg:svg",14)(10,xd,5,0,":svg:svg",15),p(),d(11,"button",6),y("click",function(s){w(t);let r=m();return S(r.infoTapped(s))}),T(),d(12,"svg",16),_(13,"g",8)(14,"g",9),d(15,"g",10),_(16,"path",17)(17,"path",18)(18,"path",19),p()()()()}if(n&2){let t=m();Re(t.flipped?"btn-row":"btn-row back"),g(9),ie(t.card.starred?9:10)}}function Md(n,e){if(n&1&&(d(0,"option",32),D(1,"typeColor"),P(2),p()),n&2){let t=e.$implicit,i=m(3);dt("background",F(1,4,t)),C("selected",t===i.card.type),g(2),fe(t)}}function Td(n,e){if(n&1&&(d(0,"div")(1,"form",23),_(2,"input",24),D(3,"language"),D(4,"async"),_(5,"input",25),D(6,"language"),D(7,"async"),d(8,"select",26),I(9,Md,3,6,"option",27),p(),_(10,"textarea",28),D(11,"language"),D(12,"async"),_(13,"textarea",29),D(14,"language"),D(15,"async"),_(16,"textarea",30),D(17,"language"),D(18,"async"),_(19,"textarea",31),D(20,"language"),D(21,"async"),p()()),n&2){let t=m(2);g(),C("formGroup",t.editForm),g(),C("placeholder",F(4,11,F(3,9,"base"))),g(3),C("placeholder",F(7,15,F(6,13,"goal"))),g(3),C("value",t.card.type),g(),C("ngForOf",t.typeOptions),g(),C("placeholder",F(12,19,F(11,17,"goal"))+" sentence 1"),g(3),C("placeholder",F(15,23,F(14,21,"base"))+" sentence 1"),g(3),C("placeholder",F(18,27,F(17,25,"goal"))+" sentence 2"),g(3),C("placeholder",F(21,31,F(20,29,"base"))+" sentence 2")}}function Ed(n,e){if(n&1&&(d(0,"div")(1,"p",33),P(2),p(),d(3,"p",34),P(4),p(),d(5,"p",33),P(6),p(),d(7,"p",34),P(8),p()()),n&2){let t=m(2);g(2),fe(t.card.goal_sent_1),g(2),fe(t.card.base_sent_1),g(2),fe(t.card.goal_sent_2),g(2),fe(t.card.base_sent_2)}}function Id(n,e){if(n&1){let t=R();d(0,"button",39),y("click",function(s){w(t);let r=m(3);return S(r.saveEdit(s))}),T(),d(1,"svg",16),_(2,"g",8)(3,"g",9),d(4,"g",10),_(5,"path",40),p()()()}if(n&2){let t=m(3);C("disabled",t.editForm.invalid)}}function Pd(n,e){if(n&1){let t=R();d(0,"button",6),y("click",function(s){w(t);let r=m(3);return S(r.delete(s))}),T(),d(1,"svg",41),_(2,"g",8)(3,"g",9),d(4,"g",10),_(5,"path",42),p()()()}}function Od(n,e){if(n&1){let t=R();d(0,"div",3)(1,"button",6),y("click",function(s){w(t);let r=m(2);return S(r.menuClose(s))}),T(),d(2,"svg",35),_(3,"g",8)(4,"g",9),d(5,"g",10),_(6,"path",36),p()()(),I(7,Id,6,1,"button",37)(8,Pd,6,0,"button",38),p()}if(n&2){let t=m(2);g(7),C("ngIf",t.showEdit&&t.editForm.valid),g(),C("ngIf",t.showEdit)}}function Nd(n,e){if(n&1){let t=R();d(0,"span"),y("@fadeIn.done",function(){w(t);let s=m();return S(s.fadeInState==="inactive"?s.revealCard():null)}),I(1,Td,22,33,"div",0)(2,Ed,9,4,"div",0)(3,Od,9,2,"div",22),p()}if(n&2){let t=m();Re(t.flipped?"card-menu":"card-menu back"),C("@fadeIn",t.fadeInState),g(),C("ngIf",t.showEdit),g(),C("ngIf",t.showInfo),g(),C("ngIf",!t.showCard)}}var si=(()=>{let e=class e{constructor(i,s){this.cardService=i,this.setSelectService=s,this.onSwiped=new un,this.onUpdated=new un,this.onDeleted=new un,this.touchStart=null,this.flipState="inactive",this.swipeRightState="inactive",this.swipeLeftState="inactive",this.fadeInState="inactive",this.flipped=!1,this.flipping=!1,this.showEdit=!1,this.showCard=!0,this.showInfo=!1,this.showDelete=!1}ngOnInit(){this.typeOptions=this.cardService.typeOptions,this.editForm=new je({base:new z(this.card.base,se.required),goal:new z(this.card.goal,se.required),type:new z(this.card.type,se.required),goal_sent_1:new z(this.card.goal_sent_1),base_sent_1:new z(this.card.base_sent_1),goal_sent_2:new z(this.card.goal_sent_2),base_sent_2:new z(this.card.base_sent_2)})}handleTouchStart(i){this.touchStart=i}handleTouchEnd(i){this.touchStart&&(this.showCard&&this.handleSwipe({start:this.touchStart,end:i}),this.touchStart=null)}handleKeyDown(i){this.showCard&&(i.key==="ArrowUp"||i.key==="ArrowDown"?this.tap():i.key==="ArrowRight"?this.swipeRight():i.key==="ArrowLeft"&&this.swipeLeft())}handleTouch(){this.tap()}handleSwipe(i){let s=i.end.changedTouches[0].pageX-i.start.changedTouches[0].pageX;Math.abs(s)>100&&(s>0?this.swipeRight():this.swipeLeft())}getFront(){return this.baseFront?this.card.base:this.card.goal}getBack(){return this.baseFront?this.card.goal:this.card.base}tap(){this.showCard&&(this.flipState=this.flipState==="inactive"?"active":"inactive")}menuClose(i){i.stopPropagation(),this.fade()}saveEdit(i){this.onUpdated.emit(Ae(Ae({},this.card),this.editForm.value)),this.menuClose(i)}delete(i){if(i.stopPropagation(),!this.showDelete){this.showDelete=!0;return}this.fade(),this.onDeleted.emit(this.card)}revealCard(){this.showEdit=!1,this.showCard=!0,this.showInfo=!1}editTapped(i){i.stopPropagation(),this.fade(),this.showEdit=!0,this.showCard=!1,this.showInfo=!1}starTapped(i,s){i.stopPropagation(),this.setSelectService.open(s.id)}infoTapped(i){i.stopPropagation(),this.fade(),this.showEdit=!1,this.showCard=!1,this.showInfo=!0}swipeRight(){this.swipeRightState=this.swipeRightState==="inactive"?"active":"inactive"}swipeLeft(){this.swipeLeftState=this.swipeLeftState==="inactive"?"active":"inactive"}fade(){this.fadeInState=this.fadeInState==="inactive"?"active":"inactive"}emitSwiped(i){i.fromState==="inactive"&&i.toState==="active"&&(i.triggerName==="swipeRight"?this.onSwiped.emit(!0):this.onSwiped.emit(!1))}};e.\u0275fac=function(s){return new(s||e)(k(Oe),k(At))},e.\u0275cmp=V({type:e,selectors:[["app-card"]],hostBindings:function(s,r){s&1&&y("touchstart",function(a){return r.handleTouchStart(a)},!1,fn)("touchend",function(a){return r.handleTouchEnd(a)},!1,fn)("keydown",function(a){return r.handleKeyDown(a)},!1,fn)},inputs:{card:"card",color:"color",baseFront:"baseFront"},outputs:{onSwiped:"onSwiped",onUpdated:"onUpdated",onDeleted:"onDeleted"},standalone:!0,features:[G],decls:5,vars:13,consts:[[4,"ngIf"],["id","container",3,"click"],[3,"class",4,"ngIf"],[1,"btn-row"],[1,"btn","submit",3,"click"],[1,"btn","cancel",3,"click"],[1,"icon-btn",3,"click"],["viewBox","0 0 1024 1024","xmlns","http://www.w3.org/2000/svg","fill","#000000"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["fill","#000000","d","M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"],["fill","#000000","d","m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"],[1,"icon-btn","star",3,"click"],["fill","#ffff00","viewBox","0 0 1920 1920","xmlns","http://www.w3.org/2000/svg","stroke","#ffff00"],["fill","#000000","viewBox","0 0 1920 1920","xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12 17.75C12.4142 17.75 12.75 17.4142 12.75 17V11C12.75 10.5858 12.4142 10.25 12 10.25C11.5858 10.25 11.25 10.5858 11.25 11V17C11.25 17.4142 11.5858 17.75 12 17.75Z","fill","#000000"],["d","M12 7C12.5523 7 13 7.44772 13 8C13 8.55228 12.5523 9 12 9C11.4477 9 11 8.55228 11 8C11 7.44772 11.4477 7 12 7Z","fill","#000000"],["fill-rule","evenodd","clip-rule","evenodd","d","M1.25 12C1.25 6.06294 6.06294 1.25 12 1.25C17.9371 1.25 22.75 6.06294 22.75 12C22.75 17.9371 17.9371 22.75 12 22.75C6.06294 22.75 1.25 17.9371 1.25 12ZM12 2.75C6.89137 2.75 2.75 6.89137 2.75 12C2.75 17.1086 6.89137 21.25 12 21.25C17.1086 21.25 21.25 17.1086 21.25 12C21.25 6.89137 17.1086 2.75 12 2.75Z","fill","#000000"],["d","M1915.918 737.475c-10.955-33.543-42.014-56.131-77.364-56.131h-612.029l-189.063-582.1v-.112C1026.394 65.588 995.335 43 959.984 43c-35.237 0-66.41 22.588-77.365 56.245L693.443 681.344H81.415c-35.35 0-66.41 22.588-77.365 56.131-10.955 33.544.79 70.137 29.478 91.03l495.247 359.831-189.177 582.212c-10.955 33.657 1.13 70.25 29.817 90.918 14.23 10.278 30.946 15.487 47.66 15.487 16.716 0 33.432-5.21 47.775-15.6l495.134-359.718 495.021 359.718c28.574 20.781 67.087 20.781 95.662.113 28.687-20.668 40.658-57.261 29.703-91.03l-189.176-582.1 495.36-359.83c28.574-20.894 40.433-57.487 29.364-91.03","fill-rule","evenodd"],["d","M1306.181 1110.407c-28.461 20.781-40.32 57.261-29.477 91.03l166.136 511.398-435.05-316.122c-28.686-20.781-67.086-20.781-95.66 0l-435.05 316.122 166.25-511.623c10.842-33.544-1.017-70.024-29.591-90.805L178.577 794.285h537.825c35.351 0 66.523-22.701 77.365-56.245l166.25-511.51 166.136 511.397a81.155 81.155 0 0 0 77.365 56.358h537.939l-435.276 316.122Zm609.77-372.819c-10.956-33.656-42.014-56.244-77.365-56.244h-612.141l-189.064-582.1C1026.426 65.589 995.367 43 960.017 43c-35.351 0-66.523 22.588-77.365 56.245L693.475 681.344H81.335c-35.351 0-66.41 22.588-77.366 56.244-10.842 33.657 1.017 70.137 29.591 90.918l495.247 359.718-189.29 582.211c-10.842 33.657 1.017 70.137 29.704 90.918 14.23 10.39 31.059 15.586 47.661 15.586 16.829 0 33.657-5.195 47.887-15.699l495.248-359.718 495.02 359.718c28.575 20.894 67.088 20.894 95.775.113 28.574-20.781 40.433-57.261 29.59-91.03l-189.289-582.1 495.247-359.717c28.687-20.781 40.546-57.261 29.59-90.918Z","fill-rule","evenodd"],["class","btn-row",4,"ngIf"],[1,"edit-form",3,"formGroup"],["type","text","formControlName","base",1,"border-input",3,"placeholder"],["type","text","formControlName","goal",1,"border-input",3,"placeholder"],["formControlName","type",1,"border-input",3,"value"],[3,"selected","background",4,"ngFor","ngForOf"],["type","text","formControlName","goal_sent_1",1,"border-input",3,"placeholder"],["type","text","formControlName","base_sent_1",1,"border-input",3,"placeholder"],["type","text","formControlName","goal_sent_2",1,"border-input",3,"placeholder"],["type","text","formControlName","base_sent_2",1,"border-input",3,"placeholder"],[3,"selected"],[1,"sent-ger"],[1,"sent-eng"],["fill","#000000","viewBox","0 0 1024 1024","xmlns","http://www.w3.org/2000/svg"],["d","M222.927 580.115l301.354 328.512c24.354 28.708 20.825 71.724-7.883 96.078s-71.724 20.825-96.078-7.883L19.576 559.963a67.846 67.846 0 01-13.784-20.022 68.03 68.03 0 01-5.977-29.488l.001-.063a68.343 68.343 0 017.265-29.134 68.28 68.28 0 011.384-2.6 67.59 67.59 0 0110.102-13.687L429.966 21.113c25.592-27.611 68.721-29.247 96.331-3.656s29.247 68.721 3.656 96.331L224.088 443.784h730.46c37.647 0 68.166 30.519 68.166 68.166s-30.519 68.166-68.166 68.166H222.927z"],["class","icon-btn",3,"disabled","click",4,"ngIf"],["class","icon-btn",3,"click",4,"ngIf"],[1,"icon-btn",3,"click","disabled"],["fill-rule","evenodd","clip-rule","evenodd","d","M18.1716 1C18.702 1 19.2107 1.21071 19.5858 1.58579L22.4142 4.41421C22.7893 4.78929 23 5.29799 23 5.82843V20C23 21.6569 21.6569 23 20 23H4C2.34315 23 1 21.6569 1 20V4C1 2.34315 2.34315 1 4 1H18.1716ZM4 3C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21L5 21L5 15C5 13.3431 6.34315 12 8 12L16 12C17.6569 12 19 13.3431 19 15V21H20C20.5523 21 21 20.5523 21 20V6.82843C21 6.29799 20.7893 5.78929 20.4142 5.41421L18.5858 3.58579C18.2107 3.21071 17.702 3 17.1716 3H17V5C17 6.65685 15.6569 8 14 8H10C8.34315 8 7 6.65685 7 5V3H4ZM17 21V15C17 14.4477 16.5523 14 16 14L8 14C7.44772 14 7 14.4477 7 15L7 21L17 21ZM9 3H15V5C15 5.55228 14.5523 6 14 6H10C9.44772 6 9 5.55228 9 5V3Z","fill","#0F0F0F"],["viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg","fill","none"],["fill","#000000","fill-rule","evenodd","d","M7 1a2 2 0 00-2 2v2H2a1 1 0 000 2h.884c.036.338.078.754.12 1.213.11 1.202.218 2.664.218 3.787 0 1.47-.183 3.508-.315 4.776a2.015 2.015 0 002 2.224h10.186a2.015 2.015 0 002-2.224c-.132-1.268-.315-3.306-.315-4.776 0-1.123.107-2.585.218-3.787.042-.459.084-.875.12-1.213H18a1 1 0 100-2h-3V3a2 2 0 00-2-2H7zm6 4V3H7v2h6zM4.996 8.03c-.035-.378-.07-.728-.101-1.03h10.21a81.66 81.66 0 00-.1 1.03c-.112 1.212-.227 2.75-.227 3.97 0 1.584.194 3.714.325 4.982v.007a.02.02 0 01-.005.008l-.003.003H4.905a.024.024 0 01-.008-.01v-.008c.131-1.268.325-3.398.325-4.982 0-1.22-.115-2.758-.226-3.97zM8 8a1 1 0 011 1v6a1 1 0 11-2 0V9a1 1 0 011-1zm5 1a1 1 0 10-2 0v6a1 1 0 102 0V9z"]],template:function(s,r){s&1&&(I(0,yd,7,0,"app-modal",0),d(1,"div",1),y("click",function(){return r.handleTouch()})("@flip.start",function(){return r.flipping=!0})("@flip.done",function(){return r.flipped=!r.flipped,r.flipping=!1})("@swipeRight.done",function(a){return r.emitSwiped(a)})("@swipeLeft.done",function(a){return r.emitSwiped(a)}),I(2,wd,2,3,"div",2)(3,kd,19,3,"div",2)(4,Nd,4,6,"span",2),p()),s&2&&(C("ngIf",r.showDelete),g(),le(te(11,vd,r.color)),Re(r.flipped?"card":"card back"),C("@flip",r.flipState)("@swipeRight",r.swipeRightState)("@swipeLeft",r.swipeLeftState),g(),C("ngIf",!r.flipping&&r.showCard),g(),C("ngIf",!r.flipping&&r.showCard),g(),C("ngIf",r.showEdit||r.showInfo))},dependencies:[J,X,pe,mn,We,ft,Sn,xn,Ve,wn,Ge,ut,pt,_t,Ke,ii,mt],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}[_nghost-%COMP%]{width:100%}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;height:100%;border-radius:10px;box-shadow:0 1px 2px gray;word-wrap:break-word;overflow-y:scroll}.card[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100%;font-size:32px;padding:1rem}.back[_ngcontent-%COMP%]{transform:rotateY(180deg)}.star[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem}.filled[_ngcontent-%COMP%]{background:#ff0}.btn-row[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-between;margin-bottom:.25rem}.card-menu[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:space-between;margin:1rem 1rem 0}.edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;gap:.5rem}.sent-ger[_ngcontent-%COMP%]{font-size:30px;font-weight:400}.sent-eng[_ngcontent-%COMP%]{font-size:24px;font-weight:300}"],data:{animation:[ha,ua,fa,pa]}});let n=e;return n})();var ri=(()=>{let e=class e{constructor(){this.undos=[],this.redos=[],this.activeUndo=new q,this.activeRedo=new q}pushUndo(i){this.undos.push(i)}pushRedo(i){this.redos.push(i)}applyUndo(){let i=this.undos.pop();i&&(this.redos.push(i),this.activeUndo.next(i))}applyRedo(){let i=this.redos.pop();i&&(this.undos.push(i),this.activeRedo.next(i))}reset(){this.resetUndos(),this.resetRedos()}resetUndos(){this.undos=[]}resetRedos(){this.redos=[]}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ad=n=>({width:n});function Rd(n,e){n&1&&_(0,"app-loading")}function Dd(n,e){if(n&1){let t=R();d(0,"app-card",25),D(1,"typeColor"),y("onSwiped",function(s){w(t);let r=m(4);return S(r.handleSwiped(s))})("onUpdated",function(s){w(t);let r=m(4);return S(r.handleCardUpdated(s))})("onDeleted",function(s){w(t);let r=m(4);return S(r.handleCardDeleted(s))}),p()}if(n&2){let t=m().$implicit,i=m(3);C("card",t)("color",F(1,3,t.type))("baseFront",i.getbaseFront())}}function Fd(n,e){if(n&1&&(Ws(0),I(1,Dd,2,5,"app-card",24),Bs()),n&2){let t=e.index,i=m(3);g(),C("ngIf",t===i.deck.length-1)}}function Ld(n,e){if(n&1&&(d(0,"div",0),I(1,Fd,2,1,"ng-container",21),d(2,"div",22),_(3,"div",23),p()()),n&2){let t=m(2);g(),C("ngForOf",t.deck),g(2),le(te(3,Ad,t.deckProgress))}}function Vd(n,e){if(n&1){let t=R();d(0,"div",28)(1,"p"),P(2,"You're out of cards!"),p(),d(3,"button",29),y("click",function(){w(t);let s=m(3);return S(s.initAndDeal())}),P(4,"Reset card pile?"),p()()}}function Gd(n,e){if(n&1){let t=R();d(0,"button",29),y("click",function(){w(t);let s=m(3);return S(s.dealMissed())}),P(1),p()}if(n&2){let t=m(3);g(),oe("Deal ",t.missed.length," missed cards?")}}function jd(n,e){if(n&1){let t=R();d(0,"button",29),y("click",function(){w(t);let s=m(3);return S(s.dealSameDeck())}),P(1,"Deal same deck?"),p()}}function Wd(n,e){if(n&1){let t=R();d(0,"button",29),y("click",function(){w(t);let s=m(3);return S(s.dealNewDeck())}),P(1),p()}if(n&2){let t=m(3);g(),oe("Deal another ",t.getDeckSize(),"?")}}function Bd(n,e){if(n&1&&(d(0,"div",1),I(1,Vd,5,0,"div",26)(2,Gd,2,1,"button",27)(3,jd,2,0,"button",27)(4,Wd,2,1,"button",27),p()),n&2){let t=m(2);g(),C("ngIf",t.pile.length===0),g(),C("ngIf",t.missed.length>0),g(),C("ngIf",t.currentDeck.length>0),g(),C("ngIf",t.pile.length>0)}}function Hd(n,e){if(n&1){let t=R();I(0,Ld,4,5,"div",0)(1,Bd,5,4,"div",1),d(2,"app-navbar")(3,"button",2),y("click",function(){w(t);let s=m();return S(s.backPressed())}),T(),d(4,"svg",3),_(5,"g",4)(6,"g",5),d(7,"g",6),_(8,"path",7),p()()(),Z(),d(9,"button",8),y("click",function(){w(t);let s=m();return S(s.undoPressed())}),T(),d(10,"svg",9),_(11,"g",4)(12,"g",10),d(13,"g",6)(14,"title"),P(15,"undo"),p(),d(16,"g",11)(17,"g",12),_(18,"rect",13),p(),d(19,"g",14),_(20,"path",15),p()()()()(),Z(),d(21,"button",16),y("click",function(){w(t);let s=m();return S(s.addPressed())}),T(),d(22,"svg",17),_(23,"g",4)(24,"g",10),d(25,"g",6),_(26,"path",18)(27,"path",19),p()()(),Z(),d(28,"button",20),y("click",function(){w(t);let s=m();return S(s.redoPressed())}),T(),d(29,"svg",9),_(30,"g",4)(31,"g",10),d(32,"g",6)(33,"title"),P(34,"undo"),p(),d(35,"g",11)(36,"g",12),_(37,"rect",13),p(),d(38,"g",14),_(39,"path",15),p()()()()()()}if(n&2){let t=m();ie(t.deck.length>0?0:1)}}var Gs=(()=>{let e=class e{constructor(i,s,r,o,a,l,c,h){this.actionsService=i,this.route=s,this.cardService=r,this.menuService=o,this.notificationService=a,this.router=l,this.setsService=c,this.settingsService=h,this.loading=!1,this.subs=[],this.set=null,this.pile=[],this.deck=[],this.currentDeck=[],this.missed=[],this.deckProgress="0%"}ngOnInit(){this.loading=!0,this.settingsService.loading?this.settingsService.loaded.subscribe(()=>this.init()):this.init()}init(){return M(this,null,function*(){this.subs=[this.route.paramMap.subscribe(i=>this.loadCards(i)),this.actionsService.activeUndo.subscribe(i=>this.applyUndo(i)),this.actionsService.activeRedo.subscribe(i=>this.applyRedo(i)),this.settingsService.dealStarredChanged.subscribe(()=>this.initAndDeal()),this.cardService.cardAdded.subscribe(i=>{this.pile.push(i)})]})}loadCards(i){return M(this,null,function*(){this.set=yield this.setsService.loadSetFromParams(i),this.cardService.loadCards().then(()=>{this.initAndDeal(),this.loading=!1}).catch(()=>{this.notificationService.push({message:"Couldn't load cards!",success:!1})})})}initPile(){return M(this,null,function*(){if(this.set){this.pile=yield this.setsService.getCards(this.set.id);return}this.settingsService.getDealStarred()?this.pile=structuredClone(this.cardService.getStarred()):this.pile=structuredClone(this.cardService.getCards())})}initAndDeal(){this.initPile().then(()=>this.dealNewDeck())}applyUndo(i){i.direction||this.missed.splice(this.missed.findIndex(s=>s.id===i.card.id),1),this.deck.push(i.card),this.setDeckProgress()}applyRedo(i){this.handleSwiped(i.direction)}refreshWorkingCards(){let i=this.cardService.getCards();for(let s of[this.currentDeck,this.deck,this.missed])for(let r=0;r<s.length;r++){let o=this.cardService.findCardIndex(s[r].id);if(o===null)return;s[r]=i[o]}}removeFromWorkingCards(i){for(let s of[this.currentDeck,this.deck,this.missed])for(let r=0;r<s.length;r++)if(s[r].id===i){s.splice(r,1);break}}updateCard(i){let s=this.cardService.findCardIndex(i.id);s!==null&&this.cardService.update(i,s).then(()=>{this.notificationService.push({message:"Card updated!",success:!0}),this.refreshWorkingCards()}).catch(r=>{this.notificationService.push({message:"Card update failed! "+r,success:!1})})}deleteCard(i){let s=this.cardService.findCardIndex(i);s!==null&&this.cardService.delete(i,s).then(()=>{this.notificationService.push({message:"Card deleted!",success:!0}),this.actionsService.reset(),this.removeFromWorkingCards(i)}).catch(r=>{this.notificationService.push({message:"Failed to delete card! "+r,success:!1})})}getbaseFront(){return this.settingsService.getBaseFront()}getDeckSize(){return this.settingsService.getDeckSize()}shuffle(i){for(let s=i.length-1;s>0;s--){let r=Math.floor(Math.random()*(s+1));[i[s],i[r]]=[i[r],i[s]]}}deal(i){let s=[];for(let r=0;r<this.getDeckSize();r++){if(i.length===0)return s;let o=Math.floor(Math.random()*i.length);s.push(i[o]),i.splice(o,1)}return s}initDeck(){this.missed=[],this.actionsService.reset(),this.setDeckProgress()}dealMissed(){this.deck=this.missed,this.shuffle(this.deck),this.initDeck()}dealSameDeck(){this.deck=structuredClone(this.currentDeck),this.shuffle(this.deck),this.initDeck()}dealNewDeck(){this.deck=this.deal(this.pile),this.currentDeck=structuredClone(this.deck),this.initDeck()}handleSwiped(i){let s=this.deck.pop();s&&(this.actionsService.pushUndo({direction:i,card:s}),this.actionsService.resetRedos(),i||this.missed.push(s),this.setDeckProgress())}setDeckProgress(){let i=this.currentDeck.length;this.deckProgress=100*((1+Math.abs(this.deck.length-i))/i)+"%"}handleCardUpdated(i){this.updateCard(i)}handleCardDeleted(i){this.deleteCard(i.id)}backPressed(){this.router.navigateByUrl("")}undoPressed(){this.actionsService.applyUndo()}addPressed(){this.menuService.openAddCard()}redoPressed(){this.actionsService.applyRedo()}ngOnDestroy(){this.subs.forEach(i=>i.unsubscribe())}};e.\u0275fac=function(s){return new(s||e)(k(ri),k(gn),k(Oe),k(Ne),k(ce),k(Le),k(we),k(Rt))},e.\u0275cmp=V({type:e,selectors:[["app-deck"]],standalone:!0,features:[G],decls:2,vars:1,consts:[[1,"deck"],[1,"options"],["title","Home",1,"icon-btn",3,"click"],["fill","#000000","viewBox","0 0 24 24","id","Layer_1","data-name","Layer 1","xmlns","http://www.w3.org/2000/svg","transform","matrix(1, 0, 0, 1, 0, 0)"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round","stroke","#CCCCCC","stroke-width","0.24000000000000005"],["id","SVGRepo_iconCarrier"],["d","M20.466,1.967,14.78.221a5.011,5.011,0,0,0-6.224,3.24L8.368,4H5A5.006,5.006,0,0,0,0,9V19a5.006,5.006,0,0,0,5,5h6a4.975,4.975,0,0,0,3.92-1.934,5.029,5.029,0,0,0,.689.052,4.976,4.976,0,0,0,4.775-3.563L23.8,8.156A5.021,5.021,0,0,0,20.466,1.967ZM11,22H5a3,3,0,0,1-3-3V9A3,3,0,0,1,5,6h6a3,3,0,0,1,3,3V19A3,3,0,0,1,11,22ZM21.887,7.563l-3.412,10.4a2.992,2.992,0,0,1-2.6,2.134A4.992,4.992,0,0,0,16,19V9a5.006,5.006,0,0,0-5-5h-.507a3,3,0,0,1,3.7-1.867l5.686,1.746A3.006,3.006,0,0,1,21.887,7.563ZM12,13c0,1.45-1.544,3.391-2.714,4.378a1.991,1.991,0,0,1-2.572,0C5.544,16.391,4,14.45,4,13a2,2,0,0,1,4,0,2,2,0,0,1,4,0Z"],["title","Undo",1,"icon-btn",3,"click"],["viewBox","0 0 48 48","xmlns","http://www.w3.org/2000/svg","fill","#000000"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","Layer_2","data-name","Layer 2"],["id","invisible_box","data-name","invisible box"],["width","48","height","48","fill","none"],["id","icons_Q2","data-name","icons Q2"],["d","M46,24A22,22,0,0,1,4.3,33.7a2,2,0,0,1,.5-2.6,2,2,0,0,1,3,.7A17.8,17.8,0,0,0,24,42,18,18,0,1,0,10.6,12h5.3A2.1,2.1,0,0,1,18,13.7,2,2,0,0,1,16,16H6a2,2,0,0,1-2-2V4.1A2.1,2.1,0,0,1,5.7,2,2,2,0,0,1,8,4V8.9A22,22,0,0,1,46,24Z"],["title","Add",1,"icon-btn",3,"click"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8V11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H13V16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16V13H8C7.44771 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11H11V8Z","fill","#0F0F0F"],["fill-rule","evenodd","clip-rule","evenodd","d","M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM3.00683 12C3.00683 16.9668 7.03321 20.9932 12 20.9932C16.9668 20.9932 20.9932 16.9668 20.9932 12C20.9932 7.03321 16.9668 3.00683 12 3.00683C7.03321 3.00683 3.00683 7.03321 3.00683 12Z","fill","#0F0F0F"],["title","Redo",1,"icon-btn",2,"transform","rotateY(180deg)",3,"click"],[4,"ngFor","ngForOf"],[1,"progress"],[1,"progress-inner"],[3,"card","color","baseFront","onSwiped","onUpdated","onDeleted",4,"ngIf"],[3,"onSwiped","onUpdated","onDeleted","card","color","baseFront"],["style","text-align: center;",4,"ngIf"],["class","btn",3,"click",4,"ngIf"],[2,"text-align","center"],[1,"btn",3,"click"]],template:function(s,r){s&1&&I(0,Rd,1,0,"app-loading")(1,Hd,40,1,"app-navbar"),s&2&&ie(r.loading?0:1)},dependencies:[J,X,pe,Dt,$e,si,Ke],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}[_nghost-%COMP%]{display:flex;flex-direction:column;margin:auto;width:100%;height:100%}.deck[_ngcontent-%COMP%]{height:100%;padding:1rem}.progress[_ngcontent-%COMP%]{width:100%;height:.25rem;background:#789;margin-top:.25rem;border-radius:2px}.progress-inner[_ngcontent-%COMP%]{height:100%;border-radius:2px;background:#7fffd4}.options[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:auto;gap:2rem}"]});let n=e;return n})();var zd=n=>({background:n});function Ud(n,e){n&1&&_(0,"app-loading")}function qd(n,e){if(n&1){let t=R();d(0,"div",0)(1,"app-card",6),D(2,"typeColor"),y("onSwiped",function(){w(t);let s=m(2);return S(s.handleBack())})("onUpdated",function(s){w(t);let r=m(2);return S(r.handleUpdateCard(s))})("onDeleted",function(s){w(t);let r=m(2);return S(r.handleCardDeleted(s))}),p()()}if(n&2){let t=m(2);g(),C("card",t.expandedCard)("color",F(2,3,t.expandedCard.type))("baseFront",t.getBaseFront())}}function Yd(n,e){n&1&&(T(),d(0,"svg",12),_(1,"g",14)(2,"g",15),d(3,"g",16),_(4,"path",17),p()())}function Kd(n,e){n&1&&(T(),d(0,"svg",13),_(1,"g",14)(2,"g",15),d(3,"g",16),_(4,"path",18),p()())}function $d(n,e){if(n&1){let t=R();d(0,"div",8),D(1,"typeColor"),y("click",function(){let s=w(t).$implicit,r=m(3);return S(r.expandCard(s))}),d(2,"div",9)(3,"div",10),P(4),p(),d(5,"button",11),y("click",function(s){let r=w(t).$implicit,o=m(3);return S(o.openSetSelect(s,r))}),I(6,Yd,5,0,":svg:svg",12)(7,Kd,5,0,":svg:svg",13),p()()()}if(n&2){let t=e.$implicit,i=m(3);le(te(6,zd,F(1,4,t.type))),g(4),oe(" ",i.getBaseFront()?t.base:t.goal," "),g(2),ie(t.starred?6:7)}}function Qd(n,e){if(n&1&&(d(0,"div",1),I(1,$d,8,8,"div",7),p()),n&2){let t=m(2);g(),C("ngForOf",t.results.slice(0,t.maxCards))}}function Zd(n,e){if(n&1){let t=R();d(0,"button",19),y("click",function(){w(t);let s=m(2);return S(s.backPressed())}),T(),d(1,"svg",20),_(2,"g",14)(3,"g",15),d(4,"g",16),_(5,"path",21),p()()()}}function Xd(n,e){if(n&1){let t=R();d(0,"button",22),y("click",function(){w(t);let s=m(2);return S(s.backPressed())}),T(),d(1,"svg",23),_(2,"g",14)(3,"g",24),d(4,"g",16),_(5,"path",25),p()()()}}function Jd(n,e){if(n&1&&(I(0,qd,3,5,"div",0)(1,Qd,2,1,"div",1),d(2,"app-navbar"),I(3,Zd,6,0,"button",2)(4,Xd,6,0,"button",3),d(5,"div",4),_(6,"input",5),p()()),n&2){let t=m();ie(t.expandedCard&&t.expanded?0:1),g(3),ie(t.expanded&&t.expandedCard?3:4),g(3),C("formControl",t.query)}}var js=(()=>{let e=class e{constructor(i,s,r,o,a,l,c){this.route=i,this.cardService=s,this.notificationService=r,this.router=o,this.setsService=a,this.settingsService=l,this.setSelectService=c,this.loading=!1,this.subs=[],this.maxCards=100,this.set=null,this.results=[],this.expanded=!1,this.expandedCard=null,this.query=new z("")}ngOnInit(){this.loading=!0,this.settingsService.loading?this.settingsService.loaded.subscribe(()=>this.init()):this.init()}init(){return M(this,null,function*(){yield this.cardService.loadCards().then(i=>{this.results=i,this.loading=!1}).catch(i=>alert("Failed to get cards from database! "+i)),this.subs=[this.route.paramMap.subscribe(i=>this.loadSet(i)),this.setsService.updated.subscribe(()=>{this.refreshSet()}),this.query.valueChanges.subscribe(i=>{this.set?this.filterSet(i):this.filterAll(i)})]})}loadSet(i){return M(this,null,function*(){this.set=yield this.setsService.loadSetFromParams(i),this.set&&(this.results=yield this.setsService.getCards(this.set.id)),this.loading=!1})}refreshSet(){return M(this,null,function*(){this.set&&(this.set&&(this.results=yield this.setsService.getCards(this.set.id)),this.filterSet(this.query.value))})}getBaseFront(){return this.settingsService.getBaseFront()}filterSet(i){return M(this,null,function*(){if(this.set===null)return;if(!i){this.results=yield this.setsService.getCards(this.set.id);return}let s=yield this.setsService.getCards(this.set.id);this.results=s.filter(r=>r.base.toLowerCase().includes(i.toLowerCase())||r.goal.toLowerCase().includes(i.toLowerCase()))})}filterAll(i){if(!i){this.results=this.cardService.getCards();return}this.results=this.cardService.getCards().filter(s=>s.base.toLowerCase().includes(i.toLowerCase())||s.goal.toLowerCase().includes(i.toLowerCase()))}openSetSelect(i,s){i.stopPropagation(),this.setSelectService.open(s.id)}expandCard(i){this.expanded=!0,this.expandedCard=i}updateResults(i){this.results.forEach((s,r)=>{if(s.id===i.id){this.results[r]=i;return}})}updateCard(i){let s=this.cardService.findCardIndex(i.id);s!==null&&this.cardService.update(i,s).then(()=>{this.updateResults(i),this.expandCard(i),this.notificationService.push({message:"Card updated!",success:!0})}).catch(r=>{this.notificationService.push({message:"Card update failed! "+r,success:!1})})}deleteCard(i){let s=this.cardService.findCardIndex(i);s!==null&&this.cardService.delete(i,s).then(()=>{this.notificationService.push({message:"Card deleted!",success:!0})}).catch(r=>{this.notificationService.push({message:"Failed to delete card! "+r,success:!1})})}backPressed(){if(!this.expanded&&this.expandedCard===null){this.router.navigateByUrl("");return}this.handleBack()}handleBack(){this.expanded=!1,this.expandedCard=null}handleUpdateCard(i){this.updateCard(i)}handleCardDeleted(i){this.deleteCard(i.id),this.handleBack()}ngOnDestroy(){this.subs.forEach(i=>i.unsubscribe())}};e.\u0275fac=function(s){return new(s||e)(k(gn),k(Oe),k(ce),k(Le),k(we),k(Rt),k(At))},e.\u0275cmp=V({type:e,selectors:[["app-list"]],standalone:!0,features:[G],decls:2,vars:1,consts:[[1,"wrapper"],[1,"list"],["title","Back",1,"icon-btn"],["title","Home",1,"icon-btn"],[1,"search-container"],["type","text","placeholder","search...",1,"search",3,"formControl"],[2,"height","100%",3,"onSwiped","onUpdated","onDeleted","card","color","baseFront"],["class","list-card",3,"style","click",4,"ngFor","ngForOf"],[1,"list-card",3,"click"],[1,"row-between"],[1,"col-center",2,"max-width","75%"],[1,"icon-btn",2,"width","3rem","height","3rem",3,"click"],["fill","#ffff00","viewBox","0 0 1920 1920","xmlns","http://www.w3.org/2000/svg","stroke","#ffff00"],["fill","#000000","viewBox","0 0 1920 1920","xmlns","http://www.w3.org/2000/svg"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M1915.918 737.475c-10.955-33.543-42.014-56.131-77.364-56.131h-612.029l-189.063-582.1v-.112C1026.394 65.588 995.335 43 959.984 43c-35.237 0-66.41 22.588-77.365 56.245L693.443 681.344H81.415c-35.35 0-66.41 22.588-77.365 56.131-10.955 33.544.79 70.137 29.478 91.03l495.247 359.831-189.177 582.212c-10.955 33.657 1.13 70.25 29.817 90.918 14.23 10.278 30.946 15.487 47.66 15.487 16.716 0 33.432-5.21 47.775-15.6l495.134-359.718 495.021 359.718c28.574 20.781 67.087 20.781 95.662.113 28.687-20.668 40.658-57.261 29.703-91.03l-189.176-582.1 495.36-359.83c28.574-20.894 40.433-57.487 29.364-91.03","fill-rule","evenodd"],["d","M1306.181 1110.407c-28.461 20.781-40.32 57.261-29.477 91.03l166.136 511.398-435.05-316.122c-28.686-20.781-67.086-20.781-95.66 0l-435.05 316.122 166.25-511.623c10.842-33.544-1.017-70.024-29.591-90.805L178.577 794.285h537.825c35.351 0 66.523-22.701 77.365-56.245l166.25-511.51 166.136 511.397a81.155 81.155 0 0 0 77.365 56.358h537.939l-435.276 316.122Zm609.77-372.819c-10.956-33.656-42.014-56.244-77.365-56.244h-612.141l-189.064-582.1C1026.426 65.589 995.367 43 960.017 43c-35.351 0-66.523 22.588-77.365 56.245L693.475 681.344H81.335c-35.351 0-66.41 22.588-77.366 56.244-10.842 33.657 1.017 70.137 29.591 90.918l495.247 359.718-189.29 582.211c-10.842 33.657 1.017 70.137 29.704 90.918 14.23 10.39 31.059 15.586 47.661 15.586 16.829 0 33.657-5.195 47.887-15.699l495.248-359.718 495.02 359.718c28.575 20.894 67.088 20.894 95.775.113 28.574-20.781 40.433-57.261 29.59-91.03l-189.289-582.1 495.247-359.717c28.687-20.781 40.546-57.261 29.59-90.918Z","fill-rule","evenodd"],["title","Back",1,"icon-btn",3,"click"],["fill","#000000","viewBox","0 0 1024 1024","xmlns","http://www.w3.org/2000/svg"],["d","M222.927 580.115l301.354 328.512c24.354 28.708 20.825 71.724-7.883 96.078s-71.724 20.825-96.078-7.883L19.576 559.963a67.846 67.846 0 01-13.784-20.022 68.03 68.03 0 01-5.977-29.488l.001-.063a68.343 68.343 0 017.265-29.134 68.28 68.28 0 011.384-2.6 67.59 67.59 0 0110.102-13.687L429.966 21.113c25.592-27.611 68.721-29.247 96.331-3.656s29.247 68.721 3.656 96.331L224.088 443.784h730.46c37.647 0 68.166 30.519 68.166 68.166s-30.519 68.166-68.166 68.166H222.927z"],["title","Home",1,"icon-btn",3,"click"],["fill","#000000","viewBox","0 0 24 24","id","Layer_1","data-name","Layer 1","xmlns","http://www.w3.org/2000/svg","transform","matrix(1, 0, 0, 1, 0, 0)"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round","stroke","#CCCCCC","stroke-width","0.24000000000000005"],["d","M20.466,1.967,14.78.221a5.011,5.011,0,0,0-6.224,3.24L8.368,4H5A5.006,5.006,0,0,0,0,9V19a5.006,5.006,0,0,0,5,5h6a4.975,4.975,0,0,0,3.92-1.934,5.029,5.029,0,0,0,.689.052,4.976,4.976,0,0,0,4.775-3.563L23.8,8.156A5.021,5.021,0,0,0,20.466,1.967ZM11,22H5a3,3,0,0,1-3-3V9A3,3,0,0,1,5,6h6a3,3,0,0,1,3,3V19A3,3,0,0,1,11,22ZM21.887,7.563l-3.412,10.4a2.992,2.992,0,0,1-2.6,2.134A4.992,4.992,0,0,0,16,19V9a5.006,5.006,0,0,0-5-5h-.507a3,3,0,0,1,3.7-1.867l5.686,1.746A3.006,3.006,0,0,1,21.887,7.563ZM12,13c0,1.45-1.544,3.391-2.714,4.378a1.991,1.991,0,0,1-2.572,0C5.544,16.391,4,14.45,4,13a2,2,0,0,1,4,0,2,2,0,0,1,4,0Z"]],template:function(s,r){s&1&&I(0,Ud,1,0,"app-loading")(1,Jd,7,3,"app-navbar"),s&2&&ie(r.loading?0:1)},dependencies:[J,X,We,Ve,Ge,hr,Dt,$e,si,Ke],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}[_nghost-%COMP%]{display:flex;flex-direction:column;margin:auto;width:100%;height:100%}.wrapper[_ngcontent-%COMP%]{height:100%;margin:1rem}.search-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.search[_ngcontent-%COMP%]{border:4px solid black;border-radius:10px;background:none;outline:none;box-shadow:none}"]});let n=e;return n})();var ma=(()=>{let e=class e{constructor(i){this.actionsService=i,this.listOpen=!1,this.listExpanded=!1,this.query=new q}ngOnInit(){}toggleList(){this.listOpen=!this.listOpen}handleBack(){this.listExpanded?this.listExpanded=!1:this.listOpen=!1}handleUndo(){this.actionsService.applyUndo()}handleRedo(){this.actionsService.applyRedo()}handleSearch(i){this.query.next(i)}};e.\u0275fac=function(s){return new(s||e)(k(ri))},e.\u0275cmp=V({type:e,selectors:[["app-layout"]],standalone:!0,features:[G],decls:5,vars:0,consts:[[1,"content"]],template:function(s,r){s&1&&(d(0,"div",0),_(1,"app-notifications")(2,"app-set-select")(3,"app-menu")(4,"router-outlet"),p())},dependencies:[Us,ur,oa,da],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}.content[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;display:flex;flex-direction:column;justify-content:space-between}"]});let n=e;return n})();var eh=n=>({background:n});function th(n,e){if(n&1&&(d(0,"a",14),P(1),p()),n&2){let t=e.$implicit;le(te(4,eh,t.color)),C("routerLink",t.link),g(),fe(t.link)}}var ga=(()=>{let e=class e{constructor(i,s){this.authService=i,this.menuService=s,this.menuOptions=[{link:"list",color:"lightgreen"},{link:"deck",color:"plum"},{link:"sets",color:"palegoldenrod"}]}logout(){this.authService.signOut(),window.location.reload()}addPressed(){this.menuService.openAddCard()}};e.\u0275fac=function(s){return new(s||e)(k(_e),k(Ne))},e.\u0275cmp=V({type:e,selectors:[["app-landing"]],standalone:!0,features:[G],decls:18,vars:1,consts:[[1,"wrapper"],["class","menu-card",3,"routerLink","style",4,"ngFor","ngForOf"],["title","Logout",1,"icon-btn",3,"click"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg","transform","rotate(180)"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M21 12L13 12","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M18 15L20.913 12.087V12.087C20.961 12.039 20.961 11.961 20.913 11.913V11.913L18 9","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M16 5V4.5V4.5C16 3.67157 15.3284 3 14.5 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H14.5C15.3284 21 16 20.3284 16 19.5V19.5V19","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["title","Add",1,"icon-btn",3,"click"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8V11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H13V16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16V13H8C7.44771 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11H11V8Z","fill","#0F0F0F"],["fill-rule","evenodd","clip-rule","evenodd","d","M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM3.00683 12C3.00683 16.9668 7.03321 20.9932 12 20.9932C16.9668 20.9932 20.9932 16.9668 20.9932 12C20.9932 7.03321 16.9668 3.00683 12 3.00683C7.03321 3.00683 3.00683 7.03321 3.00683 12Z","fill","#0F0F0F"],[1,"menu-card",3,"routerLink"]],template:function(s,r){s&1&&(d(0,"div",0),I(1,th,2,6,"a",1),p(),d(2,"app-navbar")(3,"button",2),y("click",function(){return r.logout()}),T(),d(4,"svg",3),_(5,"g",4)(6,"g",5),d(7,"g",6),_(8,"path",7)(9,"path",8)(10,"path",9),p()()(),Z(),d(11,"button",10),y("click",function(){return r.addPressed()}),T(),d(12,"svg",11),_(13,"g",4)(14,"g",5),d(15,"g",6),_(16,"path",12)(17,"path",13),p()()()()),s&2&&(g(),C("ngForOf",r.menuOptions))},dependencies:[J,X,bn,$e],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;margin:auto;width:100%;height:100%}.wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;margin:1rem;gap:.5rem}.menu-card[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;display:flex;flex-direction:column;justify-content:center;border-radius:10px;box-shadow:0 1px 2px gray;text-decoration:none;color:#000;font-size:28px}"]});let n=e;return n})();function nh(n,e){if(n&1){let t=R();d(0,"app-color-choice",7),y("click",function(){let s=w(t).$implicit,r=m(2);return S(r.setForm.patchValue({color:s}))}),p()}if(n&2){let t,i=e.$implicit,s=m(2);C("value",i)("selected",((t=s.setForm.get("color"))==null?null:t.value)===i)}}function ih(n,e){if(n&1){let t=R();d(0,"button",8),y("click",function(){w(t);let s=m(3);return S(s.update())}),T(),d(1,"svg",9),_(2,"g",10)(3,"g",11),d(4,"g",12),_(5,"path",18),p()()()}}function sh(n,e){if(n&1){let t=R();d(0,"button",8),y("click",function(){w(t);let s=m(2);return S(s.close())}),T(),d(1,"svg",9),_(2,"g",10)(3,"g",11),d(4,"g",12)(5,"g",13),_(6,"path",14),p()()()(),I(7,ih,6,0,"button",15),Z(),d(8,"button",8),y("click",function(){w(t);let s=m(2);return S(s.confirmOpen=!0)}),T(),d(9,"svg",16),_(10,"g",10)(11,"g",11),d(12,"g",12),_(13,"path",17),p()()()}if(n&2){let t=m(2);g(7),C("ngIf",t.setForm.valid)}}function rh(n,e){if(n&1){let t=R();d(0,"button",8),y("click",function(){w(t);let s=m(2);return S(s.delete())}),T(),d(1,"svg",16),_(2,"g",10)(3,"g",11),d(4,"g",12),_(5,"path",17),p()()(),Z(),d(6,"button",8),y("click",function(){w(t);let s=m(2);return S(s.confirmOpen=!1)}),T(),d(7,"svg",9),_(8,"g",10)(9,"g",11),d(10,"g",12)(11,"g",13),_(12,"path",19),p()()()()}}function oh(n,e){if(n&1&&(d(0,"app-modal",1)(1,"h3"),P(2),p(),d(3,"form",2),_(4,"input",3),d(5,"div",4),I(6,nh,1,2,"app-color-choice",5),p()(),d(7,"div",6),I(8,sh,14,1)(9,rh,13,0),p()()),n&2){let t=m();g(2),oe("Edit ",t.set.name,""),g(),C("formGroup",t.setForm),g(3),C("ngForOf",t.getColorOptions()),g(2),ie(t.confirmOpen?9:8)}}var ba=(()=>{let e=class e{constructor(i){this.setsService=i,this.confirmOpen=!1,this.setForm=new je({name:new z(null,se.required),color:new z(null,se.required)})}ngOnInit(){this.setForm.patchValue({name:this.set?.name,color:this.set?.color})}getColorOptions(){return this.setsService.colorOptions}update(){if(!this.set)return;let i=this.setForm.value;this.setsService.updateSet(ct(Ae({},this.set),{name:i.name?i.name:"",color:i.color?i.color:"lightgray"})).then(()=>this.close())}delete(){this.set&&this.setsService.deleteSet(this.set.id).then(()=>this.close())}close(){this.set=null}};e.\u0275fac=function(s){return new(s||e)(k(we))},e.\u0275cmp=V({type:e,selectors:[["app-set-edit"]],inputs:{set:"set"},standalone:!0,features:[G],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"add-form",3,"formGroup"],["type","text","formControlName","name","placeholder","Name",1,"border-input"],[1,"color-container"],[3,"value","selected","click",4,"ngFor","ngForOf"],[1,"row-between",2,"margin-top","1rem"],[3,"click","value","selected"],[1,"icon-btn",3,"click"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["id","Menu / Close_LG"],["id","Vector","d","M21 21L12 12M12 12L3 3M12 12L21.0001 3M12 12L3 21.0001","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","icon-btn",3,"click",4,"ngIf"],["viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg","fill","none"],["fill","#000000","fill-rule","evenodd","d","M7 1a2 2 0 00-2 2v2H2a1 1 0 000 2h.884c.036.338.078.754.12 1.213.11 1.202.218 2.664.218 3.787 0 1.47-.183 3.508-.315 4.776a2.015 2.015 0 002 2.224h10.186a2.015 2.015 0 002-2.224c-.132-1.268-.315-3.306-.315-4.776 0-1.123.107-2.585.218-3.787.042-.459.084-.875.12-1.213H18a1 1 0 100-2h-3V3a2 2 0 00-2-2H7zm6 4V3H7v2h6zM4.996 8.03c-.035-.378-.07-.728-.101-1.03h10.21a81.66 81.66 0 00-.1 1.03c-.112 1.212-.227 2.75-.227 3.97 0 1.584.194 3.714.325 4.982v.007a.02.02 0 01-.005.008l-.003.003H4.905a.024.024 0 01-.008-.01v-.008c.131-1.268.325-3.398.325-4.982 0-1.22-.115-2.758-.226-3.97zM8 8a1 1 0 011 1v6a1 1 0 11-2 0V9a1 1 0 011-1zm5 1a1 1 0 10-2 0v6a1 1 0 102 0V9z"],["fill-rule","evenodd","clip-rule","evenodd","d","M18.1716 1C18.702 1 19.2107 1.21071 19.5858 1.58579L22.4142 4.41421C22.7893 4.78929 23 5.29799 23 5.82843V20C23 21.6569 21.6569 23 20 23H4C2.34315 23 1 21.6569 1 20V4C1 2.34315 2.34315 1 4 1H18.1716ZM4 3C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21L5 21L5 15C5 13.3431 6.34315 12 8 12L16 12C17.6569 12 19 13.3431 19 15V21H20C20.5523 21 21 20.5523 21 20V6.82843C21 6.29799 20.7893 5.78929 20.4142 5.41421L18.5858 3.58579C18.2107 3.21071 17.702 3 17.1716 3H17V5C17 6.65685 15.6569 8 14 8H10C8.34315 8 7 6.65685 7 5V3H4ZM17 21V15C17 14.4477 16.5523 14 16 14L8 14C7.44772 14 7 14.4477 7 15L7 21L17 21ZM9 3H15V5C15 5.55228 14.5523 6 14 6H10C9.44772 6 9 5.55228 9 5V3Z","fill","#0F0F0F"],["id","Vector","d","M21 21L12 12M12 12L3 3M12 12L21.0001 3M12 12L3 21.0001","stroke","#ff0000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(s,r){s&1&&I(0,oh,10,4,"app-modal",0),s&2&&C("ngIf",r.set)},dependencies:[J,X,pe,We,ft,Ve,Ge,ut,pt,_t,mt,ni],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}"]});let n=e;return n})();var ah=n=>({backgroundColor:n}),lh=n=>["/deck","set",n];function ch(n,e){n&1&&_(0,"app-loading")}function dh(n,e){if(n&1&&_(0,"app-set-edit",14),n&2){let t=m(2);C("set",t.editing)}}function hh(n,e){if(n&1){let t=R();d(0,"div",15)(1,"div",16),y("click",function(){let s=w(t).$implicit,r=m(2);return S(r.navigate(s))}),d(2,"div",17)(3,"div",18)(4,"button",19),y("click",function(s){let r=w(t).$implicit,o=m(2);return S(o.edit(s,r))}),T(),d(5,"svg",10),_(6,"g",5)(7,"g",11),d(8,"g",7)(9,"g",20)(10,"g",21),_(11,"path",22)(12,"path",23),p()()()()()(),Z(),d(13,"div")(14,"div",24),P(15),p(),d(16,"span",25),P(17),p()(),d(18,"div",18)(19,"a",26),T(),d(20,"svg",10),_(21,"g",5)(22,"g",11),d(23,"g",7),_(24,"path",27),p()()()()()()()}if(n&2){let t=e.$implicit;g(),le(te(6,ah,t.color)),g(14),oe(" ",t.name," "),g(2),Hs("",t.cards.length," card",t.cards.length===1?"":"s",""),g(2),C("routerLink",te(8,lh,t.id))}}function uh(n,e){if(n&1){let t=R();I(0,dh,1,1,"app-set-edit",0),d(1,"div",1),I(2,hh,25,10,"div",2),p(),d(3,"app-navbar")(4,"button",3),y("click",function(){w(t);let s=m();return S(s.backPressed())}),T(),d(5,"svg",4),_(6,"g",5)(7,"g",6),d(8,"g",7),_(9,"path",8),p()()(),Z(),d(10,"button",9),y("click",function(){w(t);let s=m();return S(s.addPressed())}),T(),d(11,"svg",10),_(12,"g",5)(13,"g",11),d(14,"g",7),_(15,"path",12)(16,"path",13),p()()()()}if(n&2){let t=m();C("ngIf",t.editing),g(2),C("ngForOf",t.sets)}}var Ca=(()=>{let e=class e{constructor(i,s,r){this.menuService=i,this.router=s,this.setsService=r,this.loading=!1,this.sets=[],this.editing=null}ngOnInit(){this.loading=!0,this.setsService.loadSets().then(i=>{this.sets=i,this.loading=!1})}navigate(i){this.router.navigateByUrl("/list/set/"+i.id)}edit(i,s){i.stopPropagation(),this.editing=s}backPressed(){this.router.navigateByUrl("")}addPressed(){this.menuService.openAddSet()}};e.\u0275fac=function(s){return new(s||e)(k(Ne),k(Le),k(we))},e.\u0275cmp=V({type:e,selectors:[["app-sets"]],standalone:!0,features:[G],decls:2,vars:1,consts:[[3,"set",4,"ngIf"],[1,"list"],["class","set-row",4,"ngFor","ngForOf"],["title","Home",1,"icon-btn",3,"click"],["fill","#000000","viewBox","0 0 24 24","id","Layer_1","data-name","Layer 1","xmlns","http://www.w3.org/2000/svg","transform","matrix(1, 0, 0, 1, 0, 0)"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round","stroke","#CCCCCC","stroke-width","0.24000000000000005"],["id","SVGRepo_iconCarrier"],["d","M20.466,1.967,14.78.221a5.011,5.011,0,0,0-6.224,3.24L8.368,4H5A5.006,5.006,0,0,0,0,9V19a5.006,5.006,0,0,0,5,5h6a4.975,4.975,0,0,0,3.92-1.934,5.029,5.029,0,0,0,.689.052,4.976,4.976,0,0,0,4.775-3.563L23.8,8.156A5.021,5.021,0,0,0,20.466,1.967ZM11,22H5a3,3,0,0,1-3-3V9A3,3,0,0,1,5,6h6a3,3,0,0,1,3,3V19A3,3,0,0,1,11,22ZM21.887,7.563l-3.412,10.4a2.992,2.992,0,0,1-2.6,2.134A4.992,4.992,0,0,0,16,19V9a5.006,5.006,0,0,0-5-5h-.507a3,3,0,0,1,3.7-1.867l5.686,1.746A3.006,3.006,0,0,1,21.887,7.563ZM12,13c0,1.45-1.544,3.391-2.714,4.378a1.991,1.991,0,0,1-2.572,0C5.544,16.391,4,14.45,4,13a2,2,0,0,1,4,0,2,2,0,0,1,4,0Z"],["title","Add",1,"icon-btn",3,"click"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["d","M11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8V11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H13V16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16V13H8C7.44771 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11H11V8Z","fill","#0F0F0F"],["fill-rule","evenodd","clip-rule","evenodd","d","M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM3.00683 12C3.00683 16.9668 7.03321 20.9932 12 20.9932C16.9668 20.9932 20.9932 16.9668 20.9932 12C20.9932 7.03321 16.9668 3.00683 12 3.00683C7.03321 3.00683 3.00683 7.03321 3.00683 12Z","fill","#0F0F0F"],[3,"set"],[1,"set-row"],[1,"list-card",2,"width","100%",3,"click"],[1,"row-between"],[1,"col-center"],[1,"icon-btn",3,"click"],["id","Interface / Settings"],["id","Vector"],["d","M20.3499 8.92293L19.9837 8.7192C19.9269 8.68756 19.8989 8.67169 19.8714 8.65524C19.5983 8.49165 19.3682 8.26564 19.2002 7.99523C19.1833 7.96802 19.1674 7.93949 19.1348 7.8831C19.1023 7.82677 19.0858 7.79823 19.0706 7.76998C18.92 7.48866 18.8385 7.17515 18.8336 6.85606C18.8331 6.82398 18.8332 6.79121 18.8343 6.72604L18.8415 6.30078C18.8529 5.62025 18.8587 5.27894 18.763 4.97262C18.6781 4.70053 18.536 4.44993 18.3462 4.23725C18.1317 3.99685 17.8347 3.82534 17.2402 3.48276L16.7464 3.1982C16.1536 2.85658 15.8571 2.68571 15.5423 2.62057C15.2639 2.56294 14.9765 2.56561 14.6991 2.62789C14.3859 2.69819 14.0931 2.87351 13.5079 3.22396L13.5045 3.22555L13.1507 3.43741C13.0948 3.47091 13.0665 3.48779 13.0384 3.50338C12.7601 3.6581 12.4495 3.74365 12.1312 3.75387C12.0992 3.7549 12.0665 3.7549 12.0013 3.7549C11.9365 3.7549 11.9024 3.7549 11.8704 3.75387C11.5515 3.74361 11.2402 3.65759 10.9615 3.50224C10.9334 3.48658 10.9056 3.46956 10.8496 3.4359L10.4935 3.22213C9.90422 2.86836 9.60915 2.69121 9.29427 2.62057C9.0157 2.55807 8.72737 2.55634 8.44791 2.61471C8.13236 2.68062 7.83577 2.85276 7.24258 3.19703L7.23994 3.1982L6.75228 3.48124L6.74688 3.48454C6.15904 3.82572 5.86441 3.99672 5.6517 4.23614C5.46294 4.4486 5.32185 4.69881 5.2374 4.97018C5.14194 5.27691 5.14703 5.61896 5.15853 6.3027L5.16568 6.72736C5.16676 6.79166 5.16864 6.82362 5.16817 6.85525C5.16343 7.17499 5.08086 7.48914 4.92974 7.77096C4.9148 7.79883 4.8987 7.8267 4.86654 7.88237C4.83436 7.93809 4.81877 7.96579 4.80209 7.99268C4.63336 8.26452 4.40214 8.49186 4.12733 8.65572C4.10015 8.67193 4.0715 8.68752 4.01521 8.71871L3.65365 8.91908C3.05208 9.25245 2.75137 9.41928 2.53256 9.65669C2.33898 9.86672 2.19275 10.1158 2.10349 10.3872C2.00259 10.6939 2.00267 11.0378 2.00424 11.7255L2.00551 12.2877C2.00706 12.9708 2.00919 13.3122 2.11032 13.6168C2.19979 13.8863 2.34495 14.134 2.53744 14.3427C2.75502 14.5787 3.05274 14.7445 3.64974 15.0766L4.00808 15.276C4.06907 15.3099 4.09976 15.3266 4.12917 15.3444C4.40148 15.5083 4.63089 15.735 4.79818 16.0053C4.81625 16.0345 4.8336 16.0648 4.8683 16.1255C4.90256 16.1853 4.92009 16.2152 4.93594 16.2452C5.08261 16.5229 5.16114 16.8315 5.16649 17.1455C5.16707 17.1794 5.16658 17.2137 5.16541 17.2827L5.15853 17.6902C5.14695 18.3763 5.1419 18.7197 5.23792 19.0273C5.32287 19.2994 5.46484 19.55 5.65463 19.7627C5.86915 20.0031 6.16655 20.1745 6.76107 20.5171L7.25478 20.8015C7.84763 21.1432 8.14395 21.3138 8.45869 21.379C8.73714 21.4366 9.02464 21.4344 9.30209 21.3721C9.61567 21.3017 9.90948 21.1258 10.4964 20.7743L10.8502 20.5625C10.9062 20.5289 10.9346 20.5121 10.9626 20.4965C11.2409 20.3418 11.5512 20.2558 11.8695 20.2456C11.9015 20.2446 11.9342 20.2446 11.9994 20.2446C12.0648 20.2446 12.0974 20.2446 12.1295 20.2456C12.4484 20.2559 12.7607 20.3422 13.0394 20.4975C13.0639 20.5112 13.0885 20.526 13.1316 20.5519L13.5078 20.7777C14.0971 21.1315 14.3916 21.3081 14.7065 21.3788C14.985 21.4413 15.2736 21.4438 15.5531 21.3855C15.8685 21.3196 16.1657 21.1471 16.7586 20.803L17.2536 20.5157C17.8418 20.1743 18.1367 20.0031 18.3495 19.7636C18.5383 19.5512 18.6796 19.3011 18.764 19.0297C18.8588 18.7252 18.8531 18.3858 18.8417 17.7119L18.8343 17.2724C18.8332 17.2081 18.8331 17.1761 18.8336 17.1445C18.8383 16.8247 18.9195 16.5104 19.0706 16.2286C19.0856 16.2007 19.1018 16.1726 19.1338 16.1171C19.166 16.0615 19.1827 16.0337 19.1994 16.0068C19.3681 15.7349 19.5995 15.5074 19.8744 15.3435C19.9012 15.3275 19.9289 15.3122 19.9838 15.2818L19.9857 15.2809L20.3472 15.0805C20.9488 14.7472 21.2501 14.5801 21.4689 14.3427C21.6625 14.1327 21.8085 13.8839 21.8978 13.6126C21.9981 13.3077 21.9973 12.9658 21.9958 12.2861L21.9945 11.7119C21.9929 11.0287 21.9921 10.6874 21.891 10.3828C21.8015 10.1133 21.6555 9.86561 21.463 9.65685C21.2457 9.42111 20.9475 9.25526 20.3517 8.92378L20.3499 8.92293Z","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M8.00033 12C8.00033 14.2091 9.79119 16 12.0003 16C14.2095 16 16.0003 14.2091 16.0003 12C16.0003 9.79082 14.2095 7.99996 12.0003 7.99996C9.79119 7.99996 8.00033 9.79082 8.00033 12Z","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"set-title"],[2,"font-size","26px"],[1,"icon-btn",2,"width","3rem","height","3rem",3,"routerLink"],["fill-rule","evenodd","clip-rule","evenodd","d","M5.46484 3.92349C4.79896 3.5739 4 4.05683 4 4.80888V19.1911C4 19.9432 4.79896 20.4261 5.46483 20.0765L19.1622 12.8854C19.8758 12.5108 19.8758 11.4892 19.1622 11.1146L5.46484 3.92349ZM2 4.80888C2 2.55271 4.3969 1.10395 6.39451 2.15269L20.0919 9.34382C22.2326 10.4677 22.2325 13.5324 20.0919 14.6562L6.3945 21.8473C4.39689 22.8961 2 21.4473 2 19.1911V4.80888Z","fill","#000000"]],template:function(s,r){s&1&&I(0,ch,1,0,"app-loading")(1,uh,17,2),s&2&&ie(r.loading?0:1)},dependencies:[J,X,pe,bn,Dt,$e,ba],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.5rem;margin:0 .5rem;padding:.25rem;border:none;outline:none;border-radius:5px;background-color:#f0f8ff;font-size:large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}textarea[_ngcontent-%COMP%]{height:3.5rem}button[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.label[_ngcontent-%COMP%]{font-size:20px}.btn[_ngcontent-%COMP%]{width:fit-content;margin:auto;padding:.5rem 1rem;border:none;outline:none;height:3rem;border-radius:5px;font-size:20px;box-shadow:0 1px 2px #d3d3d3}.submit[_ngcontent-%COMP%]{background-color:#90ee90}.cancel[_ngcontent-%COMP%]{background-color:#f08080}.icon-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:4rem;padding:0 .5rem}.icon-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between}.border-input[_ngcontent-%COMP%]{background:#ffffff10;border:solid 1px black}.list[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;padding:1rem;gap:.5rem}.list-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;text-align:center;border-radius:10px;box-shadow:0 1px 2px gray;font-size:32px;padding:1rem;gap:.5rem}.col-center[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.row-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.color-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:.5rem;margin:1rem auto}[_nghost-%COMP%]{display:flex;flex-direction:column;margin:auto;width:100%;height:100%}a[_ngcontent-%COMP%]{text-decoration:none;color:#000}.set-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.set-title[_ngcontent-%COMP%]{word-break:break-all}"]});let n=e;return n})();var gf=[{path:"",component:ma,canActivate:[_e],children:[{path:"",component:ga,canActivate:[_e]},{path:"deck",component:Gs,canActivate:[_e]},{path:"deck/set/:setId",component:Gs,pathMatch:"full",canActivate:[_e]},{path:"list",component:js,canActivate:[_e]},{path:"list/set/:setId",component:js,pathMatch:"full",canActivate:[_e]},{path:"sets",component:Ca,canActivate:[_e]}]}];export{gf as routes};

var UD=Object.defineProperty,HD=Object.defineProperties;var zD=Object.getOwnPropertyDescriptors;var so=Object.getOwnPropertySymbols;var jp=Object.prototype.hasOwnProperty,Vp=Object.prototype.propertyIsEnumerable;var Lp=(t,e,n)=>e in t?UD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E=(t,e)=>{for(var n in e||={})jp.call(e,n)&&Lp(t,n,e[n]);if(so)for(var n of so(e))Vp.call(e,n)&&Lp(t,n,e[n]);return t},se=(t,e)=>HD(t,zD(e));var Bp=(t,e)=>{var n={};for(var r in t)jp.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&so)for(var r of so(t))e.indexOf(r)<0&&Vp.call(t,r)&&(n[r]=t[r]);return n};var be=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(c){i(c)}},o=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())});var $p=null;var Xl=1,Up=Symbol("SIGNAL");function Q(t){let e=$p;return $p=t,e}var Hp={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function WD(t){if(!(tc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Xl)){if(!t.producerMustRecompute(t)&&!Jl(t)){t.dirty=!1,t.lastCleanEpoch=Xl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Xl}}function zp(t){return t&&(t.nextProducerIndex=0),Q(t)}function Wp(t,e){if(Q(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(tc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ec(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Jl(t){nc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(WD(n),r!==n.version))return!0}return!1}function qp(t){if(nc(t),tc(t))for(let e=0;e<t.producerNode.length;e++)ec(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ec(t,e){if(qD(t),t.liveConsumerNode.length===1&&GD(t))for(let r=0;r<t.producerNode.length;r++)ec(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];nc(i),i.producerIndexOfThis[r]=e}}function tc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function nc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function qD(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function GD(t){return t.producerNode!==void 0}function QD(){throw new Error}var KD=QD;function Gp(t){KD=t}function b(t){return typeof t=="function"}function yr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var oo=yr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Mi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ue=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(b(r))try{r()}catch(s){e=s instanceof oo?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Qp(s)}catch(o){e=e??[],o instanceof oo?e=[...e,...o.errors]:e.push(o)}}if(e)throw new oo(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Qp(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Mi(n,e)}remove(e){let{_finalizers:n}=this;n&&Mi(n,e),e instanceof t&&e._removeParent(this)}};ue.EMPTY=(()=>{let t=new ue;return t.closed=!0,t})();var rc=ue.EMPTY;function ao(t){return t instanceof ue||t&&"closed"in t&&b(t.remove)&&b(t.add)&&b(t.unsubscribe)}function Qp(t){b(t)?t():t.unsubscribe()}var it={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var vr={setTimeout(t,e,...n){let{delegate:r}=vr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=vr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function lo(t){vr.setTimeout(()=>{let{onUnhandledError:e}=it;if(e)e(t);else throw t})}function Ni(){}var Kp=ic("C",void 0,void 0);function Yp(t){return ic("E",void 0,t)}function Zp(t){return ic("N",t,void 0)}function ic(t,e,n){return{kind:t,value:e,error:n}}var Mn=null;function _r(t){if(it.useDeprecatedSynchronousErrorHandling){let e=!Mn;if(e&&(Mn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Mn;if(Mn=null,n)throw r}}else t()}function Xp(t){it.useDeprecatedSynchronousErrorHandling&&Mn&&(Mn.errorThrown=!0,Mn.error=t)}var Nn=class extends ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ao(e)&&e.add(this)):this.destination=XD}static create(e,n,r){return new wr(e,n,r)}next(e){this.isStopped?oc(Zp(e),this):this._next(e)}error(e){this.isStopped?oc(Yp(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?oc(Kp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},YD=Function.prototype.bind;function sc(t,e){return YD.call(t,e)}var ac=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){co(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){co(r)}else co(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){co(n)}}},wr=class extends Nn{constructor(e,n,r){super();let i;if(b(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&it.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&sc(e.next,s),error:e.error&&sc(e.error,s),complete:e.complete&&sc(e.complete,s)}):i=e}this.destination=new ac(i)}};function co(t){it.useDeprecatedSynchronousErrorHandling?Xp(t):lo(t)}function ZD(t){throw t}function oc(t,e){let{onStoppedNotification:n}=it;n&&vr.setTimeout(()=>n(t,e))}var XD={closed:!0,next:Ni,error:ZD,complete:Ni};var Er=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ve(t){return t}function lc(...t){return cc(t)}function cc(t){return t.length===0?Ve:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var q=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=eC(n)?n:new wr(n,r,i);return _r(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Jp(r),new r((i,s)=>{let o=new wr({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Er](){return this}pipe(...n){return cc(n)(this)}toPromise(n){return n=Jp(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Jp(t){var e;return(e=t??it.Promise)!==null&&e!==void 0?e:Promise}function JD(t){return t&&b(t.next)&&b(t.error)&&b(t.complete)}function eC(t){return t&&t instanceof Nn||JD(t)&&ao(t)}function uc(t){return b(t?.lift)}function H(t){return e=>{if(uc(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function B(t,e,n,r,i){return new dc(t,e,n,r,i)}var dc=class extends Nn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Dr(){return H((t,e)=>{let n=null;t._refCount++;let r=B(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Cr=class extends q{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,uc(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ue;let n=this.getSubject();e.add(this.source.subscribe(B(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ue.EMPTY)}return e}refCount(){return Dr()(this)}};var eg=yr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Te=(()=>{class t extends q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new uo(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new eg}next(n){_r(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){_r(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){_r(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?rc:(this.currentObservers=null,s.push(n),new ue(()=>{this.currentObservers=null,Mi(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new q;return n.source=this,n}}return t.create=(e,n)=>new uo(e,n),t})(),uo=class extends Te{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:rc}};var ve=class extends Te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Me=new q(t=>t.complete());function tg(t){return t&&b(t.schedule)}function ng(t){return t[t.length-1]}function fo(t){return b(ng(t))?t.pop():void 0}function tn(t){return tg(ng(t))?t.pop():void 0}function ig(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function rg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function An(t){return this instanceof An?(this.v=t,this):new An(t)}function sg(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(g){return new Promise(function(v,C){s.push([h,g,v,C])>1||l(h,g)})},p&&(i[h]=p(i[h])))}function l(h,p){try{c(r[h](p))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof An?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,p){h(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function og(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rg=="function"?rg(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var br=t=>t&&typeof t.length=="number"&&typeof t!="function";function ho(t){return b(t?.then)}function po(t){return b(t[Er])}function go(t){return Symbol.asyncIterator&&b(t?.[Symbol.asyncIterator])}function mo(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yo=tC();function vo(t){return b(t?.[yo])}function _o(t){return sg(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield An(n.read());if(i)return yield An(void 0);yield yield An(r)}}finally{n.releaseLock()}})}function wo(t){return b(t?.getReader)}function oe(t){if(t instanceof q)return t;if(t!=null){if(po(t))return nC(t);if(br(t))return rC(t);if(ho(t))return iC(t);if(go(t))return ag(t);if(vo(t))return sC(t);if(wo(t))return oC(t)}throw mo(t)}function nC(t){return new q(e=>{let n=t[Er]();if(b(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rC(t){return new q(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function iC(t){return new q(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,lo)})}function sC(t){return new q(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function ag(t){return new q(e=>{aC(t,e).catch(n=>e.error(n))})}function oC(t){return ag(_o(t))}function aC(t,e){var n,r,i,s;return ig(this,void 0,void 0,function*(){try{for(n=og(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function xe(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Eo(t,e=0){return H((n,r)=>{n.subscribe(B(r,i=>xe(r,t,()=>r.next(i),e),()=>xe(r,t,()=>r.complete(),e),i=>xe(r,t,()=>r.error(i),e)))})}function Do(t,e=0){return H((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function lg(t,e){return oe(t).pipe(Do(e),Eo(e))}function cg(t,e){return oe(t).pipe(Do(e),Eo(e))}function ug(t,e){return new q(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function dg(t,e){return new q(n=>{let r;return xe(n,e,()=>{r=t[yo](),xe(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>b(r?.return)&&r.return()})}function Co(t,e){if(!t)throw new Error("Iterable cannot be null");return new q(n=>{xe(n,e,()=>{let r=t[Symbol.asyncIterator]();xe(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function fg(t,e){return Co(_o(t),e)}function hg(t,e){if(t!=null){if(po(t))return lg(t,e);if(br(t))return ug(t,e);if(ho(t))return cg(t,e);if(go(t))return Co(t,e);if(vo(t))return dg(t,e);if(wo(t))return fg(t,e)}throw mo(t)}function fe(t,e){return e?hg(t,e):oe(t)}function N(...t){let e=tn(t);return fe(t,e)}function Ir(t,e){let n=b(t)?t:()=>t,r=i=>i.error(n());return new q(e?i=>e.schedule(r,0,i):r)}function fc(t){return!!t&&(t instanceof q||b(t.lift)&&b(t.subscribe))}var Vt=yr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function L(t,e){return H((n,r)=>{let i=0;n.subscribe(B(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:lC}=Array;function cC(t,e){return lC(e)?t(...e):t(e)}function bo(t){return L(e=>cC(t,e))}var{isArray:uC}=Array,{getPrototypeOf:dC,prototype:fC,keys:hC}=Object;function pg(t){if(t.length===1){let e=t[0];if(uC(e))return{args:e,keys:null};if(pC(e)){let n=hC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function pC(t){return t&&typeof t=="object"&&dC(t)===fC}function gg(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Io(...t){let e=tn(t),n=fo(t),{args:r,keys:i}=pg(t);if(r.length===0)return fe([],e);let s=new q(gC(r,e,i?o=>gg(i,o):Ve));return n?s.pipe(bo(n)):s}function gC(t,e,n=Ve){return r=>{mg(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)mg(e,()=>{let c=fe(t[l],e),u=!1;c.subscribe(B(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function mg(t,e,n){t?xe(n,t,e):e()}function yg(t,e,n,r,i,s,o,a){let l=[],c=0,u=0,d=!1,f=()=>{d&&!l.length&&!c&&e.complete()},h=g=>c<r?p(g):l.push(g),p=g=>{s&&e.next(g),c++;let v=!1;oe(n(g,u++)).subscribe(B(e,C=>{i?.(C),s?h(C):e.next(C)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<r;){let C=l.shift();o?xe(e,o,()=>p(C)):p(C)}f()}catch(C){e.error(C)}}))};return t.subscribe(B(e,h,()=>{d=!0,f()})),()=>{a?.()}}function le(t,e,n=1/0){return b(e)?le((r,i)=>L((s,o)=>e(r,s,i,o))(oe(t(r,i))),n):(typeof e=="number"&&(n=e),H((r,i)=>yg(r,i,t,n)))}function hc(t=1/0){return le(Ve,t)}function vg(){return hc(1)}function Sr(...t){return vg()(fe(t,tn(t)))}function So(t){return new q(e=>{oe(t()).subscribe(e)})}var mC=["addListener","removeListener"],yC=["addEventListener","removeEventListener"],vC=["on","off"];function Tr(t,e,n,r){if(b(n)&&(r=n,n=void 0),r)return Tr(t,e,n).pipe(bo(r));let[i,s]=EC(t)?yC.map(o=>a=>t[o](e,a,n)):_C(t)?mC.map(_g(t,e)):wC(t)?vC.map(_g(t,e)):[];if(!i&&br(t))return le(o=>Tr(o,e,n))(oe(t));if(!i)throw new TypeError("Invalid event target");return new q(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function _g(t,e){return n=>r=>t[n](e,r)}function _C(t){return b(t.addListener)&&b(t.removeListener)}function wC(t){return b(t.on)&&b(t.off)}function EC(t){return b(t.addEventListener)&&b(t.removeEventListener)}var{isArray:DC}=Array;function wg(t){return t.length===1&&DC(t[0])?t[0]:t}function st(t,e){return H((n,r)=>{let i=0;n.subscribe(B(r,s=>t.call(e,s,i++)&&r.next(s)))})}function pc(...t){let e=fo(t),n=wg(t);return n.length?new q(r=>{let i=n.map(()=>[]),s=n.map(()=>!1);r.add(()=>{i=s=null});for(let o=0;!r.closed&&o<n.length;o++)oe(n[o]).subscribe(B(r,a=>{if(i[o].push(a),i.every(l=>l.length)){let l=i.map(c=>c.shift());r.next(e?e(...l):l),i.some((c,u)=>!c.length&&s[u])&&r.complete()}},()=>{s[o]=!0,!i[o].length&&r.complete()}));return()=>{i=s=null}}):Me}function nn(t){return H((e,n)=>{let r=null,i=!1,s;r=e.subscribe(B(n,void 0,void 0,o=>{s=oe(t(o,nn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Eg(t,e,n,r,i){return(s,o)=>{let a=n,l=e,c=0;s.subscribe(B(o,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function Mr(t,e){return b(e)?le(t,e,1):le(t,1)}function rn(t){return H((e,n)=>{let r=!1;e.subscribe(B(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Bt(t){return t<=0?()=>Me:H((e,n)=>{let r=0;e.subscribe(B(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function gc(t){return L(()=>t)}function To(t=CC){return H((e,n)=>{let r=!1;e.subscribe(B(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function CC(){return new Vt}function Ai(t){return H((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function _t(t,e){let n=arguments.length>=2;return r=>r.pipe(t?st((i,s)=>t(i,s,r)):Ve,Bt(1),n?rn(e):To(()=>new Vt))}function Nr(t){return t<=0?()=>Me:H((e,n)=>{let r=[];e.subscribe(B(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function mc(t,e){let n=arguments.length>=2;return r=>r.pipe(t?st((i,s)=>t(i,s,r)):Ve,Nr(1),n?rn(e):To(()=>new Vt))}function yc(t,e){return H(Eg(t,e,arguments.length>=2,!0))}function vc(...t){let e=tn(t);return H((n,r)=>{(e?Sr(t,n,e):Sr(t,n)).subscribe(r)})}function ot(t,e){return H((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(B(r,l=>{i?.unsubscribe();let c=0,u=s++;oe(t(l,u)).subscribe(i=B(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function _c(t){return H((e,n)=>{oe(t).subscribe(B(n,()=>n.complete(),Ni)),!n.closed&&e.subscribe(n)})}function _e(t,e,n){let r=b(t)||e||n?{next:t,error:e,complete:n}:t;return r?H((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(B(s,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Ve}var bC="https://g.co/ng/security#xss",y=class extends Error{constructor(e,n){super(_u(e,n)),this.code=e}};function _u(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function zi(t){return{toString:t}.toString()}var Mo="__parameters__";function IC(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function am(t,e,n){return zi(()=>{let r=IC(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(Mo)?l[Mo]:Object.defineProperty(l,Mo,{value:[]})[Mo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Dt=globalThis;function X(t){for(let e in t)if(t[e]===X)return e;throw Error("Could not find renamed property on target object.")}function Re(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Re).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Oc(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var SC=X({__forward_ref__:X});function lm(t){return t.__forward_ref__=lm,t.toString=function(){return Re(this())},t}function Qe(t){return cm(t)?t():t}function cm(t){return typeof t=="function"&&t.hasOwnProperty(SC)&&t.__forward_ref__===lm}function I(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function un(t){return{providers:t.providers||[],imports:t.imports||[]}}function ta(t){return Dg(t,dm)||Dg(t,fm)}function um(t){return ta(t)!==null}function Dg(t,e){return t.hasOwnProperty(e)?t[e]:null}function TC(t){let e=t&&(t[dm]||t[fm]);return e||null}function Cg(t){return t&&(t.hasOwnProperty(bg)||t.hasOwnProperty(MC))?t[bg]:null}var dm=X({\u0275prov:X}),bg=X({\u0275inj:X}),fm=X({ngInjectableDef:X}),MC=X({ngInjectorDef:X}),R=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hm(t){return t&&!!t.\u0275providers}var NC=X({\u0275cmp:X}),AC=X({\u0275dir:X}),xC=X({\u0275pipe:X}),RC=X({\u0275mod:X}),ko=X({\u0275fac:X}),xi=X({__NG_ELEMENT_ID__:X}),Ig=X({__NG_ENV_ID__:X});function pm(t){return typeof t=="string"?t:t==null?"":String(t)}function OC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():pm(t)}function PC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new y(-200,t)}function wu(t,e){throw new y(-201,!1)}var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(k||{}),Pc;function gm(){return Pc}function Ge(t){let e=Pc;return Pc=t,e}function mm(t,e,n){let r=ta(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&k.Optional)return null;if(e!==void 0)return e;wu(t,"Injector")}var kC={},Ri=kC,kc="__NG_DI_FLAG__",Fo="ngTempTokenPath",FC="ngTokenPath",LC=/\n/gm,jC="\u0275",Sg="__source",Or;function VC(){return Or}function sn(t){let e=Or;return Or=t,e}function BC(t,e=k.Default){if(Or===void 0)throw new y(-203,!1);return Or===null?mm(t,void 0,e):Or.get(t,e&k.Optional?null:void 0,e)}function M(t,e=k.Default){return(gm()||BC)(Qe(t),e)}function _(t,e=k.Default){return M(t,na(e))}function na(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Fc(t){let e=[];for(let n=0;n<t.length;n++){let r=Qe(t[n]);if(Array.isArray(r)){if(r.length===0)throw new y(900,!1);let i,s=k.Default;for(let o=0;o<r.length;o++){let a=r[o],l=$C(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(M(i,s))}else e.push(M(r))}return e}function ym(t,e){return t[kc]=e,t.prototype[kc]=e,t}function $C(t){return t[kc]}function UC(t,e,n,r){let i=t[Fo];throw e[Sg]&&i.unshift(e[Sg]),t.message=HC(`
`+t.message,i,n,r),t[FC]=i,t[Fo]=null,t}function HC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==jC?t.slice(2):t;let i=Re(e);if(Array.isArray(e))i=e.map(Re).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Re(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(LC,`
  `)}`}var Eu=ym(am("Optional"),8);var vm=ym(am("SkipSelf"),4);function kr(t,e){let n=t.hasOwnProperty(ko);return n?t[ko]:null}function Du(t,e){t.forEach(n=>Array.isArray(n)?Du(n,e):e(n))}function _m(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Lo(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function zC(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function ra(t,e,n){let r=Wi(t,e);return r>=0?t[r|1]=n:(r=~r,zC(t,r,e,n)),r}function wc(t,e){let n=Wi(t,e);if(n>=0)return t[n|1]}function Wi(t,e){return WC(t,e,1)}function WC(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Oi={},Be=[],Fr=new R(""),wm=new R("",-1),Em=new R(""),jo=class{get(e,n=Ri){if(n===Ri){let r=new Error(`NullInjectorError: No provider for ${Re(e)}!`);throw r.name="NullInjectorError",r}return n}},Dm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Dm||{}),Ct=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ct||{}),Lr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Lr||{});function qC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Lc(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];QC(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function GC(t){return t===3||t===4||t===6}function QC(t){return t.charCodeAt(0)===64}function Cu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Tg(t,n,i,null,e[++r]):Tg(t,n,i,null,null))}}return t}function Tg(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Cm="ng-template";function KC(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&qC(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(bu(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function bu(t){return t.type===4&&t.value!==Cm}function YC(t,e,n){let r=t.type===4&&!n?Cm:t.value;return e===r}function ZC(t,e,n){let r=4,i=t.attrs,s=i!==null?eb(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!at(r)&&!at(l))return!1;if(o&&at(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!YC(t,l,n)||l===""&&e.length===1){if(at(r))return!1;o=!0}}else if(r&8){if(i===null||!KC(t,i,l,n)){if(at(r))return!1;o=!0}}else{let c=e[++a],u=XC(l,i,bu(t),n);if(u===-1){if(at(r))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(at(r))return!1;o=!0}}}}return at(r)||o}function at(t){return(t&1)===0}function XC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return tb(e,t)}function JC(t,e,n=!1){for(let r=0;r<e.length;r++)if(ZC(t,e[r],n))return!0;return!1}function eb(t){for(let e=0;e<t.length;e++){let n=t[e];if(GC(n))return e}return t.length}function tb(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Mg(t,e){return t?":not("+e.trim()+")":e}function nb(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!at(o)&&(e+=Mg(s,i),i=""),r=o,s=s||!at(r);n++}return i!==""&&(e+=Mg(s,i)),e}function rb(t){return t.map(nb).join(",")}function ib(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!at(i))break;i=s}r++}return{attrs:e,classes:n}}function Ze(t){return zi(()=>{let e=Mm(t),n=se(E({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Dm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ct.Emulated,styles:t.styles||Be,_:null,schemas:t.schemas||null,tView:null,id:""});Nm(n);let r=t.dependencies;return n.directiveDefs=Ag(r,!1),n.pipeDefs=Ag(r,!0),n.id=ab(n),n})}function sb(t){return Pn(t)||bm(t)}function ob(t){return t!==null}function dn(t){return zi(()=>({type:t.type,bootstrap:t.bootstrap||Be,declarations:t.declarations||Be,imports:t.imports||Be,exports:t.exports||Be,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ng(t,e){if(t==null)return Oi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Lr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Lr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function qi(t){return zi(()=>{let e=Mm(t);return Nm(e),e})}function Pn(t){return t[NC]||null}function bm(t){return t[AC]||null}function Im(t){return t[xC]||null}function Sm(t){let e=Pn(t)||bm(t)||Im(t);return e!==null?e.standalone:!1}function Tm(t,e){let n=t[RC]||null;if(!n&&e===!0)throw new Error(`Type ${Re(t)} does not have '\u0275mod' property.`);return n}function Mm(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Oi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Be,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ng(t.inputs,e),outputs:Ng(t.outputs),debugInfo:null}}function Nm(t){t.features?.forEach(e=>e(t))}function Ag(t,e){if(!t)return null;let n=e?Im:sb;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(ob)}function ab(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Iu(t){return{\u0275providers:t}}function Su(...t){return{\u0275providers:Am(!0,t),\u0275fromNgModule:!0}}function Am(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Du(e,o=>{let a=o;jc(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&xm(i,s),n}function xm(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Tu(i,s=>{e(s,r)})}}function jc(t,e,n,r){if(t=Qe(t),!t)return!1;let i=null,s=Cg(t),o=!s&&Pn(t);if(!s&&!o){let l=t.ngModule;if(s=Cg(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)jc(c,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{Du(s.imports,u=>{jc(u,e,n,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&xm(c,e)}if(!a){let c=kr(i)||(()=>new i);e({provide:i,useFactory:c,deps:Be},i),e({provide:Em,useValue:i,multi:!0},i),e({provide:Fr,useValue:()=>M(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=t;Tu(l,u=>{e(u,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Tu(t,e){for(let n of t)hm(n)&&(n=n.\u0275providers),Array.isArray(n)?Tu(n,e):e(n)}var lb=X({provide:String,useValue:X});function Rm(t){return t!==null&&typeof t=="object"&&lb in t}function cb(t){return!!(t&&t.useExisting)}function ub(t){return!!(t&&t.useFactory)}function Vc(t){return typeof t=="function"}var ia=new R(""),Ao={},db={},Ec;function Mu(){return Ec===void 0&&(Ec=new jo),Ec}var Ye=class{},Pi=class extends Ye{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$c(e,o=>this.processProvider(o)),this.records.set(wm,Ar(void 0,this)),i.has("environment")&&this.records.set(Ye,Ar(void 0,this));let s=this.records.get(ia);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Em,Be,k.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Q(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=sn(this),r=Ge(void 0),i;try{return e()}finally{sn(n),Ge(r)}}get(e,n=Ri,r=k.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ig))return e[Ig](this);r=na(r);let i,s=sn(this),o=Ge(void 0);try{if(!(r&k.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=yb(e)&&ta(e);c&&this.injectableDefInScope(c)?l=Ar(Bc(e),Ao):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&k.Self?Mu():this.parent;return n=r&k.Optional&&n===Ri?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Fo]=a[Fo]||[]).unshift(Re(e)),s)throw a;return UC(a,e,"R3InjectorError",this.source)}else throw a}finally{Ge(o),sn(s)}}resolveInjectorInitializers(){let e=Q(null),n=sn(this),r=Ge(void 0),i;try{let s=this.get(Fr,Be,k.Self);for(let o of s)o()}finally{sn(n),Ge(r),Q(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Re(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new y(205,!1)}processProvider(e){e=Qe(e);let n=Vc(e)?e:Qe(e&&e.provide),r=hb(e);if(!Vc(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ar(void 0,Ao,!0),i.factory=()=>Fc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Q(null);try{return n.value===Ao&&(n.value=db,n.value=n.factory()),typeof n.value=="object"&&n.value&&mb(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Q(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Qe(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Bc(t){let e=ta(t),n=e!==null?e.factory:kr(t);if(n!==null)return n;if(t instanceof R)throw new y(204,!1);if(t instanceof Function)return fb(t);throw new y(204,!1)}function fb(t){if(t.length>0)throw new y(204,!1);let n=TC(t);return n!==null?()=>n.factory(t):()=>new t}function hb(t){if(Rm(t))return Ar(void 0,t.useValue);{let e=pb(t);return Ar(e,Ao)}}function pb(t,e,n){let r;if(Vc(t)){let i=Qe(t);return kr(i)||Bc(i)}else if(Rm(t))r=()=>Qe(t.useValue);else if(ub(t))r=()=>t.useFactory(...Fc(t.deps||[]));else if(cb(t))r=()=>M(Qe(t.useExisting));else{let i=Qe(t&&(t.useClass||t.provide));if(gb(t))r=()=>new i(...Fc(t.deps));else return kr(i)||Bc(i)}return r}function Ar(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gb(t){return!!t.deps}function mb(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function yb(t){return typeof t=="function"||typeof t=="object"&&t instanceof R}function $c(t,e){for(let n of t)Array.isArray(n)?$c(n,e):n&&hm(n)?$c(n.\u0275providers,e):e(n)}function Wt(t,e){t instanceof Pi&&t.assertNotDestroyed();let n,r=sn(t),i=Ge(void 0);try{return e()}finally{sn(r),Ge(i)}}function vb(){return gm()!==void 0||VC()!=null}function _b(t){return typeof t=="function"}var qt=0,z=1,T=2,Ne=3,lt=4,ut=5,Vo=6,Bo=7,ct=8,jr=9,$t=10,Ie=11,ki=12,xg=13,Wr=14,bt=15,Vr=16,xr=17,Br=18,sa=19,Om=20,on=21,Dc=22,kn=23,Ut=25,Pm=1;var Fn=7,$o=8,Uo=9,Ke=10,Ho=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ho||{});function Rn(t){return Array.isArray(t)&&typeof t[Pm]=="object"}function Gt(t){return Array.isArray(t)&&t[Pm]===!0}function Nu(t){return(t.flags&4)!==0}function oa(t){return t.componentOffset>-1}function aa(t){return(t.flags&1)===1}function Gi(t){return!!t.template}function Uc(t){return(t[T]&512)!==0}var Hc=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function km(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function la(){return Fm}function Fm(t){return t.type.prototype.ngOnChanges&&(t.setInput=Eb),wb}la.ngInherit=!0;function wb(){let t=jm(this),e=t?.current;if(e){let n=t.previous;if(n===Oi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Eb(t,e,n,r,i){let s=this.declaredInputs[r],o=jm(t)||Db(t,{previous:Oi,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new Hc(c&&c.currentValue,n,l===Oi),km(t,e,i,n)}var Lm="__ngSimpleChanges__";function jm(t){return t[Lm]||null}function Db(t,e){return t[Lm]=e}var Rg=null;var wt=function(t,e,n){Rg?.(t,e,n)},Vm="svg",Cb="math";function It(t){for(;Array.isArray(t);)t=t[qt];return t}function Bm(t,e){return It(e[t])}function dt(t,e){return It(e[t.index])}function $m(t,e){return t.data[e]}function $n(t,e){let n=e[t];return Rn(n)?n:n[qt]}function Au(t){return(t[T]&128)===128}function bb(t){return Gt(t[Ne])}function $r(t,e){return e==null?null:t[e]}function Um(t){t[xr]=0}function Ib(t){t[T]&1024||(t[T]|=1024,Au(t)&&ca(t))}function Sb(t,e){for(;t>0;)e=e[Wr],t--;return e}function Fi(t){return!!(t[T]&9216||t[kn]?.dirty)}function zc(t){t[$t].changeDetectionScheduler?.notify(7),t[T]&64&&(t[T]|=1024),Fi(t)&&ca(t)}function ca(t){t[$t].changeDetectionScheduler?.notify(0);let e=Li(t);for(;e!==null&&!(e[T]&8192||(e[T]|=8192,!Au(e)));)e=Li(e)}function Hm(t,e){if((t[T]&256)===256)throw new y(911,!1);t[on]===null&&(t[on]=[]),t[on].push(e)}function Tb(t,e){if(t[on]===null)return;let n=t[on].indexOf(e);n!==-1&&t[on].splice(n,1)}function Li(t){let e=t[Ne];return Gt(e)?e[Ne]:e}var F={lFrame:ty(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var zm=!1;function Mb(){return F.lFrame.elementDepthCount}function Nb(){F.lFrame.elementDepthCount++}function Ab(){F.lFrame.elementDepthCount--}function Wm(){return F.bindingsEnabled}function xb(){return F.skipHydrationRootTNode!==null}function Rb(t){return F.skipHydrationRootTNode===t}function Ob(){F.skipHydrationRootTNode=null}function ce(){return F.lFrame.lView}function St(){return F.lFrame.tView}function qm(t){return F.lFrame.contextLView=t,t[ct]}function Gm(t){return F.lFrame.contextLView=null,t}function Xe(){let t=Qm();for(;t!==null&&t.type===64;)t=t.parent;return t}function Qm(){return F.lFrame.currentTNode}function Pb(){let t=F.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Un(t,e){let n=F.lFrame;n.currentTNode=t,n.isParent=e}function xu(){return F.lFrame.isParent}function Km(){F.lFrame.isParent=!1}function Ym(){return zm}function Og(t){zm=t}function kb(){let t=F.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Fb(t){return F.lFrame.bindingIndex=t}function Zm(){return F.lFrame.bindingIndex++}function Lb(t){let e=F.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function jb(){return F.lFrame.inI18n}function Vb(t,e){let n=F.lFrame;n.bindingIndex=n.bindingRootIndex=t,Wc(e)}function Bb(){return F.lFrame.currentDirectiveIndex}function Wc(t){F.lFrame.currentDirectiveIndex=t}function $b(t){let e=F.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Xm(t){F.lFrame.currentQueryIndex=t}function Ub(t){let e=t[z];return e.type===2?e.declTNode:e.type===1?t[ut]:null}function Jm(t,e,n){if(n&k.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&k.Host);)if(i=Ub(s),i===null||(s=s[Wr],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=F.lFrame=ey();return r.currentTNode=e,r.lView=t,!0}function Ru(t){let e=ey(),n=t[z];F.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ey(){let t=F.lFrame,e=t===null?null:t.child;return e===null?ty(t):e}function ty(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function ny(){let t=F.lFrame;return F.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ry=ny;function Ou(){let t=ny();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Hb(t){return(F.lFrame.contextLView=Sb(t,F.lFrame.contextLView))[ct]}function qr(){return F.lFrame.selectedIndex}function Ln(t){F.lFrame.selectedIndex=t}function zb(){let t=F.lFrame;return $m(t.tView,t.selectedIndex)}function Pu(){F.lFrame.currentNamespace=Vm}function iy(){Wb()}function Wb(){F.lFrame.currentNamespace=null}function qb(){return F.lFrame.currentNamespace}var sy=!0;function ua(){return sy}function da(t){sy=t}function Gb(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Fm(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function fa(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function xo(t,e,n){oy(t,e,3,n)}function Ro(t,e,n,r){(t[T]&3)===n&&oy(t,e,n,r)}function Cc(t,e){let n=t[T];(n&3)===e&&(n&=16383,n+=1,t[T]=n)}function oy(t,e,n,r){let i=r!==void 0?t[xr]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[xr]+=65536),(a<s||s==-1)&&(Qb(t,n,e,l),t[xr]=(t[xr]&4294901760)+l+2),l++}function Pg(t,e){wt(4,t,e);let n=Q(null);try{e.call(t)}finally{Q(n),wt(5,t,e)}}function Qb(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[T]>>14<t[xr]>>16&&(t[T]&3)===e&&(t[T]+=16384,Pg(a,s)):Pg(a,s)}var Pr=-1,ji=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Kb(t){return t instanceof ji}function Yb(t){return(t.flags&8)!==0}function Zb(t){return(t.flags&16)!==0}function ay(t){return t!==Pr}function zo(t){return t&32767}function Xb(t){return t>>16}function Wo(t,e){let n=Xb(t),r=e;for(;n>0;)r=r[Wr],n--;return r}var qc=!0;function kg(t){let e=qc;return qc=t,e}var Jb=256,ly=Jb-1,cy=5,eI=0,Et={};function tI(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(xi)&&(r=n[xi]),r==null&&(r=n[xi]=eI++);let i=r&ly,s=1<<i;e.data[t+(i>>cy)]|=s}function uy(t,e){let n=dy(t,e);if(n!==-1)return n;let r=e[z];r.firstCreatePass&&(t.injectorIndex=e.length,bc(r.data,t),bc(e,null),bc(r.blueprint,null));let i=ku(t,e),s=t.injectorIndex;if(ay(i)){let o=zo(i),a=Wo(i,e),l=a[z].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function bc(t,e){t.push(0,0,0,0,0,0,0,0,e)}function dy(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ku(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=my(i),r===null)return Pr;if(n++,i=i[Wr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Pr}function nI(t,e,n){tI(t,e,n)}function fy(t,e,n){if(n&k.Optional||t!==void 0)return t;wu(e,"NodeInjector")}function hy(t,e,n,r){if(n&k.Optional&&r===void 0&&(r=null),!(n&(k.Self|k.Host))){let i=t[jr],s=Ge(void 0);try{return i?i.get(e,r,n&k.Optional):mm(e,r,n&k.Optional)}finally{Ge(s)}}return fy(r,e,n)}function py(t,e,n,r=k.Default,i){if(t!==null){if(e[T]&2048&&!(r&k.Self)){let o=aI(t,e,n,r,Et);if(o!==Et)return o}let s=gy(t,e,n,r,Et);if(s!==Et)return s}return hy(e,n,r,i)}function gy(t,e,n,r,i){let s=sI(n);if(typeof s=="function"){if(!Jm(e,t,r))return r&k.Host?fy(i,n,r):hy(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&k.Optional))wu(n);else return o}finally{ry()}}else if(typeof s=="number"){let o=null,a=dy(t,e),l=Pr,c=r&k.Host?e[bt][ut]:null;for((a===-1||r&k.SkipSelf)&&(l=a===-1?ku(t,e):e[a+8],l===Pr||!Lg(r,!1)?a=-1:(o=e[z],a=zo(l),e=Wo(l,e)));a!==-1;){let u=e[z];if(Fg(s,a,u.data)){let d=rI(a,e,n,o,r,c);if(d!==Et)return d}l=e[a+8],l!==Pr&&Lg(r,e[z].data[a+8]===c)&&Fg(s,a,e)?(o=u,a=zo(l),e=Wo(l,e)):a=-1}}return i}function rI(t,e,n,r,i,s){let o=e[z],a=o.data[t+8],l=r==null?oa(a)&&qc:r!=o&&(a.type&3)!==0,c=i&k.Host&&s===a,u=iI(a,o,n,l,c);return u!==null?Vi(e,o,u,a):Et}function iI(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,c=t.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:c;for(let h=d;h<f;h++){let p=o[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){let h=o[l];if(h&&Gi(h)&&h.type===n)return l}return null}function Vi(t,e,n,r){let i=t[n],s=e.data;if(Kb(i)){let o=i;o.resolving&&PC(OC(s[n]));let a=kg(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?Ge(o.injectImpl):null,u=Jm(t,r,k.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Gb(n,s[n],e)}finally{c!==null&&Ge(c),kg(a),o.resolving=!1,ry()}}return i}function sI(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(xi)?t[xi]:void 0;return typeof e=="number"?e>=0?e&ly:oI:e}function Fg(t,e,n){let r=1<<t;return!!(n[e+(t>>cy)]&r)}function Lg(t,e){return!(t&k.Self)&&!(t&k.Host&&e)}var On=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return py(this._tNode,this._lView,e,na(r),n)}};function oI(){return new On(Xe(),ce())}function Fu(t){return zi(()=>{let e=t.prototype.constructor,n=e[ko]||Gc(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[ko]||Gc(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Gc(t){return cm(t)?()=>{let e=Gc(Qe(t));return e&&e()}:kr(t)}function aI(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[T]&2048&&!(o[T]&512);){let a=gy(s,o,n,r|k.Self,Et);if(a!==Et)return a;let l=s.parent;if(!l){let c=o[Om];if(c){let u=c.get(n,Et,r);if(u!==Et)return u}l=my(o),o=o[Wr]}s=l}return i}function my(t){let e=t[z],n=e.type;return n===2?e.declTNode:n===1?t[ut]:null}function jg(t,e=null,n=null,r){let i=yy(t,e,n,r);return i.resolveInjectorInitializers(),i}function yy(t,e=null,n=null,r,i=new Set){let s=[n||Be,Su(t)];return r=r||(typeof t=="object"?void 0:Re(t)),new Pi(s,e||Mu(),r||null,i)}var xn=class xn{static create(e,n){if(Array.isArray(e))return jg({name:""},n,e,"");{let r=e.name??"";return jg({name:r},e.parent,e.providers,r)}}};xn.THROW_IF_NOT_FOUND=Ri,xn.NULL=new jo,xn.\u0275prov=I({token:xn,providedIn:"any",factory:()=>M(wm)}),xn.__NG_ELEMENT_ID__=-1;var jn=xn;var lI=new R("");lI.__NG_ELEMENT_ID__=t=>{let e=Xe();if(e===null)throw new y(204,!1);if(e.type&2)return e.value;if(t&k.Optional)return null;throw new y(204,!1)};var cI="ngOriginalError";function Ic(t){return t[cI]}var Ht=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ic(e);for(;n&&Ic(n);)n=Ic(n);return n||null}},vy=new R("",{providedIn:"root",factory:()=>_(Ht).handleError.bind(void 0)}),_y=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=uI,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Qc=class extends _y{constructor(e){super(),this._lView=e}onDestroy(e){return Hm(this._lView,e),()=>Tb(this._lView,e)}};function uI(){return new Qc(ce())}function dI(){return ha(Xe(),ce())}function ha(t,e){return new pa(dt(t,e))}var pa=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=dI;let t=e;return t})();var Kc=class extends Te{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,vb()&&(this.destroyRef=_(_y,{optional:!0})??void 0)}emit(e){let n=Q(null);try{super.next(e)}finally{Q(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Sc(s),i&&(i=Sc(i)),o&&(o=Sc(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ue&&e.add(a),a}};function Sc(t){return e=>{setTimeout(t,void 0,e)}}var we=Kc;function wy(t){return(t.flags&128)===128}var Ey=new Map,fI=0;function hI(){return fI++}function pI(t){Ey.set(t[sa],t)}function gI(t){Ey.delete(t[sa])}var Vg="__ngContext__";function an(t,e){Rn(e)?(t[Vg]=e[sa],pI(e)):t[Vg]=e}function Dy(t){return by(t[ki])}function Cy(t){return by(t[lt])}function by(t){for(;t!==null&&!Gt(t);)t=t[lt];return t}var Yc;function Iy(t){Yc=t}function mI(){if(Yc!==void 0)return Yc;if(typeof document<"u")return document;throw new y(210,!1)}var ga=new R("",{providedIn:"root",factory:()=>yI}),yI="ng",Lu=new R(""),Gr=new R("",{providedIn:"platform",factory:()=>"unknown"});var ju=new R(""),Vu=new R("",{providedIn:"root",factory:()=>mI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var vI="h",_I="b";var wI=()=>null;function Bu(t,e,n=!1){return wI(t,e,n)}var Sy=!1,EI=new R("",{providedIn:"root",factory:()=>Sy});var Zc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bC})`}};function ma(t){return t instanceof Zc?t.changingThisBreaksApplicationSecurity:t}var DI=/^>|^->|<!--|-->|--!>|<!-$/g,CI=/(<|>)/g,bI="\u200B$1\u200B";function II(t){return t.replace(DI,e=>e.replace(CI,bI))}function Ty(t){return t instanceof Function?t():t}var zt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(zt||{}),SI;function $u(t,e){return SI(t,e)}function Rr(t,e,n,r,i){if(r!=null){let s,o=!1;Gt(r)?s=r:Rn(r)&&(o=!0,r=r[qt]);let a=It(r);t===0&&n!==null?i==null?Ry(e,n,a):qo(e,n,a,i||null,!0):t===1&&n!==null?qo(e,n,a,i||null,!0):t===2?HI(e,a,o):t===3&&e.destroyNode(a),s!=null&&WI(e,t,s,n,i)}}function TI(t,e){return t.createText(e)}function MI(t,e,n){t.setValue(e,n)}function NI(t,e){return t.createComment(II(e))}function My(t,e,n){return t.createElement(e,n)}function AI(t,e){Ny(t,e),e[qt]=null,e[ut]=null}function xI(t,e,n,r,i,s){r[qt]=i,r[ut]=e,va(t,r,n,1,i,s)}function Ny(t,e){e[$t].changeDetectionScheduler?.notify(8),va(t,e,e[Ie],2,null,null)}function RI(t){let e=t[ki];if(!e)return Tc(t[z],t);for(;e;){let n=null;if(Rn(e))n=e[ki];else{let r=e[Ke];r&&(n=r)}if(!n){for(;e&&!e[lt]&&e!==t;)Rn(e)&&Tc(e[z],e),e=e[Ne];e===null&&(e=t),Rn(e)&&Tc(e[z],e),n=e&&e[lt]}e=n}}function OI(t,e,n,r){let i=Ke+r,s=n.length;r>0&&(n[i-1][lt]=e),r<s-Ke?(e[lt]=n[i],_m(n,Ke+r,e)):(n.push(e),e[lt]=null),e[Ne]=n;let o=e[Vr];o!==null&&n!==o&&Ay(o,e);let a=e[Br];a!==null&&a.insertView(t),zc(e),e[T]|=128}function Ay(t,e){let n=t[Uo],r=e[Ne];if(Rn(r))t[T]|=Ho.HasTransplantedViews;else{let i=r[Ne][bt];e[bt]!==i&&(t[T]|=Ho.HasTransplantedViews)}n===null?t[Uo]=[e]:n.push(e)}function Uu(t,e){let n=t[Uo],r=n.indexOf(e);n.splice(r,1)}function Xc(t,e){if(t.length<=Ke)return;let n=Ke+e,r=t[n];if(r){let i=r[Vr];i!==null&&i!==t&&Uu(i,r),e>0&&(t[n-1][lt]=r[lt]);let s=Lo(t,Ke+e);AI(r[z],r);let o=s[Br];o!==null&&o.detachView(s[z]),r[Ne]=null,r[lt]=null,r[T]&=-129}return r}function xy(t,e){if(!(e[T]&256)){let n=e[Ie];n.destroyNode&&va(t,e,n,3,null,null),RI(e)}}function Tc(t,e){if(e[T]&256)return;let n=Q(null);try{e[T]&=-129,e[T]|=256,e[kn]&&qp(e[kn]),kI(t,e),PI(t,e),e[z].type===1&&e[Ie].destroy();let r=e[Vr];if(r!==null&&Gt(e[Ne])){r!==e[Ne]&&Uu(r,e);let i=e[Br];i!==null&&i.detachView(t)}gI(e)}finally{Q(n)}}function PI(t,e){let n=t.cleanup,r=e[Bo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Bo]=null);let i=e[on];if(i!==null){e[on]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function kI(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ji)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];wt(4,a,l);try{l.call(a)}finally{wt(5,a,l)}}else{wt(4,i,s);try{s.call(i)}finally{wt(5,i,s)}}}}}function FI(t,e,n){return LI(t,e.parent,n)}function LI(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[qt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Ct.None||s===Ct.Emulated)return null}return dt(r,n)}}function qo(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Ry(t,e,n){t.appendChild(e,n)}function Bg(t,e,n,r,i){r!==null?qo(t,e,n,r,i):Ry(t,e,n)}function jI(t,e,n,r){t.removeChild(e,n,r)}function Hu(t,e){return t.parentNode(e)}function VI(t,e){return t.nextSibling(e)}function BI(t,e,n){return UI(t,e,n)}function $I(t,e,n){return t.type&40?dt(t,n):null}var UI=$I,$g;function ya(t,e,n,r){let i=FI(t,r,e),s=e[Ie],o=r.parent||e[ut],a=BI(o,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)Bg(s,i,n[l],a,!1);else Bg(s,i,n,a,!1);$g!==void 0&&$g(s,r,e,n,i)}function Oo(t,e){if(e!==null){let n=e.type;if(n&3)return dt(e,t);if(n&4)return Jc(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Oo(t,r);{let i=t[e.index];return Gt(i)?Jc(-1,i):It(i)}}else{if(n&32)return $u(e,t)()||It(t[e.index]);{let r=Oy(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Li(t[bt]);return Oo(i,r)}else return Oo(t,e.next)}}}return null}function Oy(t,e){if(e!==null){let r=t[bt][ut],i=e.projection;return r.projection[i]}return null}function Jc(t,e){let n=Ke+t+1;if(n<e.length){let r=e[n],i=r[z].firstChild;if(i!==null)return Oo(r,i)}return e[Fn]}function HI(t,e,n){let r=Hu(t,e);r&&jI(t,r,e,n)}function zu(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],l=n.type;if(o&&e===0&&(a&&an(It(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)zu(t,e,n.child,r,i,s,!1),Rr(e,t,i,a,s);else if(l&32){let c=$u(n,r),u;for(;u=c();)Rr(e,t,i,u,s);Rr(e,t,i,a,s)}else l&16?zI(t,e,r,n,i,s):Rr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function va(t,e,n,r,i,s){zu(n,r,t.firstChild,e,i,s,!1)}function zI(t,e,n,r,i,s){let o=n[bt],l=o[ut].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Rr(e,t,i,u,s)}else{let c=l,u=o[Ne];wy(r)&&(c.flags|=128),zu(t,e,c,u,i,s,!0)}}function WI(t,e,n,r,i){let s=n[Fn],o=It(n);s!==o&&Rr(e,t,r,s,i);for(let a=Ke;a<n.length;a++){let l=n[a];va(l[z],l,t,e,r,s)}}function qI(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:zt.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=zt.Important),t.setStyle(n,r,i,s))}}function GI(t,e,n){t.setAttribute(e,"style",n)}function Py(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ky(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Lc(t,e,r),i!==null&&Py(t,e,i),s!==null&&GI(t,e,s)}var fn={};function Qr(t=1){Fy(St(),ce(),qr()+t,!1)}function Fy(t,e,n,r){if(!r)if((e[T]&3)===3){let s=t.preOrderCheckHooks;s!==null&&xo(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Ro(e,s,0,n)}Ln(n)}function Tt(t,e=k.Default){let n=ce();if(n===null)return M(t,e);let r=Xe();return py(r,n,Qe(t),e)}function Ly(t,e,n,r,i,s){let o=Q(null);try{let a=null;i&Lr.SignalBased&&(a=e[r][Up]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Lr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):km(e,a,r,s)}finally{Q(o)}}function QI(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ln(~i);else{let s=i,o=n[++r],a=n[++r];Vb(o,s);let l=e[s];a(2,l)}}}finally{Ln(-1)}}function _a(t,e,n,r,i,s,o,a,l,c,u){let d=e.blueprint.slice();return d[qt]=i,d[T]=r|4|128|8|64,(c!==null||t&&t[T]&2048)&&(d[T]|=2048),Um(d),d[Ne]=d[Wr]=t,d[ct]=n,d[$t]=o||t&&t[$t],d[Ie]=a||t&&t[Ie],d[jr]=l||t&&t[jr]||null,d[ut]=s,d[sa]=hI(),d[Vo]=u,d[Om]=c,d[bt]=e.type==2?t[bt]:d,d}function Qi(t,e,n,r,i){let s=t.data[e];if(s===null)s=KI(t,e,n,r,i),jb()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=Pb();s.injectorIndex=o===null?-1:o.injectorIndex}return Un(s,!0),s}function KI(t,e,n,r,i){let s=Qm(),o=xu(),a=o?s:s&&s.parent,l=t.data[e]=eS(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function jy(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Vy(t,e,n,r,i){let s=qr(),o=r&2;try{Ln(-1),o&&e.length>Ut&&Fy(t,e,Ut,!1),wt(o?2:0,i),n(r,i)}finally{Ln(s),wt(o?3:1,i)}}function Wu(t,e,n){if(Nu(e)){let r=Q(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{Q(r)}}}function qu(t,e,n){Wm()&&(aS(t,e,n,dt(n,e)),(n.flags&64)===64&&Uy(t,e,n))}function Gu(t,e,n=dt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function By(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Qu(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Qu(t,e,n,r,i,s,o,a,l,c,u){let d=Ut+r,f=d+i,h=YI(d,f),p=typeof c=="function"?c():c;return h[z]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function YI(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:fn);return n}function ZI(t,e,n,r){let s=r.get(EI,Sy)||n===Ct.ShadowDom,o=t.selectRootElement(e,s);return XI(o),o}function XI(t){JI(t)}var JI=()=>null;function eS(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return xb()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Ug(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,l=Lr.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(i!==null){if(!i.hasOwnProperty(s))continue;c=i[s]}t===0?Hg(r,n,c,a,l):Hg(r,n,c,a)}return r}function Hg(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function tS(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],l=null,c=null;for(let u=r;u<i;u++){let d=s[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;l=Ug(0,d.inputs,u,l,h),c=Ug(1,d.outputs,u,c,p);let g=l!==null&&o!==null&&!bu(e)?mS(l,u,o):null;a.push(g)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function nS(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function rS(t,e,n,r,i,s,o,a){let l=dt(e,n),c=e.inputs,u;!a&&c!=null&&(u=c[r])?(Yu(t,n,u,r,i),oa(e)&&iS(n,e.index)):e.type&3?(r=nS(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)):e.type&12}function iS(t,e){let n=$n(e,t);n[T]&16||(n[T]|=64)}function Ku(t,e,n,r){if(Wm()){let i=r===null?null:{"":-1},s=cS(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&$y(t,e,n,o,i,a),i&&uS(n,r,i)}n.mergedAttrs=Cu(n.mergedAttrs,n.attrs)}function $y(t,e,n,r,i,s){for(let c=0;c<r.length;c++)nI(uy(n,e),t,r[c].type);fS(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=jy(t,e,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];n.mergedAttrs=Cu(n.mergedAttrs,u.hostAttrs),hS(t,n,e,l,u),dS(l,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}tS(t,n,s)}function sS(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;oS(o)!=a&&o.push(a),o.push(n,r,s)}}function oS(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function aS(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;oa(n)&&pS(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||uy(n,e),an(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let l=t.data[a],c=Vi(e,t,a,n);if(an(c,e),o!==null&&gS(e,a-i,c,l,n,o),Gi(l)){let u=$n(n.index,e);u[ct]=Vi(e,t,a,n)}}}function Uy(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Bb();try{Ln(s);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];Wc(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&lS(l,c)}}finally{Ln(-1),Wc(o)}}function lS(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function cS(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(JC(e,o.selectors,!1))if(r||(r=[]),Gi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let l=a.length;eu(t,e,l)}else r.unshift(o),eu(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function eu(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function uS(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new y(-301,!1);r.push(e[i],s)}}}function dS(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Gi(e)&&(n[""]=t)}}function fS(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function hS(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=kr(i.type,!0)),o=new ji(s,Gi(i),Tt);t.blueprint[r]=o,n[r]=o,sS(t,e,r,jy(t,n,i.hostVars,fn),i)}function pS(t,e,n){let r=dt(e,t),i=By(n),s=t[$t].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=wa(t,_a(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function gS(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++],d=o[a++];Ly(r,n,l,c,u,d)}}function mS(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Hy(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function zy(t,e){let n=t.contentQueries;if(n!==null){let r=Q(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Xm(s),a.contentQueries(2,e[o],o)}}}finally{Q(r)}}}function wa(t,e){return t[ki]?t[xg][lt]=e:t[ki]=e,t[xg]=e,e}function tu(t,e,n){Xm(0);let r=Q(null);try{e(t,n)}finally{Q(r)}}function yS(t){return t[Bo]??=[]}function vS(t){return t.cleanup??=[]}function Wy(t,e){let n=t[jr],r=n?n.get(Ht,null):null;r&&r.handleError(e)}function Yu(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],l=n[s++],c=e[o],u=t.data[o];Ly(u,c,r,a,l,i)}}function _S(t,e,n){let r=Bm(e,t);MI(t[Ie],r,n)}function wS(t,e){let n=$n(e,t),r=n[z];ES(r,n);let i=n[qt];i!==null&&n[Vo]===null&&(n[Vo]=Bu(i,n[jr])),Zu(r,n,n[ct])}function ES(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Zu(t,e,n){Ru(e);try{let r=t.viewQuery;r!==null&&tu(1,r,n);let i=t.template;i!==null&&Vy(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Br]?.finishViewCreation(t),t.staticContentQueries&&zy(t,e),t.staticViewQueries&&tu(2,t.viewQuery,n);let s=t.components;s!==null&&DS(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[T]&=-5,Ou()}}function DS(t,e){for(let n=0;n<e.length;n++)wS(t,e[n])}function CS(t,e,n,r){let i=Q(null);try{let s=e.tView,a=t[T]&4096?4096:16,l=_a(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];l[Vr]=c;let u=t[Br];return u!==null&&(l[Br]=u.createEmbeddedView(s)),Zu(s,l,n),l}finally{Q(i)}}function zg(t,e){return!e||e.firstChild===null||wy(t)}function bS(t,e,n,r=!0){let i=e[z];if(OI(i,e,t,n),r){let o=Jc(n,t),a=e[Ie],l=Hu(a,t[Fn]);l!==null&&xI(i,t[ut],a,e,l,o)}let s=e[Vo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Go(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(It(s)),Gt(s)&&IS(s,r);let o=n.type;if(o&8)Go(t,e,n.child,r);else if(o&32){let a=$u(n,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=Oy(e,n);if(Array.isArray(a))r.push(...a);else{let l=Li(e[bt]);Go(l[z],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function IS(t,e){for(let n=Ke;n<t.length;n++){let r=t[n],i=r[z].firstChild;i!==null&&Go(r[z],r,i,e)}t[Fn]!==t[qt]&&e.push(t[Fn])}var qy=[];function SS(t){return t[kn]??TS(t)}function TS(t){let e=qy.pop()??Object.create(NS);return e.lView=t,e}function MS(t){t.lView[kn]!==t&&(t.lView=null,qy.push(t))}var NS=se(E({},Hp),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ca(t.lView)},consumerOnSignalRead(){this.lView[kn]=this}}),AS=100;function Gy(t,e=!0,n=0){let r=t[$t],i=r.rendererFactory,s=!1;s||i.begin?.();try{xS(t,n)}catch(o){throw e&&Wy(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function xS(t,e){let n=Ym();try{Og(!0),nu(t,e);let r=0;for(;Fi(t);){if(r===AS)throw new y(103,!1);r++,nu(t,1)}}finally{Og(n)}}function RS(t,e,n,r){let i=e[T];if((i&256)===256)return;let s=!1,o=!1;!s&&e[$t].inlineEffectRunner?.flush(),Ru(e);let a=null,l=null;!s&&OS(t)&&(l=SS(e),a=zp(l));try{Um(e),Fb(t.bindingStartIndex),n!==null&&Vy(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let f=t.preOrderCheckHooks;f!==null&&xo(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Ro(e,f,0,null),Cc(e,0)}if(o||PS(e),Qy(e,0),t.contentQueries!==null&&zy(t,e),!s)if(c){let f=t.contentCheckHooks;f!==null&&xo(e,f)}else{let f=t.contentHooks;f!==null&&Ro(e,f,1),Cc(e,1)}QI(t,e);let u=t.components;u!==null&&Yy(e,u,0);let d=t.viewQuery;if(d!==null&&tu(2,d,r),!s)if(c){let f=t.viewCheckHooks;f!==null&&xo(e,f)}else{let f=t.viewHooks;f!==null&&Ro(e,f,2),Cc(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Dc]){for(let f of e[Dc])f();e[Dc]=null}s||(e[T]&=-73)}catch(c){throw s||ca(e),c}finally{l!==null&&(Wp(l,a),MS(l)),Ou()}}function OS(t){return t.type!==2}function Qy(t,e){for(let n=Dy(t);n!==null;n=Cy(n))for(let r=Ke;r<n.length;r++){let i=n[r];Ky(i,e)}}function PS(t){for(let e=Dy(t);e!==null;e=Cy(e)){if(!(e[T]&Ho.HasTransplantedViews))continue;let n=e[Uo];for(let r=0;r<n.length;r++){let i=n[r];Ib(i)}}}function kS(t,e,n){let r=$n(e,t);Ky(r,n)}function Ky(t,e){Au(t)&&nu(t,e)}function nu(t,e){let r=t[z],i=t[T],s=t[kn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Jl(s)),o||=!1,s&&(s.dirty=!1),t[T]&=-9217,o)RS(r,t,r.template,t[ct]);else if(i&8192){Qy(t,1);let a=r.components;a!==null&&Yy(t,a,1)}}function Yy(t,e,n){for(let r=0;r<e.length;r++)kS(t,e[r],n)}function Xu(t,e){let n=Ym()?64:1088;for(t[$t].changeDetectionScheduler?.notify(e);t;){t[T]|=n;let r=Li(t);if(Uc(t)&&!r)return t;t=r}return null}var Vn=class{get rootNodes(){let e=this._lView,n=e[z];return Go(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ct]}set context(e){this._lView[ct]=e}get destroyed(){return(this._lView[T]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ne];if(Gt(e)){let n=e[$o],r=n?n.indexOf(this):-1;r>-1&&(Xc(e,r),Lo(n,r))}this._attachedToViewContainer=!1}xy(this._lView[z],this._lView)}onDestroy(e){Hm(this._lView,e)}markForCheck(){Xu(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[T]&=-129}reattach(){zc(this._lView),this._lView[T]|=128}detectChanges(){this._lView[T]|=1024,Gy(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Uc(this._lView),n=this._lView[Vr];n!==null&&!e&&Uu(n,this._lView),Ny(this._lView[z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new y(902,!1);this._appRef=e;let n=Uc(this._lView),r=this._lView[Vr];r!==null&&!n&&Ay(r,this._lView),zc(this._lView)}},Ea=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jS;let t=e;return t})(),FS=Ea,LS=class extends FS{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=CS(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Vn(i)}};function jS(){return VS(Xe(),ce())}function VS(t,e){return t.type&4?new LS(e,t,ha(t,e)):null}var vB=new RegExp(`^(\\d+)*(${_I}|${vI})*(.*)`);var BS=()=>null;function Wg(t,e){return BS(t,e)}var Bi=class{},Zy=new R("",{providedIn:"root",factory:()=>!1});var Xy=new R(""),ru=class{},Qo=class{};function $S(t){let e=Error(`No component factory found for ${Re(t)}.`);return e[US]=t,e}var US="ngComponent";var iu=class{resolveComponentFactory(e){throw $S(e)}},fd=class fd{};fd.NULL=new iu;var Ur=fd,ln=class{};var HS=(()=>{let e=class e{};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Mc={};var qg=new Set;function Ju(t){qg.has(t)||(qg.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Jy(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof Dt.requestAnimationFrame=="function"&&Dt.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function Gg(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function Qg(...t){}var te=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new we(!1),this.onMicrotaskEmpty=new we(!1),this.onStable=new we(!1),this.onError=new we(!1),typeof Zone>"u")throw new y(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,qS(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new y(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new y(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,zS,Qg,Qg);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},zS={};function ed(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function WS(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{Jy(()=>{t.callbackScheduled=!1,su(t),t.isCheckStableRunning=!0,ed(t),t.isCheckStableRunning=!1})}),su(t))}function qS(t){let e=()=>{WS(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(GS(a))return n.invokeTask(i,s,o,a);try{return Kg(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Yg(t)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return Kg(t),n.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!QS(a)&&e(),Yg(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,su(t),ed(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function su(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Kg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Yg(t){t._nesting--,ed(t)}var ou=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new we,this.onMicrotaskEmpty=new we,this.onStable=new we,this.onError=new we}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function GS(t){return ev(t,"__ignore_ng_zone__")}function QS(t){return ev(t,"__scheduler_tick__")}function ev(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var tv=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Ko(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Oc(i,a);else if(s==2){let l=a,c=e[++o];r=Oc(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Yo=class extends Ur{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Pn(e);return new $i(n,this.ngModule)}};function Zg(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function KS(t){let e=t.toLowerCase();return e==="svg"?Vm:e==="math"?Cb:null}var au=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=na(r);let i=this.injector.get(e,Mc,r);return i!==Mc||n===Mc?i:this.parentInjector.get(e,n,r)}},$i=class extends Qo{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Zg(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Zg(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=rb(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=Q(null);try{i=i||this.ngModule;let o=i instanceof Ye?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new au(e,o):e,l=a.get(ln,null);if(l===null)throw new y(407,!1);let c=a.get(HS,null),u=a.get(tv,null),d=a.get(Bi,null),f={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},h=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=r?ZI(h,r,this.componentDef.encapsulation,a):My(h,p,KS(p)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let C=null;g!==null&&(C=Bu(g,a,!0));let U=Qu(0,null,null,1,0,null,null,null,null,null,null),P=_a(null,U,null,v,null,null,f,h,a,null,C);Ru(P);let Y,Le;try{let re=this.componentDef,ie,ge=null;re.findHostDirectiveDefs?(ie=[],ge=new Map,re.findHostDirectiveDefs(re,ie,ge),ie.push(re)):ie=[re];let jt=YS(P,g),Jt=ZS(jt,g,re,ie,P,f,h);Le=$m(U,Ut),g&&e0(h,re,g,r),n!==void 0&&t0(Le,this.ngContentSelectors,n),Y=JS(Jt,re,ie,ge,P,[n0]),Zu(U,P,null)}finally{Ou()}return new lu(this.componentType,Y,ha(Le,P),P,Le)}finally{Q(s)}}},lu=class extends ru{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Vn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Yu(s[z],s,i,e,n),this.previousInputValues.set(e,n);let o=$n(this._tNode.index,s);Xu(o,1)}}get injector(){return new On(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function YS(t,e){let n=t[z],r=Ut;return t[r]=e,Qi(n,r,2,"#host",null)}function ZS(t,e,n,r,i,s,o){let a=i[z];XS(r,t,e,o);let l=null;e!==null&&(l=Bu(e,i[jr]));let c=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=_a(i,By(n),null,u,i[t.index],t,s,c,null,null,l);return a.firstCreatePass&&eu(a,t,r.length-1),wa(i,d),i[t.index]=d}function XS(t,e,n,r){for(let i of t)e.mergedAttrs=Cu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ko(e,e.mergedAttrs,!0),n!==null&&ky(r,n,e))}function JS(t,e,n,r,i,s){let o=Xe(),a=i[z],l=dt(o,i);$y(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,f=Vi(i,a,d,o);an(f,i)}Uy(a,i,o),l&&an(l,i);let c=Vi(i,a,o.directiveStart+o.componentOffset,o);if(t[ct]=i[ct]=c,s!==null)for(let u of s)u(c,e);return Wu(a,o,i),c}function e0(t,e,n,r){if(r)Lc(t,n,["ng-version","18.0.2"]);else{let{attrs:i,classes:s}=ib(e.selectors[0]);i&&Lc(t,n,i),s&&s.length>0&&Py(t,n,s.join(" "))}}function t0(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function n0(){let t=Xe();fa(ce()[z],t)}var Kr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=r0;let t=e;return t})();function r0(){let t=Xe();return s0(t,ce())}var i0=Kr,nv=class extends i0{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ha(this._hostTNode,this._hostLView)}get injector(){return new On(this._hostTNode,this._hostLView)}get parentInjector(){let e=ku(this._hostTNode,this._hostLView);if(ay(e)){let n=Wo(e,this._hostLView),r=zo(e),i=n[z].data[r+8];return new On(i,n)}else return new On(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Xg(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ke}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Wg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,zg(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!_b(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let l=o?e:new $i(Pn(e)),c=r||this.parentInjector;if(!s&&l.ngModule==null){let g=(o?c:this.parentInjector).get(Ye,null);g&&(s=g)}let u=Pn(l.componentType??{}),d=Wg(this._lContainer,u?.id??null),f=d?.firstChild??null,h=l.create(c,i,f,s);return this.insertImpl(h.hostView,a,zg(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(bb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Ne],c=new nv(l,l[ut],l[Ne]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return bS(o,i,s,r),e.attachToViewContainerRef(),_m(Nc(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Xg(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Xc(this._lContainer,n);r&&(Lo(Nc(this._lContainer),n),xy(r[z],r))}detach(e){let n=this._adjustIndex(e,-1),r=Xc(this._lContainer,n);return r&&Lo(Nc(this._lContainer),n)!=null?new Vn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Xg(t){return t[$o]}function Nc(t){return t[$o]||(t[$o]=[])}function s0(t,e){let n,r=e[t.index];return Gt(r)?n=r:(n=Hy(r,e,null,t),e[t.index]=n,wa(e,n)),a0(n,e,t,r),new nv(n,t,e)}function o0(t,e){let n=t[Ie],r=n.createComment(""),i=dt(e,t),s=Hu(n,i);return qo(n,s,r,VI(n,i),!1),r}var a0=u0,l0=()=>!1;function c0(t,e,n){return l0(t,e,n)}function u0(t,e,n,r){if(t[Fn])return;let i;n.type&8?i=It(r):i=o0(e,n),t[Fn]=i}var cn=class{},Ui=class{};var cu=class extends cn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Yo(this);let i=Tm(e);this._bootstrapComponents=Ty(i.bootstrap),this._r3Injector=yy(e,n,[{provide:cn,useValue:this},{provide:Ur,useValue:this.componentFactoryResolver},...r],Re(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},uu=class extends Ui{constructor(e){super(),this.moduleType=e}create(e){return new cu(this.moduleType,e,[])}};var Zo=class extends cn{constructor(e){super(),this.componentFactoryResolver=new Yo(this),this.instance=null;let n=new Pi([...e.providers,{provide:cn,useValue:this},{provide:Ur,useValue:this.componentFactoryResolver}],e.parent||Mu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function td(t,e,n=null){return new Zo({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ki=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ve(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rv(t){return f0(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function d0(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function f0(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function h0(t,e,n){return t[e]=n}function Da(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function p0(t){return(t.flags&32)===32}function g0(t,e,n,r,i,s,o,a,l){let c=e.consts,u=Qi(e,t,4,o||null,a||null);Ku(e,n,u,$r(c,l)),fa(e,u);let d=u.tView=Qu(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function m0(t,e,n,r,i,s,o,a,l,c){let u=n+Ut,d=e.firstCreatePass?g0(u,e,t,r,i,s,o,a,l):e.data[u];Un(d,!1);let f=y0(e,t,d,n);ua()&&ya(e,t,f,d),an(f,t);let h=Hy(f,t,f,d);return t[u]=h,wa(t,h),c0(h,d,t),aa(d)&&qu(e,t,d),l!=null&&Gu(t,d,c),d}function Yr(t,e,n,r,i,s,o,a){let l=ce(),c=St(),u=$r(c.consts,s);return m0(l,c,t,e,n,r,i,u,o,a),Yr}var y0=v0;function v0(t,e,n,r){return da(!0),e[Ie].createComment("")}function _0(t,e,n,r){return Da(t,Zm(),n)?e+pm(n)+r:fn}function No(t,e){return t<<17|e<<2}function Bn(t){return t>>17&32767}function w0(t){return(t&2)==2}function E0(t,e){return t&131071|e<<17}function du(t){return t|2}function Hr(t){return(t&131068)>>2}function Ac(t,e){return t&-131069|e<<2}function D0(t){return(t&1)===1}function fu(t){return t|1}function C0(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Bn(o),l=Hr(o);t[r]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Wi(d,u)>0)&&(c=!0)}else u=n;if(i)if(l!==0){let f=Bn(t[a+1]);t[r+1]=No(f,a),f!==0&&(t[f+1]=Ac(t[f+1],r)),t[a+1]=E0(t[a+1],r)}else t[r+1]=No(a,0),a!==0&&(t[a+1]=Ac(t[a+1],r)),a=r;else t[r+1]=No(l,0),a===0?a=r:t[l+1]=Ac(t[l+1],r),l=r;c&&(t[r+1]=du(t[r+1])),Jg(t,u,r,!0),Jg(t,u,r,!1),b0(e,u,t,r,s),o=No(a,l),s?e.classBindings=o:e.styleBindings=o}function b0(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Wi(s,e)>=0&&(n[r+1]=fu(n[r+1]))}function Jg(t,e,n,r){let i=t[n+1],s=e===null,o=r?Bn(i):Hr(i),a=!1;for(;o!==0&&(a===!1||s);){let l=t[o],c=t[o+1];I0(l,e)&&(a=!0,t[o+1]=r?fu(c):du(c)),o=r?Bn(c):Hr(c)}a&&(t[n+1]=r?du(i):fu(i))}function I0(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Wi(t,e)>=0:!1}var he={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function iv(t){return t.substring(he.key,he.keyEnd)}function S0(t){return t.substring(he.value,he.valueEnd)}function T0(t){return av(t),sv(t,zr(t,0,he.textEnd))}function sv(t,e){let n=he.textEnd;return n===e?-1:(e=he.keyEnd=N0(t,he.key=e,n),zr(t,e,n))}function M0(t){return av(t),ov(t,zr(t,0,he.textEnd))}function ov(t,e){let n=he.textEnd,r=he.key=zr(t,e,n);return n===r?-1:(r=he.keyEnd=A0(t,r,n),r=em(t,r,n,58),r=he.value=zr(t,r,n),r=he.valueEnd=x0(t,r,n),em(t,r,n,59))}function av(t){he.key=0,he.keyEnd=0,he.value=0,he.valueEnd=0,he.textEnd=t.length}function zr(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function N0(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function A0(t,e,n){let r;for(;e<n&&((r=t.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function em(t,e,n,r){return e=zr(t,e,n),e<n&&e++,e}function x0(t,e,n){let r=-1,i=-1,s=-1,o=e,a=o;for(;o<n;){let l=t.charCodeAt(o++);if(l===59)return a;l===34||l===39?a=o=tm(t,l,o,n):e===o-4&&s===85&&i===82&&r===76&&l===40?a=o=tm(t,41,o,n):l>32&&(a=o),s=i,i=r,r=l&-33}return a}function tm(t,e,n,r){let i=-1,s=n;for(;s<r;){let o=t.charCodeAt(s++);if(o==e&&i!==92)return s;o==92&&i===92?i=0:i=o}throw new Error}function hn(t,e,n){let r=ce(),i=Zm();if(Da(r,i,e)){let s=St(),o=zb();rS(s,o,r,t,e,r[Ie],n,!1)}return hn}function hu(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Yu(t,n,s[o],o,r)}function lv(t){cv(dv,R0,t,!1)}function R0(t,e){for(let n=M0(e);n>=0;n=ov(e,n))dv(t,iv(e),S0(e))}function nd(t){cv(B0,O0,t,!0)}function O0(t,e){for(let n=T0(e);n>=0;n=sv(e,n))ra(t,iv(e),!0)}function cv(t,e,n,r){let i=St(),s=Lb(2);i.firstUpdatePass&&P0(i,null,s,r);let o=ce();if(n!==fn&&Da(o,s,n)){let a=i.data[qr()];if(fv(a,r)&&!uv(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=Oc(l,n||"")),hu(i,a,o,n,r)}else $0(i,a,o,o[Ie],o[s+1],o[s+1]=V0(t,e,n),r,s)}}function uv(t,e){return e>=t.expandoStartIndex}function P0(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[qr()],o=uv(t,n);fv(s,r)&&e===null&&!o&&(e=!1),e=k0(i,s,e,r),C0(i,s,e,n,o,r)}}function k0(t,e,n,r){let i=$b(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=xc(null,t,e,n,r),n=Hi(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=xc(i,t,e,n,r),s===null){let l=F0(t,e,r);l!==void 0&&Array.isArray(l)&&(l=xc(null,t,e,l[1],r),l=Hi(l,e.attrs,r),L0(t,e,r,l))}else s=j0(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function F0(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Hr(r)!==0)return t[Bn(r)]}function L0(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Bn(i)]=r}function j0(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Hi(r,o,n)}return Hi(r,e.attrs,n)}function xc(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Hi(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Hi(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ra(t,o,n?!0:e[++s]))}return t===void 0?null:t}function V0(t,e,n){if(n==null||n==="")return Be;let r=[],i=ma(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function dv(t,e,n){ra(t,e,ma(n))}function B0(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&ra(t,r,n)}function $0(t,e,n,r,i,s,o,a){i===fn&&(i=Be);let l=0,c=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let f=l<i.length?i[l+1]:void 0,h=c<s.length?s[c+1]:void 0,p=null,g;u===d?(l+=2,c+=2,f!==h&&(p=d,g=h)):d===null||u!==null&&u<d?(l+=2,p=u):(c+=2,p=d,g=h),p!==null&&U0(t,e,n,r,p,g,o,a),u=l<i.length?i[l]:null,d=c<s.length?s[c]:null}}function U0(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=D0(c)?nm(l,e,n,i,Hr(c),o):void 0;if(!Xo(u)){Xo(s)||w0(c)&&(s=nm(l,null,n,i,a,o));let d=Bm(qr(),n);qI(r,o,d,i,s)}}function nm(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,f=n[i+1];f===fn&&(f=d?Be:void 0);let h=d?wc(f,r):u===r?f:void 0;if(c&&!Xo(h)&&(h=wc(l,r)),Xo(h)&&(a=h,o))return a;let p=t[i+1];i=o?Bn(p):Hr(p)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=wc(l,r))}return a}function Xo(t){return t!==void 0}function fv(t,e){return(t.flags&(e?8:16))!==0}function H0(t,e,n,r,i,s){let o=e.consts,a=$r(o,i),l=Qi(e,t,2,r,a);return Ku(e,n,l,$r(o,s)),l.attrs!==null&&Ko(l,l.attrs,!1),l.mergedAttrs!==null&&Ko(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function Ee(t,e,n,r){let i=ce(),s=St(),o=Ut+t,a=i[Ie],l=s.firstCreatePass?H0(o,s,i,e,n,r):s.data[o],c=z0(s,i,l,a,e,t);i[o]=c;let u=aa(l);return Un(l,!0),ky(a,c,l),!p0(l)&&ua()&&ya(s,i,c,l),Mb()===0&&an(c,i),Nb(),u&&(qu(s,i,l),Wu(s,l,i)),r!==null&&Gu(i,l),Ee}function $e(){let t=Xe();xu()?Km():(t=t.parent,Un(t,!1));let e=t;Rb(e)&&Ob(),Ab();let n=St();return n.firstCreatePass&&(fa(n,t),Nu(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Yb(e)&&hu(n,e,ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Zb(e)&&hu(n,e,ce(),e.stylesWithoutHost,!1),$e}function Je(t,e,n,r){return Ee(t,e,n,r),$e(),Je}var z0=(t,e,n,r,i,s)=>(da(!0),My(r,i,qb()));function W0(t,e,n,r,i){let s=e.consts,o=$r(s,r),a=Qi(e,t,8,"ng-container",o);o!==null&&Ko(a,o,!0);let l=$r(s,i);return Ku(e,n,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function rd(t,e,n){let r=ce(),i=St(),s=t+Ut,o=i.firstCreatePass?W0(s,i,r,e,n):i.data[s];Un(o,!0);let a=q0(i,r,o,t);return r[s]=a,ua()&&ya(i,r,a,o),an(a,r),aa(o)&&(qu(i,r,o),Wu(i,o,r)),n!=null&&Gu(r,o),rd}function id(){let t=Xe(),e=St();return xu()?Km():(t=t.parent,Un(t,!1)),e.firstCreatePass&&(fa(e,t),Nu(t)&&e.queries.elementEnd(t)),id}var q0=(t,e,n,r)=>(da(!0),NI(e[Ie],""));function hv(){return ce()}var Jo="en-US";var G0=Jo;function Q0(t){typeof t=="string"&&(G0=t.toLowerCase().replace(/_/g,"-"))}var K0=(t,e,n)=>{};function Zr(t,e,n,r){let i=ce(),s=St(),o=Xe();return Z0(s,i,i[Ie],o,t,e,r),Zr}function Y0(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Bo],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function Z0(t,e,n,r,i,s,o){let a=aa(r),c=t.firstCreatePass&&vS(t),u=e[ct],d=yS(e),f=!0;if(r.type&3||o){let g=dt(r,e),v=o?o(g):g,C=d.length,U=o?Y=>o(It(Y[r.index])):r.index,P=null;if(!o&&a&&(P=Y0(t,e,i,r.index)),P!==null){let Y=P.__ngLastListenerFn__||P;Y.__ngNextListenerFn__=s,P.__ngLastListenerFn__=s,f=!1}else{s=im(r,e,u,s),K0(g,i,s);let Y=n.listen(v,i,s);d.push(s,Y),c&&c.push(i,U,C,C+1)}}else s=im(r,e,u,s);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let g=p.length;if(g)for(let v=0;v<g;v+=2){let C=p[v],U=p[v+1],Le=e[C][U].subscribe(s),re=d.length;d.push(s,Le),c&&c.push(i,r.index,re,-(re+1))}}}function rm(t,e,n,r){let i=Q(null);try{return wt(6,e,n),n(r)!==!1}catch(s){return Wy(t,s),!1}finally{wt(7,e,n),Q(i)}}function im(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?$n(t.index,e):e;Xu(o,5);let a=rm(e,n,r,s),l=i.__ngNextListenerFn__;for(;l;)a=rm(e,n,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function Xr(t=1){return Hb(t)}function pv(t,e=""){let n=ce(),r=St(),i=t+Ut,s=r.firstCreatePass?Qi(r,i,1,e,null):r.data[i],o=X0(r,n,s,e,t);n[i]=o,ua()&&ya(r,n,o,s),Un(s,!1)}var X0=(t,e,n,r,i)=>(da(!0),TI(e[Ie],r));function sd(t,e,n){let r=ce(),i=_0(r,t,e,n);return i!==fn&&_S(r,qr(),i),sd}var J0=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Am(!1,r.type),s=i.length>0?td([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=I({token:e,providedIn:"environment",factory:()=>new e(M(Ye))});let t=e;return t})();function et(t){Ju("NgStandalone"),t.getStandaloneInjector=e=>e.get(J0).getOrCreateStandaloneInjector(t)}function gv(t,e,n,r){return tT(ce(),kb(),t,e,n,r)}function eT(t,e){let n=t[e];return n===fn?void 0:n}function tT(t,e,n,r,i,s){let o=e+n;return Da(t,o,i)?h0(t,o+1,s?r.call(s,i):r(i)):eT(t,o+1)}var Ca=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var od=new R(""),Yi=new R(""),ba=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,ad||(nT(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{te.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(M(te),M(Ia),M(Yi))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Ia=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return ad?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function nT(t){ad=t}var ad;function Zi(t){return!!t&&typeof t.then=="function"}function mv(t){return!!t&&typeof t.subscribe=="function"}var yv=new R(""),vv=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=_(yv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Zi(o))r.push(o);else if(mv(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ld=new R("");function rT(){Gp(()=>{throw new y(600,!1)})}function iT(t){return t.isBoundToModule}var sT=10;function oT(t,e,n){try{let r=n();return Zi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Hn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_(vy),this.afterRenderEffectManager=_(tv),this.zonelessEnabled=_(Zy),this.externalTestViews=new Set,this.beforeRender=new Te,this.afterTick=new Te,this.componentTypes=[],this.components=[],this.isStable=_(Ki).hasPendingTasks.pipe(L(r=>!r)),this._injector=_(Ye)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Qo;if(!this._injector.get(vv).done){let h=!s&&Sm(r),p=!1;throw new y(405,p)}let a;s?a=r:a=this._injector.get(Ur).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=iT(a)?void 0:this._injector.get(cn),c=i||a.selector,u=a.create(jn.NULL,[],c,l),d=u.location.nativeElement,f=u.injector.get(od,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Rc(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new y(101,!1);let i=Q(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,Q(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(ln,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<sT;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:l,notifyErrorHandler:c}of this._views)aT(l,c,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:l})=>Fi(l))&&(o.execute(),!this.allViews.some(({_lView:l})=>Fi(l))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Rc(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ld,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Rc(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new y(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Rc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function aT(t,e,n,r){if(!n&&!Fi(t))return;Gy(t,e,n&&!r?0:1)}var pu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},cd=(()=>{let e=class e{compileModuleSync(r){return new uu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Tm(r),o=Ty(s.declarations).reduce((a,l)=>{let c=Pn(l);return c&&a.push(new $i(c)),a},[]);return new pu(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var lT=(()=>{let e=class e{constructor(){this.zone=_(te),this.changeDetectionScheduler=_(Bi),this.applicationRef=_(Hn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cT({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new te(dT()),[{provide:te,useFactory:t},{provide:Fr,multi:!0,useFactory:()=>{let n=_(lT,{optional:!0});return()=>n.initialize()}},{provide:Fr,multi:!0,useFactory:()=>{let n=_(fT);return()=>{n.initialize()}}},{provide:vy,useFactory:uT},e===!0?{provide:Xy,useValue:!0}:[]]}function uT(){let t=_(te),e=_(Ht);return n=>t.runOutsideAngular(()=>e.handleError(n))}function dT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var fT=(()=>{let e=class e{constructor(){this.subscription=new ue,this.initialized=!1,this.zone=_(te),this.pendingTasks=_(Ki)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{te.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{te.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hT=(()=>{let e=class e{constructor(){this.appRef=_(Hn),this.taskService=_(Ki),this.ngZone=_(te),this.zonelessEnabled=_(Zy),this.disableScheduling=_(Xy,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ue,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ou||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?Gg:Jy;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&te.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Gg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pT(){return typeof $localize<"u"&&$localize.locale||Jo}var ud=new R("",{providedIn:"root",factory:()=>_(ud,k.Optional|k.SkipSelf)||pT()});var _v=new R("");var Po=null;function gT(t=[],e){return jn.create({name:e,providers:[{provide:ia,useValue:"platform"},{provide:_v,useValue:new Set([()=>Po=null])},...t]})}function mT(t=[]){if(Po)return Po;let e=gT(t);return Po=e,rT(),yT(e),e}function yT(t){t.get(Lu,null)?.forEach(n=>n())}var Xi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=vT;let t=e;return t})();function vT(t){return _T(Xe(),ce(),(t&16)===16)}function _T(t,e,n){if(oa(t)&&!n){let r=$n(t.index,e);return new Vn(r,r)}else if(t.type&47){let r=e[bt];return new Vn(r,e)}return null}var gu=class{constructor(){}supports(e){return rv(e)}create(e){return new mu(e)}},wT=(t,e)=>e,mu=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||wT}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<sm(r,i,s)?n:r,a=sm(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let c=a-i,u=l-i;if(c!=u){for(let f=0;f<c;f++){let h=f<s.length?s[f]:s[f]=0,p=h+f;u<=p&&p<c&&(s[f]=h+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!rv(e))throw new y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,d0(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new yu(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new ea),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ea),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},yu=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},vu=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},ea=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new vu,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function sm(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function om(){return new dd([new gu])}var dd=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||om()),deps:[[e,new vm,new Eu]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new y(901,!1)}};e.\u0275prov=I({token:e,providedIn:"root",factory:om});let t=e;return t})();var wv=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(M(Hn))},e.\u0275mod=dn({type:e}),e.\u0275inj=un({});let t=e;return t})();function Ev(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=mT(r),s=[cT({}),{provide:Bi,useExisting:hT},...n||[]],a=new Zo({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(te);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(Ht,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:h=>{c.handleError(h)}})});let d=()=>a.destroy(),f=i.get(_v);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),oT(c,l,()=>{let h=a.get(vv);return h.runInitializers(),h.donePromise.then(()=>{let p=a.get(ud,Jo);Q0(p||Jo);let g=a.get(Hn);return e!==void 0&&g.bootstrap(e),g})})})}catch(e){return Promise.reject(e)}}var Mv=null;function Wn(){return Mv}function Nv(t){Mv??=t}var Sa=class{};var Oe=new R(""),Av=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(bT),providedIn:"platform"});let t=e;return t})();var bT=(()=>{let e=class e extends Av{constructor(){super(),this._doc=_(Oe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wn().getBaseHref(this._doc)}onPopState(r){let i=Wn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Wn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function xv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Dv(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function zn(t){return t&&t[0]!=="?"?"?"+t:t}var Ma=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(Rv),providedIn:"root"});let t=e;return t})(),IT=new R(""),Rv=(()=>{let e=class e extends Ma{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??_(Oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return xv(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+zn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+zn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+zn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(M(Av),M(IT,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ji=(()=>{let e=class e{constructor(r){this._subject=new we,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=MT(Dv(Cv(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+zn(i))}normalize(r){return e.stripTrailingSlash(TT(this._basePath,Cv(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+zn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+zn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=zn,e.joinWithSlash=xv,e.stripTrailingSlash=Dv,e.\u0275fac=function(i){return new(i||e)(M(Ma))},e.\u0275prov=I({token:e,factory:()=>ST(),providedIn:"root"});let t=e;return t})();function ST(){return new Ji(M(Ma))}function TT(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Cv(t){return t.replace(/\/index.html$/,"")}function MT(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Ov(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var hd=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Pv=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new hd(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),bv(l,s)}});for(let s=0,o=i.length;s<o;s++){let l=i.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);bv(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Tt(Kr),Tt(Ea),Tt(dd))},e.\u0275dir=qi({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function bv(t,e){t.context.$implicit=e.item}var Na=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new pd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Iv("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Iv("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Tt(Kr),Tt(Ea))},e.\u0275dir=qi({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),pd=class{constructor(){this.$implicit=null,this.ngIf=null}};function Iv(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Re(e)}'.`)}var pn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=dn({type:e}),e.\u0275inj=un({});let t=e;return t})(),kv="browser",NT="server";function gd(t){return t===NT}var Ta=class{};var vd=class extends Sa{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_d=class t extends vd{static makeCurrent(){Nv(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=AT();return n==null?null:xT(n)}resetBaseElement(){es=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ov(document.cookie,e)}},es=null;function AT(){return es=es||document.querySelector("base"),es?es.getAttribute("href"):null}function xT(t){return new URL(t,document.baseURI).pathname}var wd=class{addToWindow(e){Dt.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new y(5103,!1);return s},Dt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Dt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Dt.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Dt.frameworkStabilizers||(Dt.frameworkStabilizers=[]),Dt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Wn().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},RT=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Ed=new R(""),Vv=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new y(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(M(Ed),M(te))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Aa=class{constructor(e){this._doc=e}},md="ng-app-id",Bv=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gd(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${md}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(md),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(md,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(M(Oe),M(ga),M(Vu,8),M(Gr))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),yd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Cd=/%COMP%/g,$v="%COMP%",OT=`_nghost-${$v}`,PT=`_ngcontent-${$v}`,kT=!0,FT=new R("",{providedIn:"root",factory:()=>kT});function LT(t){return PT.replace(Cd,t)}function jT(t){return OT.replace(Cd,t)}function Uv(t,e){return e.map(n=>n.replace(Cd,t))}var xa=(()=>{let e=class e{constructor(r,i,s,o,a,l,c,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=gd(l),this.defaultRenderer=new ts(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ct.ShadowDom&&(i=se(E({},i),{encapsulation:Ct.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Ra?s.applyToHost(r):s instanceof ns&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Ct.Emulated:o=new Ra(c,u,i,this.appId,d,a,l,f);break;case Ct.ShadowDom:return new Dd(c,u,r,i,a,l,this.nonce,f);default:o=new ns(c,u,i,d,a,l,f);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(M(Vv),M(Bv),M(ga),M(FT),M(Oe),M(Gr),M(te),M(Vu))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),ts=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(yd[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Lv(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Lv(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new y(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=yd[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=yd[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(zt.DashCase|zt.Important)?e.style.setProperty(n,r,i&zt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&zt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Wn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Lv(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Dd=class extends ts{constructor(e,n,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Uv(i.id,i.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ns=class extends ts{constructor(e,n,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?Uv(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ra=class extends ns{constructor(e,n,r,i,s,o,a,l){let c=i+"-"+r.id;super(e,n,r,s,o,a,l,c),this.contentAttr=LT(c),this.hostAttr=jT(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},VT=(()=>{let e=class e extends Aa{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(M(Oe))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),jv=["alt","control","meta","shift"],BT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$T={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},UT=(()=>{let e=class e extends Aa{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),jv.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=BT[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),jv.forEach(a=>{if(a!==s){let l=$T[a];l(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(M(Oe))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function Hv(t,e){return Ev(E({rootComponent:t},HT(e)))}function HT(t){return{appProviders:[...zv,...t?.providers??[]],platformProviders:GT}}function zT(){_d.makeCurrent()}function WT(){return new Ht}function qT(){return Iy(document),document}var GT=[{provide:Gr,useValue:kv},{provide:Lu,useValue:zT,multi:!0},{provide:Oe,useFactory:qT,deps:[]}];var QT=new R(""),KT=[{provide:Yi,useClass:wd,deps:[]},{provide:od,useClass:ba,deps:[te,Ia,Yi]},{provide:ba,useClass:ba,deps:[te,Ia,Yi]}],zv=[{provide:ia,useValue:"root"},{provide:Ht,useFactory:WT,deps:[]},{provide:Ed,useClass:VT,multi:!0,deps:[Oe,te,Gr]},{provide:Ed,useClass:UT,multi:!0,deps:[Oe]},xa,Bv,Vv,{provide:ln,useExisting:xa},{provide:Ta,useClass:RT,deps:[]},[]],Wv=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:ga,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(M(QT,12))},e.\u0275mod=dn({type:e}),e.\u0275inj=un({providers:[...zv,...KT],imports:[pn,wv]});let t=e;return t})();var qv=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(M(Oe))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var O="primary",_s=Symbol("RouteTitle"),Md=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ii(t){return new Md(t)}function ZT(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function XT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Mt(t[n],e[n]))return!1;return!0}function Mt(t,e){let n=t?Nd(t):void 0,r=e?Nd(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!e_(t[i],e[i]))return!1;return!0}function Nd(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function e_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function t_(t){return t.length>0?t[t.length-1]:null}function mn(t){return fc(t)?t:Zi(t)?fe(Promise.resolve(t)):N(t)}var JT={exact:r_,subset:i_},n_={exact:eM,subset:tM,ignored:()=>!0};function Gv(t,e,n){return JT[n.paths](t.root,e.root,n.matrixParams)&&n_[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function eM(t,e){return Mt(t,e)}function r_(t,e,n){if(!Gn(t.segments,e.segments)||!ka(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!r_(t.children[r],e.children[r],n))return!1;return!0}function tM(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e_(t[n],e[n]))}function i_(t,e,n){return s_(t,e,e.segments,n)}function s_(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Gn(i,n)||e.hasChildren()||!ka(i,n,r))}else if(t.segments.length===n.length){if(!Gn(t.segments,n)||!ka(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!i_(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Gn(t.segments,i)||!ka(t.segments,i,r)||!t.children[O]?!1:s_(t.children[O],e,s,r)}}function ka(t,e,n){return e.every((r,i)=>n_[n](t[i].parameters,r.parameters))}var gn=class{constructor(e=new K([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ii(this.queryParams),this._queryParamMap}toString(){return iM.serialize(this)}},K=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fa(this)}},qn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ii(this.parameters),this._parameterMap}toString(){return a_(this)}};function nM(t,e){return Gn(t,e)&&t.every((n,r)=>Mt(n.parameters,e[r].parameters))}function Gn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function rM(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===O&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==O&&(n=n.concat(e(i,r)))}),n}var tf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new cs,providedIn:"root"});let t=e;return t})(),cs=class{parse(e){let n=new xd(e);return new gn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${rs(e.root,!0)}`,r=aM(e.queryParams),i=typeof e.fragment=="string"?`#${sM(e.fragment)}`:"";return`${n}${r}${i}`}},iM=new cs;function Fa(t){return t.segments.map(e=>a_(e)).join("/")}function rs(t,e){if(!t.hasChildren())return Fa(t);if(e){let n=t.children[O]?rs(t.children[O],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==O&&r.push(`${i}:${rs(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=rM(t,(r,i)=>i===O?[rs(t.children[O],!1)]:[`${i}:${rs(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[O]!=null?`${Fa(t)}/${n[0]}`:`${Fa(t)}/(${n.join("//")})`}}function o_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oa(t){return o_(t).replace(/%3B/gi,";")}function sM(t){return encodeURI(t)}function Ad(t){return o_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function La(t){return decodeURIComponent(t)}function Qv(t){return La(t.replace(/\+/g,"%20"))}function a_(t){return`${Ad(t.path)}${oM(t.parameters)}`}function oM(t){return Object.entries(t).map(([e,n])=>`;${Ad(e)}=${Ad(n)}`).join("")}function aM(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Oa(n)}=${Oa(i)}`).join("&"):`${Oa(n)}=${Oa(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var lM=/^[^\/()?;#]+/;function bd(t){let e=t.match(lM);return e?e[0]:""}var cM=/^[^\/()?;=#]+/;function uM(t){let e=t.match(cM);return e?e[0]:""}var dM=/^[^=?&#]+/;function fM(t){let e=t.match(dM);return e?e[0]:""}var hM=/^[^&#]+/;function pM(t){let e=t.match(hM);return e?e[0]:""}var xd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new K([],{}):new K([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[O]=new K(e,n)),r}parseSegment(){let e=bd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new y(4009,!1);return this.capture(e),new qn(La(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=uM(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=bd(this.remaining);i&&(r=i,this.capture(r))}e[La(n)]=La(r)}parseQueryParam(e){let n=fM(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=pM(this.remaining);o&&(r=o,this.capture(r))}let i=Qv(n),s=Qv(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=bd(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new y(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=O);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[O]:new K([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new y(4011,!1)}};function l_(t){return t.segments.length>0?new K([],{[O]:t}):t}function c_(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=c_(i);if(r===O&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new K(t.segments,e);return gM(n)}function gM(t){if(t.numberOfChildren===1&&t.children[O]){let e=t.children[O];return new K(t.segments.concat(e.segments),e.children)}return t}function us(t){return t instanceof gn}function mM(t,e,n=null,r=null){let i=u_(t);return d_(i,e,n,r)}function u_(t){let e;function n(s){let o={};for(let l of s.children){let c=n(l);o[l.outlet]=c}let a=new K(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=l_(r);return e??i}function d_(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Id(i,i,i,n,r);let s=yM(e);if(s.toRoot())return Id(i,i,new K([],{}),n,r);let o=vM(s,i,t),a=o.processChildren?os(o.segmentGroup,o.index,s.commands):h_(o.segmentGroup,o.index,s.commands);return Id(i,o.segmentGroup,a,n,r)}function ja(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ds(t){return typeof t=="object"&&t!=null&&t.outlets}function Id(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;t===e?o=n:o=f_(t,e,n);let a=l_(c_(o));return new gn(a,s,i)}function f_(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=f_(s,e,n)}),new K(t.segments,r)}var Va=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ja(r[0]))throw new y(4003,!1);let i=r.find(ds);if(i&&i!==t_(r))throw new y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yM(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Va(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Va(n,e,r)}var ti=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function vM(t,e,n){if(t.isAbsolute)return new ti(e,!0,0);if(!n)return new ti(e,!1,NaN);if(n.parent===null)return new ti(n,!0,0);let r=ja(t.commands[0])?0:1,i=n.segments.length-1+r;return _M(n,i,t.numberOfDoubleDots)}function _M(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new y(4005,!1);i=r.segments.length}return new ti(r,!1,i-s)}function wM(t){return ds(t[0])?t[0].outlets:{[O]:t}}function h_(t,e,n){if(t??=new K([],{}),t.segments.length===0&&t.hasChildren())return os(t,e,n);let r=EM(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new K(t.segments.slice(0,r.pathIndex),{});return s.children[O]=new K(t.segments.slice(r.pathIndex),t.children),os(s,0,i)}else return r.match&&i.length===0?new K(t.segments,{}):r.match&&!t.hasChildren()?Rd(t,e,n):r.match?os(t,0,i):Rd(t,e,n)}function os(t,e,n){if(n.length===0)return new K(t.segments,{});{let r=wM(n),i={};if(Object.keys(r).some(s=>s!==O)&&t.children[O]&&t.numberOfChildren===1&&t.children[O].segments.length===0){let s=os(t.children[O],e,n);return new K(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=h_(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new K(t.segments,i)}}function EM(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ds(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Yv(l,c,o))return s;r+=2}else{if(!Yv(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Rd(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ds(s)){let l=DM(s.outlets);return new K(r,l)}if(i===0&&ja(n[0])){let l=t.segments[e];r.push(new qn(l.path,Kv(n[0]))),i++;continue}let o=ds(s)?s.outlets[O]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ja(a)?(r.push(new qn(o,Kv(a))),i+=2):(r.push(new qn(o,{})),i++)}return new K(r,{})}function DM(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Rd(new K([],{}),0,r))}),e}function Kv(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Yv(t,e,n){return t==n.path&&Mt(e,n.parameters)}var as="imperative",De=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(De||{}),tt=class{constructor(e,n){this.id=e,this.url=n}},fs=class extends tt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=De.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qn=class extends tt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=De.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},He=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(He||{}),Od=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Od||{}),Qt=class extends tt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=De.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Kn=class extends tt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=De.NavigationSkipped}},hs=class extends tt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=De.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ba=class extends tt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=De.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pd=class extends tt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=De.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kd=class extends tt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=De.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fd=class extends tt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=De.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ld=class extends tt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=De.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jd=class{constructor(e){this.route=e,this.type=De.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Vd=class{constructor(e){this.route=e,this.type=De.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Bd=class{constructor(e){this.snapshot=e,this.type=De.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$d=class{constructor(e){this.snapshot=e,this.type=De.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ud=class{constructor(e){this.snapshot=e,this.type=De.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hd=class{constructor(e){this.snapshot=e,this.type=De.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ps=class{},si=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var zd=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new Ga(this.injector),this.attachRef=null}},Ga=(()=>{let e=class e{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new zd(this.parentInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(M(Ye))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$a=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Wd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Wd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=qd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qd(e,this._root).map(n=>n.value)}};function Wd(t,e){if(t===e.value)return e;for(let n of e.children){let r=Wd(t,n);if(r)return r}return null}function qd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=qd(t,n);if(r.length)return r.unshift(e),r}return[]}var Ue=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ei(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ua=class extends $a{constructor(e,n){super(e),this.snapshot=n,nf(this,e)}toString(){return this.snapshot.toString()}};function p_(t){let e=CM(t),n=new ve([new qn("",{})]),r=new ve({}),i=new ve({}),s=new ve({}),o=new ve(""),a=new oi(n,r,s,o,i,O,t,e.root);return a.snapshot=e.root,new Ua(new Ue(a,[]),e)}function CM(t){let e={},n={},r={},i="",s=new ni([],e,r,i,n,O,t,null,{});return new za("",new Ue(s,[]))}var oi=class{constructor(e,n,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(L(c=>c[_s]))??N(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(L(e=>ii(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(L(e=>ii(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ha(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:E(E({},e.params),t.params),data:E(E({},e.data),t.data),resolve:E(E(E(E({},t.data),e.data),i?.data),t._resolvedData)}:r={params:E({},t.params),data:E({},t.data),resolve:E(E({},t.data),t._resolvedData??{})},i&&m_(i)&&(r.resolve[_s]=i.title),r}var ni=class{get title(){return this.data?.[_s]}constructor(e,n,r,i,s,o,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ii(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ii(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},za=class extends $a{constructor(e,n){super(n),this.url=e,nf(this,n)}toString(){return g_(this._root)}};function nf(t,e){e.value._routerState=t,e.children.forEach(n=>nf(t,n))}function g_(t){let e=t.children.length>0?` { ${t.children.map(g_).join(", ")} } `:"";return`${t.value}${e}`}function Sd(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Mt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Mt(e.params,n.params)||t.paramsSubject.next(n.params),XT(e.url,n.url)||t.urlSubject.next(n.url),Mt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Gd(t,e){let n=Mt(t.params,e.params)&&nM(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Gd(t.parent,e.parent))}function m_(t){return typeof t.title=="string"||t.title===null}var rf=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=O,this.activateEvents=new we,this.deactivateEvents=new we,this.attachEvents=new we,this.detachEvents=new we,this.parentContexts=_(Ga),this.location=_(Kr),this.changeDetector=_(Xi),this.inputBinder=_(sf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new y(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Qd(r,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=qi({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[la]});let t=e;return t})(),Qd=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===oi?this.route:e===Ga?this.childContexts:this.parent.get(e,n)}},sf=new R("");function bM(t,e,n){let r=gs(t,e._root,n?n._root:void 0);return new Ua(r,e)}function gs(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=IM(t,e,n);return new Ue(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>gs(t,a)),o}}let r=SM(e.value),i=e.children.map(s=>gs(t,s));return new Ue(r,i)}}function IM(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return gs(t,r,i);return gs(t,r)})}function SM(t){return new oi(new ve(t.url),new ve(t.params),new ve(t.queryParams),new ve(t.fragment),new ve(t.data),t.outlet,t.component,t)}var ms=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},y_="ngNavigationCancelingError";function Wa(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=us(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=v_(!1,He.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function v_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[y_]=!0,n.cancellationCode=e,n}function TM(t){return __(t)&&us(t.url)}function __(t){return!!t&&t[y_]}var MM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["ng-component"]],standalone:!0,features:[et],decls:1,vars:0,template:function(i,s){i&1&&Je(0,"router-outlet")},dependencies:[rf],encapsulation:2});let t=e;return t})();function NM(t,e){return t.providers&&!t._injector&&(t._injector=td(t.providers,e,`Route: ${t.path}`)),t._injector??e}function of(t){let e=t.children&&t.children.map(of),n=e?se(E({},t),{children:e}):E({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==O&&(n.component=MM),n}function ht(t){return t.outlet||O}function AM(t,e){let n=t.filter(r=>ht(r)===e);return n.push(...t.filter(r=>ht(r)!==e)),n}function ws(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var xM=(t,e,n,r)=>L(i=>(new Kd(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Kd=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Sd(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ei(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ei(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ei(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ei(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Hd(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $d(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Sd(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Sd(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=ws(i.snapshot);o.attachRef=null,o.route=i,o.injector=a??o.injector,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},qa=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ri=class{constructor(e,n){this.component=e,this.route=n}};function RM(t,e,n){let r=t._root,i=e?e._root:null;return is(r,i,n,[r.value])}function OM(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function li(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!um(t)?t:e.get(t):r}function is(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ei(e);return t.children.forEach(o=>{PM(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ls(a,n.getContext(o),i)),i}function PM(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=kM(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new qa(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?is(t,e,a?a.children:null,r,i):is(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ri(a.outlet.component,o))}else o&&ls(e,a,i),i.canActivateChecks.push(new qa(r)),s.component?is(t,null,a?a.children:null,r,i):is(t,null,n,r,i);return i}function kM(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Gn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gn(t.url,e.url)||!Mt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gd(t,e)||!Mt(t.queryParams,e.queryParams);case"paramsChange":default:return!Gd(t,e)}}function ls(t,e,n){let r=ei(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ls(o,e.children.getContext(s),n):ls(o,null,n):ls(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ri(e.outlet.component,i)):n.canDeactivateChecks.push(new ri(null,i)):n.canDeactivateChecks.push(new ri(null,i))}function Es(t){return typeof t=="function"}function FM(t){return typeof t=="boolean"}function LM(t){return t&&Es(t.canLoad)}function jM(t){return t&&Es(t.canActivate)}function VM(t){return t&&Es(t.canActivateChild)}function BM(t){return t&&Es(t.canDeactivate)}function $M(t){return t&&Es(t.canMatch)}function w_(t){return t instanceof Vt||t?.name==="EmptyError"}var Pa=Symbol("INITIAL_VALUE");function ai(){return ot(t=>Io(t.map(e=>e.pipe(Bt(1),vc(Pa)))).pipe(L(e=>{for(let n of e)if(n!==!0){if(n===Pa)return Pa;if(n===!1||UM(n))return n}return!0}),st(e=>e!==Pa),Bt(1)))}function UM(t){return us(t)||t instanceof ms}function HM(t,e){return le(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?N(se(E({},n),{guardsResult:!0})):zM(o,r,i,t).pipe(le(a=>a&&FM(a)?WM(r,s,t,e):N(a)),L(a=>se(E({},n),{guardsResult:a})))})}function zM(t,e,n,r){return fe(t).pipe(le(i=>YM(i.component,i.route,n,e,r)),_t(i=>i!==!0,!0))}function WM(t,e,n,r){return fe(e).pipe(Mr(i=>Sr(GM(i.route.parent,r),qM(i.route,r),KM(t,i.path,n),QM(t,i.route,n))),_t(i=>i!==!0,!0))}function qM(t,e){return t!==null&&e&&e(new Ud(t)),N(!0)}function GM(t,e){return t!==null&&e&&e(new Bd(t)),N(!0)}function QM(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(s=>So(()=>{let o=ws(e)??n,a=li(s,o),l=jM(a)?a.canActivate(e,t):Wt(o,()=>a(e,t));return mn(l).pipe(_t())}));return N(i).pipe(ai())}function KM(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>OM(o)).filter(o=>o!==null).map(o=>So(()=>{let a=o.guards.map(l=>{let c=ws(o.node)??n,u=li(l,c),d=VM(u)?u.canActivateChild(r,t):Wt(c,()=>u(r,t));return mn(d).pipe(_t())});return N(a).pipe(ai())}));return N(s).pipe(ai())}function YM(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return N(!0);let o=s.map(a=>{let l=ws(e)??i,c=li(a,l),u=BM(c)?c.canDeactivate(t,e,n,r):Wt(l,()=>c(t,e,n,r));return mn(u).pipe(_t())});return N(o).pipe(ai())}function ZM(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return N(!0);let s=i.map(o=>{let a=li(o,t),l=LM(a)?a.canLoad(e,n):Wt(t,()=>a(e,n));return mn(l)});return N(s).pipe(ai(),E_(r))}function E_(t){return lc(_e(e=>{if(typeof e!="boolean")throw Wa(t,e)}),L(e=>e===!0))}function XM(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return N(!0);let s=i.map(o=>{let a=li(o,t),l=$M(a)?a.canMatch(e,n):Wt(t,()=>a(e,n));return mn(l)});return N(s).pipe(ai(),E_(r))}var ys=class{constructor(e){this.segmentGroup=e||null}},vs=class extends Error{constructor(e){super(),this.urlTree=e}};function Jr(t){return Ir(new ys(t))}function JM(t){return Ir(new y(4e3,!1))}function eN(t){return Ir(v_(!1,He.GuardRejected))}var Yd=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[O])return JM(`${e.redirectTo}`);i=i.children[O]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:f,params:h,data:p,title:g}=i,v=Wt(s,()=>a({params:h,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:f,title:g}));if(v instanceof gn)throw new vs(v);n=v}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new vs(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new gn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new K(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new y(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Zd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tN(t,e,n,r,i){let s=af(t,e,n);return s.matched?(r=NM(e,r),XM(r,e,n,i).pipe(L(o=>o===!0?s:E({},Zd)))):N(s)}function af(t,e,n){if(e.path==="**")return nN(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?E({},Zd):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ZT)(n,t,e);if(!i)return E({},Zd);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?E(E({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function nN(t){return{matched:!0,parameters:t.length>0?t_(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Zv(t,e,n,r){return n.length>0&&sN(t,n,r)?{segmentGroup:new K(e,iN(r,new K(n,t.children))),slicedSegments:[]}:n.length===0&&oN(t,n,r)?{segmentGroup:new K(t.segments,rN(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new K(t.segments,t.children),slicedSegments:n}}function rN(t,e,n,r){let i={};for(let s of n)if(Qa(t,e,s)&&!r[ht(s)]){let o=new K([],{});i[ht(s)]=o}return E(E({},r),i)}function iN(t,e){let n={};n[O]=e;for(let r of t)if(r.path===""&&ht(r)!==O){let i=new K([],{});n[ht(r)]=i}return n}function sN(t,e,n){return n.some(r=>Qa(t,e,r)&&ht(r)!==O)}function oN(t,e,n){return n.some(r=>Qa(t,e,r))}function Qa(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function aN(t,e,n,r){return ht(t)!==r&&(r===O||!Qa(e,n,t))?!1:af(e,t,n).matched}function lN(t,e,n){return e.length===0&&!t.children[n]}var Xd=class{};function cN(t,e,n,r,i,s,o="emptyOnly"){return new Jd(t,e,n,r,i,o,s).recognize()}var uN=31,Jd=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Yd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new y(4002,`'${e.segmentGroup}'`)}recognize(){let e=Zv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(L(({children:n,rootSnapshot:r})=>{let i=new Ue(r,n),s=new za("",i),o=mM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new ni([],Object.freeze({}),Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),O,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,O,n).pipe(L(r=>({children:r,rootSnapshot:n})),nn(r=>{if(r instanceof vs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ys?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(L(o=>o instanceof Ue?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return fe(s).pipe(Mr(o=>{let a=r.children[o],l=AM(n,o);return this.processSegmentGroup(e,l,a,o,i)}),yc((o,a)=>(o.push(...a),o)),rn(null),mc(),le(o=>{if(o===null)return Jr(r);let a=D_(o);return dN(a),N(a)}))}processSegment(e,n,r,i,s,o,a){return fe(n).pipe(Mr(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,s,o,a).pipe(nn(c=>{if(c instanceof ys)return N(null);throw c}))),_t(l=>!!l),nn(l=>{if(w_(l))return lN(r,i,s)?N(new Xd):Jr(r);throw l}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,l){return aN(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,l):Jr(i):Jr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=af(n,i,s);if(!l)return Jr(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uN&&(this.allowRedirects=!1));let h=new ni(s,c,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,Xv(i),ht(i),i.component??i._loadedComponent??null,i,Jv(i)),p=Ha(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,g).pipe(le(v=>this.processSegment(e,r,n,v.concat(f),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=tN(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ot(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ot(({routes:c})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=l,p=new ni(f,d,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,Xv(r),ht(r),r.component??r._loadedComponent??null,r,Jv(r)),g=Ha(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:v,slicedSegments:C}=Zv(n,f,h,c);if(C.length===0&&v.hasChildren())return this.processChildren(u,c,v,p).pipe(L(P=>new Ue(p,P)));if(c.length===0&&C.length===0)return N(new Ue(p,[]));let U=ht(r)===s;return this.processSegment(u,c,v,C,U?O:s,!0,p).pipe(L(P=>new Ue(p,P instanceof Ue?[P]:[])))}))):Jr(n)))}getChildConfig(e,n,r){return n.children?N({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):ZM(e,n,r,this.urlSerializer).pipe(le(i=>i?this.configLoader.loadChildren(e,n).pipe(_e(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):eN(n))):N({routes:[],injector:e})}};function dN(t){t.sort((e,n)=>e.value.outlet===O?-1:n.value.outlet===O?1:e.value.outlet.localeCompare(n.value.outlet))}function fN(t){let e=t.value.routeConfig;return e&&e.path===""}function D_(t){let e=[],n=new Set;for(let r of t){if(!fN(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=D_(r.children);e.push(new Ue(r.value,i))}return e.filter(r=>!n.has(r))}function Xv(t){return t.data||{}}function Jv(t){return t.resolve||{}}function hN(t,e,n,r,i,s){return le(o=>cN(t,e,n,r,o.extractedUrl,i,s).pipe(L(({state:a,tree:l})=>se(E({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function pN(t,e){return le(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of C_(l))o.add(c);let a=0;return fe(o).pipe(Mr(l=>s.has(l)?gN(l,r,t,e):(l.data=Ha(l,l.parent,t).resolve,N(void 0))),_e(()=>a++),Nr(1),le(l=>a===o.size?N(n):Me))})}function C_(t){let e=t.children.map(n=>C_(n)).flat();return[t,...e]}function gN(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!m_(i)&&(s[_s]=i.title),mN(s,t,e,r).pipe(L(o=>(t._resolvedData=o,t.data=Ha(t,t.parent,n).resolve,null)))}function mN(t,e,n,r){let i=Nd(t);if(i.length===0)return N({});let s={};return fe(i).pipe(le(o=>yN(t[o],e,n,r).pipe(_t(),_e(a=>{if(a instanceof ms)throw Wa(new cs,a);s[o]=a}))),Nr(1),gc(s),nn(o=>w_(o)?Me:Ir(o)))}function yN(t,e,n,r){let i=ws(e)??r,s=li(t,i),o=s.resolve?s.resolve(e,n):Wt(i,()=>s(e,n));return mn(o)}function Td(t){return ot(e=>{let n=t(e);return n?fe(n).pipe(L(()=>e)):N(e)})}var b_=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===O);return i}getResolvedTitleForRoute(r){return r.data[_s]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(vN),providedIn:"root"});let t=e;return t})(),vN=(()=>{let e=class e extends b_{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(M(qv))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lf=new R("",{providedIn:"root",factory:()=>({})}),cf=new R(""),_N=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_(cd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return N(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=mn(r.loadComponent()).pipe(L(I_),_e(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Ai(()=>{this.componentLoaders.delete(r)})),s=new Cr(i,()=>new Te).pipe(Dr());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return N({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=wN(i,this.compiler,r,this.onLoadEndListener).pipe(Ai(()=>{this.childrenLoaders.delete(i)})),a=new Cr(o,()=>new Te).pipe(Dr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wN(t,e,n,r){return mn(t.loadChildren()).pipe(L(I_),le(i=>i instanceof Ui||Array.isArray(i)?N(i):fe(e.compileModuleAsync(i))),L(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(cf,[],{optional:!0,self:!0}).flat()),{routes:o.map(of),injector:s}}))}function EN(t){return t&&typeof t=="object"&&"default"in t}function I_(t){return EN(t)?t.default:t}var uf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(DN),providedIn:"root"});let t=e;return t})(),DN=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),CN=new R("");var bN=new R(""),IN=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Te,this.transitionAbortSubject=new Te,this.configLoader=_(_N),this.environmentInjector=_(Ye),this.urlSerializer=_(tf),this.rootContexts=_(Ga),this.location=_(Ji),this.inputBindingEnabled=_(sf,{optional:!0})!==null,this.titleStrategy=_(b_),this.options=_(lf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=_(uf),this.createViewTransition=_(CN,{optional:!0}),this.navigationErrorHandler=_(bN,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let r=s=>this.events.next(new jd(s)),i=s=>this.events.next(new Vd(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(se(E(E({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ve({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:as,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(st(o=>o.id!==0),L(o=>se(E({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ot(o=>{let a=!1,l=!1;return N(o).pipe(ot(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",He.SupersededByNewNavigation),Me;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?se(E({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Kn(c.id,this.urlSerializer.serialize(c.rawUrl),f,Od.IgnoredSameUrlNavigation)),c.resolve(!1),Me}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return N(c).pipe(ot(f=>{let h=this.transitions?.getValue();return this.events.next(new fs(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?Me:Promise.resolve(f)}),hN(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),_e(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=se(E({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new Ba(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:g,extras:v}=c,C=new fs(f,this.urlSerializer.serialize(h),p,g);this.events.next(C);let U=p_(this.rootComponentType).snapshot;return this.currentTransition=o=se(E({},c),{targetSnapshot:U,urlAfterRedirects:h,extras:se(E({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,N(o)}else{let f="";return this.events.next(new Kn(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Od.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Me}}),_e(c=>{let u=new Pd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),L(c=>(this.currentTransition=o=se(E({},c),{guards:RM(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),HM(this.environmentInjector,c=>this.events.next(c)),_e(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Wa(this.urlSerializer,c.guardsResult);let u=new kd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),st(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",He.GuardRejected),!1)),Td(c=>{if(c.guards.canActivateChecks.length)return N(c).pipe(_e(u=>{let d=new Fd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ot(u=>{let d=!1;return N(u).pipe(pN(this.paramsInheritanceStrategy,this.environmentInjector),_e({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",He.NoDataFromResolver)}}))}),_e(u=>{let d=new Ld(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Td(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(_e(h=>{d.component=h}),L(()=>{})));for(let h of d.children)f.push(...u(h));return f};return Io(u(c.targetSnapshot.root)).pipe(rn(null),Bt(1))}),Td(()=>this.afterPreactivation()),ot(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?fe(d).pipe(L(()=>o)):N(o)}),L(c=>{let u=bM(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=se(E({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),_e(()=>{this.events.next(new ps)}),xM(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Bt(1),_e({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),_c(this.transitionAbortSubject.pipe(_e(c=>{throw c}))),Ai(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",He.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),nn(c=>{if(l=!0,__(c))this.events.next(new Qt(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),TM(c)?this.events.next(new si(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let u=new hs(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=Wt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof ms){let{message:f,cancellationCode:h}=Wa(this.urlSerializer,d);this.events.next(new Qt(o.id,this.urlSerializer.serialize(o.extractedUrl),f,h)),this.events.next(new si(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let f=r.errorHandler(c);o.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Me}))}))}cancelNavigationTransition(r,i,s){let o=new Qt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SN(t){return t!==as}var TN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(MN),providedIn:"root"});let t=e;return t})(),ef=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},MN=(()=>{let e=class e extends ef{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Fu(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),S_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(NN),providedIn:"root"});let t=e;return t})(),NN=(()=>{let e=class e extends S_{constructor(){super(...arguments),this.location=_(Ji),this.urlSerializer=_(tf),this.options=_(lf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=_(uf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new gn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=p_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof fs)this.stateMemento=this.createStateMemento();else if(r instanceof Kn)this.rawUrlTree=i.initialUrl;else if(r instanceof Ba){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof ps?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Qt&&(r.code===He.GuardRejected||r.code===He.NoDataFromResolver)?this.restoreHistory(i):r instanceof hs?this.restoreHistory(i,!0):r instanceof Qn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=E(E({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=E(E({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Fu(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ss=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ss||{});function AN(t,e){t.events.pipe(st(n=>n instanceof Qn||n instanceof Qt||n instanceof hs||n instanceof Kn),L(n=>n instanceof Qn||n instanceof Kn?ss.COMPLETE:(n instanceof Qt?n.code===He.Redirect||n.code===He.SupersededByNewNavigation:!1)?ss.REDIRECTING:ss.FAILED),st(n=>n!==ss.REDIRECTING),Bt(1)).subscribe(()=>{e()})}function xN(t){throw t}var RN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ON={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},T_=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=_(Ca),this.stateManager=_(S_),this.options=_(lf,{optional:!0})||{},this.pendingTasks=_(Ki),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=_(IN),this.urlSerializer=_(tf),this.location=_(Ji),this.urlHandlingStrategy=_(uf),this._events=new Te,this.errorHandler=this.options.errorHandler||xN,this.navigated=!1,this.routeReuseStrategy=_(TN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=_(cf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!_(sf,{optional:!0}),this.eventsSubscription=new ue,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Qt&&i.code!==He.Redirect&&i.code!==He.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Qn)this.navigated=!0;else if(i instanceof si){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c=E({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||SN(s.source)},a);this.scheduleNavigation(l,as,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}kN(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),as,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=E({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(of),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=E(E({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=s?s.snapshot:this.routerState.snapshot.root;f=u_(h)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),f=this.currentUrlTree.root}return d_(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=us(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,as,null,i)}navigate(r,i={skipLocationChange:!1}){return PN(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=E({},RN):i===!1?s=E({},ON):s=i,us(r))return Gv(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Gv(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((f,h)=>{l=f,c=h});let d=this.pendingTasks.add();return AN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function PN(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new y(4008,!1)}function kN(t){return!(t instanceof ps)&&!(t instanceof si)}var FN=new R("");function M_(t,...e){return Iu([{provide:cf,multi:!0,useValue:t},[],{provide:oi,useFactory:LN,deps:[T_]},{provide:ld,multi:!0,useFactory:jN},e.map(n=>n.\u0275providers)])}function LN(t){return t.routerState.root}function jN(){let t=_(jn);return e=>{let n=t.get(Hn);if(e!==n.components[0])return;let r=t.get(T_),i=t.get(VN);t.get(BN)===1&&r.initialNavigation(),t.get($N,null,k.Optional)?.setUpPreloading(),t.get(FN,null,k.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var VN=new R("",{factory:()=>new Te}),BN=new R("",{providedIn:"root",factory:()=>1});var $N=new R("");var N_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["app-navbar"]],standalone:!0,features:[et],decls:13,vars:0,consts:[[1,"navbar"],[1,"menu-btn"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M4 6H20M4 12H20M4 18H20","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(i,s){i&1&&(Ee(0,"div",0)(1,"button",1),Pu(),Ee(2,"svg",2),Je(3,"g",3)(4,"g",4),Ee(5,"g",5),Je(6,"path",6),$e()()(),iy(),Ee(7,"button",1),Pu(),Ee(8,"svg",2),Je(9,"g",3)(10,"g",4),Ee(11,"g",5),Je(12,"path",6),$e()()()())},styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.navbar[_ngcontent-%COMP%]{height:4rem;width:100%;display:flex;flex-direction:row;justify-content:space-between;border-top:solid 1px black}.menu-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;outline:none;border:none;background:none;width:4rem;height:100%;padding:0 .5rem}.menu-btn[_ngcontent-%COMP%]:hover{cursor:pointer;outline:solid 1px black}"]});let t=e;return t})();var A=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(A||{}),Nt="*";function Ka(t,e){return{type:A.Trigger,name:t,definitions:e,options:{}}}function Yn(t,e=null){return{type:A.Animate,styles:e,timings:t}}function A_(t,e=null){return{type:A.Sequence,steps:t,options:e}}function At(t){return{type:A.Style,styles:t,offset:null}}function Zn(t,e,n){return{type:A.State,name:t,styles:e,options:n}}function Xn(t,e,n=null){return{type:A.Transition,expr:t,animation:e,options:n}}var yn=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Ds=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Ya="!";var x_=Ka("flip",[Zn("active",At({transform:"rotateY(180deg)"})),Zn("inactive",At({transform:"rotateY(0)"})),Xn("active => inactive",Yn("300ms ease-out")),Xn("inactive => active",Yn("300ms ease-in"))]),R_=Ka("swipeRight",[Zn("active",At({transform:"rotateZ(90deg)",translate:"150% -100%"})),Zn("inactive",At({transform:"rotateZ(0deg)",translate:"0% 0%"})),Xn("active => inactive",Yn("200ms ease-out")),Xn("inactive => active",Yn("200ms ease-in"))]),O_=Ka("swipeLeft",[Zn("active",At({transform:"rotateZ(-90deg)",translate:"-150% -100%"})),Zn("inactive",At({transform:"rotateZ(0deg)",translate:"0% 0%"})),Xn("active => inactive",Yn("200ms ease-out")),Xn("inactive => active",Yn("200ms ease-in"))]);var UN=t=>({background:t});function HN(t,e){if(t&1&&(Ee(0,"div"),pv(1),$e()),t&2){let n=Xr();nd(n.flipped?"card-content":"card-content back"),Qr(),sd(" ",n.flipped?n.front:n.back," ")}}var P_=(()=>{let e=class e{constructor(){this.front="Front",this.back="Back",this.color="pink",this.swiped=new we,this.flipState="inactive",this.swipeRightState="inactive",this.swipeLeftState="inactive",this.flipped=!1,this.showInfo=!0}ngOnInit(){let r=document.getElementById("container");if(!r)return;let i=Tr(r,"touchstart"),s=Tr(r,"touchend");pc(i,s).pipe(L(([o,a])=>({start:o,end:a}))).subscribe(o=>{this.handleSwipe(o)})}handleTouch(){this.flipState=this.flipState==="inactive"?"active":"inactive"}handleSwipe(r){let i=r.end.changedTouches[0].pageX-r.start.changedTouches[0].pageX;Math.abs(i)>100&&(i>0?this.swipeRight():this.swipeLeft())}swipeRight(){this.swipeRightState=this.swipeRightState==="inactive"?"active":"inactive"}swipeLeft(){this.swipeLeftState=this.swipeLeftState==="inactive"?"active":"inactive"}emitSwiped(r){r.fromState==="inactive"&&r.toState==="active"&&(r.triggerName==="swipeRight"?this.swiped.emit(!0):this.swiped.emit(!1))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["app-card"]],inputs:{front:"front",back:"back",color:"color"},outputs:{swiped:"swiped"},standalone:!0,features:[et],decls:2,vars:10,consts:[["id","container",3,"click"],[3,"class",4,"ngIf"]],template:function(i,s){i&1&&(Ee(0,"div",0),Zr("click",function(){return s.handleTouch()})("@flip.start",function(){return s.showInfo=!1})("@flip.done",function(){return s.flipped=!s.flipped,s.showInfo=!0})("@swipeRight.done",function(a){return s.emitSwiped(a)})("@swipeLeft.done",function(a){return s.emitSwiped(a)}),Yr(1,HN,2,3,"div",1),$e()),i&2&&(lv(gv(8,UN,s.color)),nd(s.flipped?"card-container":"card-container back"),hn("@flip",s.flipState)("@swipeRight",s.swipeRightState)("@swipeLeft",s.swipeLeftState),Qr(),hn("ngIf",s.showInfo))},dependencies:[pn,Na],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.card-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;text-align:center;width:100%;height:100%;border-radius:10px;box-shadow:1px 2px 2px gray;word-wrap:break-word}.card-content[_ngcontent-%COMP%]{font-size:32px}.back[_ngcontent-%COMP%]{transform:rotateY(180deg)}"],data:{animation:[x_,R_,O_]}});let t=e;return t})();var df={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var m=function(t,e){if(!t)throw er(e)},er=function(t){return new Error("Firebase Database ("+df.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var F_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zN=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Xa={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(F_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let c=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new ff;let f=s<<2|a>>4;if(r.push(f),c!==64){let h=a<<4&240|c>>2;if(r.push(h),d!==64){let p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ff=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},pf=function(t){let e=F_(t);return Xa.encodeByteArray(e,!0)},Cs=function(t){return pf(t).replace(/\./g,"")},hf=function(t){try{return Xa.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function L_(t){return j_(void 0,t)}function j_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!WN(n)||(t[n]=j_(t[n],e[n]));return t}function WN(t){return t!=="__proto__"}function qN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var GN=()=>qN().__FIREBASE_DEFAULTS__,QN=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&hf(t[1]);return e&&JSON.parse(e)},V_=()=>{try{return GN()||QN()||KN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YN=t=>{var e,n;return(n=(e=V_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},B_=t=>{let e=YN(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gf=()=>{var t;return(t=V_())===null||t===void 0?void 0:t.config};var vn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function $_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Cs(JSON.stringify(n)),Cs(JSON.stringify(o)),""].join(".")}function ZN(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ZN())}function U_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xt(){return df.NODE_CLIENT===!0||df.NODE_ADMIN===!0}function H_(){try{return typeof indexedDB=="object"}catch{return!1}}function z_(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var XN="FirebaseError",Jn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=XN,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bs.prototype.create)}},bs=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?JN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Jn(i,a,r)}};function JN(t,e){return t.replace(eA,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var eA=/\{\$([^}]+)}/g;function ci(t){return JSON.parse(t)}function de(t){return JSON.stringify(t)}var W_=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=ci(hf(s[0])||""),n=ci(hf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var q_=function(t){let e=W_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},G_=function(t){let e=W_(t).claims;return typeof e=="object"&&e.admin===!0};function Rt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function tr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function yf(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Is(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ja(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(k_(s)&&k_(o)){if(!Ja(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function k_(t){return t!==null&&typeof t=="object"}function Q_(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Za=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function el(t,e){return`${t} failed: ${e} argument `}var K_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,m(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ss=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var nU=4*60*60*1e3;function nr(t){return t&&t._delegate?t._delegate:t}var Kt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var rr="[DEFAULT]";var tl=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new vn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nA(e))try{this.getOrInitializeService({instanceIdentifier:rr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return be(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=rr){return this.instances.has(e)}getOptions(e=rr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rr){return this.component?this.component.multipleInstances?e:rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tA(t){return t===rr?void 0:t}function nA(t){return t.instantiationMode==="EAGER"}var Ts=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new tl(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var rA=[],J=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(J||{}),iA={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},sA=J.INFO,oA={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},aA=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=oA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ui=class{constructor(e){this.name=e,this._logLevel=sA,this._logHandler=aA,this._userLogHandler=null,rA.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}};var lA=(t,e)=>e.some(n=>t instanceof n),Y_,Z_;function cA(){return Y_||(Y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uA(){return Z_||(Z_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var X_=new WeakMap,_f=new WeakMap,J_=new WeakMap,vf=new WeakMap,Ef=new WeakMap;function dA(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ot(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&X_.set(n,t)}).catch(()=>{}),Ef.set(e,t),e}function fA(t){if(_f.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});_f.set(t,e)}var wf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _f.get(t);if(e==="objectStoreNames")return t.objectStoreNames||J_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ot(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ew(t){wf=t(wf)}function hA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(nl(this),e,...n);return J_.set(r,e.sort?e.sort():[e]),Ot(r)}:uA().includes(t)?function(...e){return t.apply(nl(this),e),Ot(X_.get(this))}:function(...e){return Ot(t.apply(nl(this),e))}}function pA(t){return typeof t=="function"?hA(t):(t instanceof IDBTransaction&&fA(t),lA(t,cA())?new Proxy(t,wf):t)}function Ot(t){if(t instanceof IDBRequest)return dA(t);if(vf.has(t))return vf.get(t);let e=pA(t);return e!==t&&(vf.set(t,e),Ef.set(e,t)),e}var nl=t=>Ef.get(t);function nw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Ot(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ot(o.result),l.oldVersion,l.newVersion,Ot(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var gA=["get","getKey","getAll","getAllKeys","count"],mA=["put","add","delete","clear"],Df=new Map;function tw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Df.get(e))return Df.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=mA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gA.includes(n)))return;let s=function(o,...a){return be(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),c=l.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),i&&l.done]))[0]})};return Df.set(e,s),s}ew(t=>se(E({},t),{get:(e,n,r)=>tw(e,n)||t.get(e,n,r),has:(e,n)=>!!tw(e,n)||t.has(e,n)}));var bf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yA(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function yA(t){let e=t.getComponent();return e?.type==="VERSION"}var If="@firebase/app",rw="0.10.5";var ir=new ui("@firebase/app"),vA="@firebase/app-compat",_A="@firebase/analytics-compat",wA="@firebase/analytics",EA="@firebase/app-check-compat",DA="@firebase/app-check",CA="@firebase/auth",bA="@firebase/auth-compat",IA="@firebase/database",SA="@firebase/database-compat",TA="@firebase/functions",MA="@firebase/functions-compat",NA="@firebase/installations",AA="@firebase/installations-compat",xA="@firebase/messaging",RA="@firebase/messaging-compat",OA="@firebase/performance",PA="@firebase/performance-compat",kA="@firebase/remote-config",FA="@firebase/remote-config-compat",LA="@firebase/storage",jA="@firebase/storage-compat",VA="@firebase/firestore",BA="@firebase/vertexai-preview",$A="@firebase/firestore-compat",UA="firebase",HA="10.12.2";var Sf="[DEFAULT]",zA={[If]:"fire-core",[vA]:"fire-core-compat",[wA]:"fire-analytics",[_A]:"fire-analytics-compat",[DA]:"fire-app-check",[EA]:"fire-app-check-compat",[CA]:"fire-auth",[bA]:"fire-auth-compat",[IA]:"fire-rtdb",[SA]:"fire-rtdb-compat",[TA]:"fire-fn",[MA]:"fire-fn-compat",[NA]:"fire-iid",[AA]:"fire-iid-compat",[xA]:"fire-fcm",[RA]:"fire-fcm-compat",[OA]:"fire-perf",[PA]:"fire-perf-compat",[kA]:"fire-rc",[FA]:"fire-rc-compat",[LA]:"fire-gcs",[jA]:"fire-gcs-compat",[VA]:"fire-fst",[$A]:"fire-fst-compat",[BA]:"fire-vertex","fire-js":"fire-js",[UA]:"fire-js-all"};var rl=new Map,WA=new Map,Tf=new Map;function iw(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ms(t){let e=t.name;if(Tf.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;Tf.set(e,t);for(let n of rl.values())iw(n,t);for(let n of WA.values())iw(n,t);return!0}function lw(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var qA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_n=new bs("app","Firebase",qA);var Mf=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}};var cw=HA;function xf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Sf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw _n.create("bad-app-name",{appName:String(i)});if(n||(n=gf()),!n)throw _n.create("no-options");let s=rl.get(i);if(s){if(Ja(n,s.options)&&Ja(r,s.config))return s;throw _n.create("duplicate-app",{appName:i})}let o=new Ts(i);for(let l of Tf.values())o.addComponent(l);let a=new Mf(n,r,o);return rl.set(i,a),a}function uw(t=Sf){let e=rl.get(t);if(!e&&t===Sf&&gf())return xf();if(!e)throw _n.create("no-app",{appName:t});return e}function wn(t,e,n){var r;let i=(r=zA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(a.join(" "));return}Ms(new Kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var GA="firebase-heartbeat-database",QA=1,Ns="firebase-heartbeat-store",Cf=null;function dw(){return Cf||(Cf=nw(GA,QA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ns)}catch(n){console.warn(n)}}}}).catch(t=>{throw _n.create("idb-open",{originalErrorMessage:t.message})})),Cf}function KA(t){return be(this,null,function*(){try{let n=(yield dw()).transaction(Ns),r=yield n.objectStore(Ns).get(fw(t));return yield n.done,r}catch(e){if(e instanceof Jn)ir.warn(e.message);else{let n=_n.create("idb-get",{originalErrorMessage:e?.message});ir.warn(n.message)}}})}function sw(t,e){return be(this,null,function*(){try{let r=(yield dw()).transaction(Ns,"readwrite");yield r.objectStore(Ns).put(e,fw(t)),yield r.done}catch(n){if(n instanceof Jn)ir.warn(n.message);else{let r=_n.create("idb-set",{originalErrorMessage:n?.message});ir.warn(r.message)}}})}function fw(t){return`${t.name}!${t.options.appId}`}var YA=1024,ZA=30*24*60*60*1e3,Nf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Af(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return be(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ow();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=ZA}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return be(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=ow(),{heartbeatsToSend:r,unsentEntries:i}=XA(this._heartbeatsCache.heartbeats),s=Cs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function ow(){return new Date().toISOString().substring(0,10)}function XA(t,e=YA){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),aw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),aw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Af=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return be(this,null,function*(){return H_()?z_().then(()=>!0).catch(()=>!1):!1})}read(){return be(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield KA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return be(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return sw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return be(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return sw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function aw(t){return Cs(JSON.stringify({version:2,heartbeats:t})).length}function JA(t){Ms(new Kt("platform-logger",e=>new bf(e),"PRIVATE")),Ms(new Kt("heartbeat",e=>new Nf(e),"PRIVATE")),wn(If,rw,t),wn(If,rw,"esm2017"),wn("fire-js","")}JA("");var ex="firebase",tx="10.12.2";wn(ex,tx,"app");var hw="@firebase/database",pw="1.0.5";var kh="";function nx(t){kh=t}var Vf=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),de(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ci(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Bf=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Rt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Ww=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Vf(e)}}catch{}return new Bf},or=Ww("localStorage"),$f=Ww("sessionStorage");var hi=new ui("@firebase/database"),rx=function(){let t=1;return function(){return t++}}(),qw=function(t){let e=K_(t),n=new Za;n.update(e);let r=n.digest();return Xa.encodeByteArray(r)},qs=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=qs.apply(null,r):typeof r=="object"?e+=de(r):e+=r,e+=" "}return e},lr=null,gw=!0,ix=function(t,e){m(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(hi.logLevel=J.VERBOSE,lr=hi.log.bind(hi),e&&$f.set("logging_enabled",!0)):typeof t=="function"?lr=t:(lr=null,$f.remove("logging_enabled"))},Se=function(...t){if(gw===!0&&(gw=!1,lr===null&&$f.get("logging_enabled")===!0&&ix(!0)),lr){let e=qs.apply(null,t);lr(e)}},Gs=function(t){return function(...e){Se(t,...e)}},Uf=function(...t){let e="FIREBASE INTERNAL ERROR: "+qs(...t);hi.error(e)},Yt=function(...t){let e=`FIREBASE FATAL ERROR: ${qs(...t)}`;throw hi.error(e),new Error(e)},Pe=function(...t){let e="FIREBASE WARNING: "+qs(...t);hi.warn(e)},sx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Gw=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},ox=function(t){if(xt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},gi="[MIN_NAME]",cr="[MAX_NAME]",Di=function(t,e){if(t===e)return 0;if(t===gi||e===cr)return-1;if(e===gi||t===cr)return 1;{let n=mw(t),r=mw(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},ax=function(t,e){return t===e?0:t<e?-1:1},As=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+de(e))},Fh=function(t){if(typeof t!="object"||t===null)return de(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=de(e[r]),n+=":",n+=Fh(t[e[r]]);return n+="}",n},Qw=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function ke(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Kw=function(t){m(!Gw(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();let u=c.join(""),d="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},lx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},cx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ux(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var dx=new RegExp("^-?(0*)\\d{1,10}$"),fx=-2147483648,hx=2147483647,mw=function(t){if(dx.test(t)){let e=Number(t);if(e>=fx&&e<=hx)return e}return null},Ci=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Pe("Exception was thrown by user callback.",n),e},Math.floor(0))}},px=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ks=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Hf=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Pe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var zf=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Se("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pe(e)}},Fs=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),sl="5",Yw="v",Zw="s",Xw="r",Jw="f",eE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tE="ls",nE="p",Wf="ac",rE="websocket",iE="long_polling";var ol=class{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=or.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&or.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function gx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function sE(t,e,n){m(typeof e=="string","typeof type must == string"),m(typeof n=="object","typeof params must == object");let r;if(e===rE)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===iE)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);gx(t)&&(n.ns=t.namespace);let i=[];return ke(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var qf=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Rt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return L_(this.counters_)}};var Rf={},Of={};function Lh(t){let e=t.toString();return Rf[e]||(Rf[e]=new qf),Rf[e]}function mx(t,e){let n=t.toString();return Of[n]||(Of[n]=e()),Of[n]}var Gf=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ci(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var yw="start",yx="close",vx="pLPCommand",_x="pRTLPCB",oE="id",aE="pw",lE="ser",wx="cb",Ex="seg",Dx="ts",Cx="d",bx="dframe",cE=1870,uE=30,Ix=cE-uE,Sx=25e3,Tx=3e4,Qf=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gs(e),this.stats_=Lh(n),this.urlFn=l=>(this.appCheckToken&&(l[Wf]=this.appCheckToken),sE(n,iE,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Gf(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Tx)),ox(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kf((...s)=>{let[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===yw)this.id=a,this.password=l;else if(o===yx)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[yw]="t",r[lE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[wx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Yw]=sl,this.transportSessionId&&(r[Zw]=this.transportSessionId),this.lastSessionId&&(r[tE]=this.lastSessionId),this.applicationId&&(r[nE]=this.applicationId),this.appCheckToken&&(r[Wf]=this.appCheckToken),typeof location<"u"&&location.hostname&&eE.test(location.hostname)&&(r[Xw]=Jw);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return xt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!lx()&&!cx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=de(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=pf(n),i=Qw(r,Ix);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(xt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[bx]="t",r[oE]=e,r[aE]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=de(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Kf=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,xt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=rx(),window[vx+this.uniqueCallbackIdentifier]=e,window[_x+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Se("frame writing exception"),a.stack&&Se(a.stack),Se(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Se("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[oE]=this.myID,e[aE]=this.myPW,e[lE]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uE+r.length<=cE;){let o=this.pendingSegs.shift();r=r+"&"+Ex+i+"="+o.seg+"&"+Dx+i+"="+o.ts+"&"+Cx+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Sx)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){xt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Se("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Mx=16384,Nx=45e3,al=null;typeof MozWebSocket<"u"?al=MozWebSocket:typeof WebSocket<"u"&&(al=WebSocket);var xs=(()=>{class t{constructor(n,r,i,s,o,a,l){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gs(this.connId),this.stats_=Lh(r),this.connURL=t.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[Yw]=sl,!xt()&&typeof location<"u"&&location.hostname&&eE.test(location.hostname)&&(a[Xw]=Jw),r&&(a[Zw]=r),i&&(a[tE]=i),s&&(a[Wf]=s),o&&(a[nE]=o),sE(n,rE,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,or.set("previous_websocket_failure",!0);try{let i;if(xt()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${sl}/${kh}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new al(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&al!==null&&!t.forceDisallow_}static previouslyFailed(){return or.isInMemoryStorage||or.get("previous_websocket_failure")===!0}markConnectionHealthy(){or.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ci(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(m(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=de(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Qw(r,Mx);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Nx))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),Ax=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Qf,xs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=xs&&xs.isAvailable(),i=r&&!xs.previouslyFailed();if(n.webSocketOnly&&(r||Pe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[xs];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),xx=6e4,Rx=5e3,Ox=10*1024,Px=100*1024,Pf="t",vw="d",kx="s",_w="r",Fx="e",ww="o",Ew="a",Dw="n",Cw="p",Lx="h",Yf=class{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gs("c:"+this.id+":"),this.transportManager_=new Ax(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ks(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Px?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Ox?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Pf in e){let n=e[Pf];n===Ew?this.upgradeIfSecondaryHealthy_():n===_w?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ww&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=As("t",e),r=As("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Cw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ew,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Dw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=As("t",e),r=As("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=As(Pf,e);if(vw in e){let r=e[vw];if(n===Lx){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Dw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===kx?this.onConnectionShutdown_(r):n===_w?this.onReset_(r):n===Fx?Uf("Server Error: "+r):n===ww?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Uf("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),sl!==r&&Pe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ks(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(xx))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ks(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Rx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Cw,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(or.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var ll=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var cl=class{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){m(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var ul=class t extends cl{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!mf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var bw=32,Iw=768,Z=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function G(){return new Z("")}function $(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Cn(t){return t.pieces_.length-t.pieceNum_}function ee(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Z(t.pieces_,e)}function dE(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function jx(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function fE(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function hE(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Z(e,0)}function pe(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Z)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Z(n,0)}function V(t){return t.pieceNum_>=t.pieces_.length}function Ae(t,e){let n=$(t),r=$(e);if(n===null)return e;if(n===r)return Ae(ee(t),ee(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pE(t,e){if(Cn(t)!==Cn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function gt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Cn(t)>Cn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Zf=class{constructor(e,n){this.errorPrefix_=n,this.parts_=fE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ss(this.parts_[r]);gE(this)}};function Vx(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ss(e),gE(t)}function Bx(t){let e=t.parts_.pop();t.byteLength_-=Ss(e),t.parts_.length>0&&(t.byteLength_-=1)}function gE(t){if(t.byteLength_>Iw)throw new Error(t.errorPrefix_+"has a key path longer than "+Iw+" bytes ("+t.byteLength_+").");if(t.parts_.length>bw)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bw+") or object contains a cycle "+sr(t))}function sr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Xf=class t extends cl{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}};var Rs=1e3,$x=60*5*1e3,Sw=30*1e3,Ux=1.3,Hx=3e4,zx="server_kill",Tw=3,jh=(()=>{class t extends ll{constructor(n,r,i,s,o,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=Gs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Rs,this.maxReconnectDelay_=$x,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!xt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xf.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&ul.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(de(o)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new vn,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,u=l.s;t.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Rt(n,"w")){let i=tr(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Pe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||G_(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Sw)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=q_(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+de(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Uf("Unrecognized action received from server: "+de(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rs,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Rs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Hx&&(this.reconnectDelay_=Rs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ux)}this.onConnectStatus_(!1)}establishConnection_(){return be(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,i())},u=function(f){m(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Se("getToken() completed but was canceled"):(Se("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,l=new Yf(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{Pe(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(zx)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Pe(f),c())}}})}interrupt(n){Se("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Se("Resuming connection for reason: "+n),delete this.interruptReasons_[n],yf(this.interruptReasons_)&&(this.reconnectDelay_=Rs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Fh(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Z(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Se("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Tw&&(this.reconnectDelay_=Sw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Se("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Tw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";xt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+kh.replace(/\./g,"-")]=1,mf()?n["framework.cordova"]=1:U_()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=ul.getInstance().currentlyOnline();return yf(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),j=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var mi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new j(gi,e),i=new j(gi,n);return this.compare(r,i)!==0}minPost(){return j.MIN}};var il,dl=class extends mi{static get __EMPTY_NODE(){return il}static set __EMPTY_NODE(e){il=e}compare(e,n){return Di(e.name,n.name)}isDefinedOn(e){throw er("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return j.MIN}maxPost(){return new j(cr,il)}makePost(e,n){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new j(e,il)}toString(){return".key"}},pi=new dl;var fi=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},pt=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??nt.EMPTY_NODE,this.right=o??nt.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return nt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return nt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Jf=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new pt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},nt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,pt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,pt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new fi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new fi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new fi(this.root_,null,this.comparator_,!0,e)}};nt.EMPTY_NODE=new Jf;function Wx(t,e){return Di(t.name,e.name)}function Vh(t,e){return Di(t,e)}var eh;function qx(t){eh=t}var mE=function(t){return typeof t=="number"?"number:"+Kw(t):"string:"+t},yE=function(t){if(t.isLeafNode()){let e=t.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Rt(e,".sv"),"Priority must be a string or number.")}else m(t===eh||t.isEmpty(),"priority of unexpected type.");m(t===eh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Mw,yi=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yE(this.priorityNode_)}static set __childrenNodeConstructor(n){Mw=n}static get __childrenNodeConstructor(){return Mw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return V(n)?this:$(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=$(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(m(i!==".priority"||Cn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ee(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+mE(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=Kw(this.value_):n+=this.value_,this.lazyHash_=qw(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(m(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return m(s>=0,"Unknown leaf type: "+r),m(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),vE,_E;function Gx(t){vE=t}function Qx(t){_E=t}var th=class extends mi{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Di(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return j.MIN}maxPost(){return new j(cr,new yi("[PRIORITY-POST]",_E))}makePost(e,n){let r=vE(e);return new j(n,new yi("[PRIORITY-POST]",r))}toString(){return".priority"}},ae=new th;var Kx=Math.log(2),nh=class{constructor(e){let n=s=>parseInt(Math.log(s)/Kx,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},fl=function(t,e,n,r){t.sort(e);let i=function(l,c){let u=c-l,d,f;if(u===0)return null;if(u===1)return d=t[l],f=n?n(d):d,new pt(f,d.node,pt.BLACK,null,null);{let h=parseInt(u/2,10)+l,p=i(l,h),g=i(h+1,c);return d=t[h],f=n?n(d):d,new pt(f,d.node,pt.BLACK,p,g)}},s=function(l){let c=null,u=null,d=t.length,f=function(p,g){let v=d-p,C=d;d-=p;let U=i(v+1,C),P=t[v],Y=n?n(P):P;h(new pt(Y,P.node,g,null,U))},h=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){let g=l.nextBitIsOne(),v=Math.pow(2,l.count-(p+1));g?f(v,pt.BLACK):(f(v,pt.BLACK),f(v,pt.RED))}return u},o=new nh(t.length),a=s(o);return new nt(r||e,a)};var kf,di={},vi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return m(di&&ae,"ChildrenNode.ts has not been loaded"),kf=kf||new t({".priority":di},{".priority":ae}),kf}get(e){let n=tr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof nt?n:null}hasIndex(e){return Rt(this.indexSet_,e.toString())}addIndex(e,n){m(e!==pi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(j.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=fl(r,e.getCompare()):a=di;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let u=Object.assign({},this.indexes_);return u[l]=a,new t(u,c)}addToIndexes(e,n){let r=Is(this.indexes_,(i,s)=>{let o=tr(this.indexSet_,s);if(m(o,"Missing index implementation for "+s),i===di)if(o.isDefinedOn(e.node)){let a=[],l=n.getIterator(j.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),fl(a,o.getCompare())}else return di;else{let a=n.get(e.name),l=i;return a&&(l=l.remove(new j(e.name,a))),l.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Is(this.indexes_,i=>{if(i===di)return i;{let s=n.get(e.name);return s?i.remove(new j(e.name,s)):i}});return new t(r,this.indexSet_)}};var Os,x=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&yE(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Os||(Os=new t(new nt(Vh),null,vi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Os}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Os:r}}getChild(n){let r=$(n);return r===null?this:this.getImmediateChild(r).getChild(ee(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(m(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new j(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Os:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=$(n);if(i===null)return r;{m($(n)!==".priority"||Cn(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(ee(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(ae,(a,l)=>{r[a]=l.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let l in r)a[l]=r[l];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+mE(this.getPriority().val())+":"),this.forEachChild(ae,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":qw(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new j(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new j(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new j(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,j.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,j.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Qs?-1:0}withIndex(n){if(n===pi||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===pi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ae),s=r.getIterator(ae),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===pi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),rh=class extends x{constructor(){super(new nt(Vh),x.EMPTY_NODE,vi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return x.EMPTY_NODE}isEmpty(){return!1}},Qs=new rh;Object.defineProperties(j,{MIN:{value:new j(gi,x.EMPTY_NODE)},MAX:{value:new j(cr,Qs)}});dl.__EMPTY_NODE=x.EMPTY_NODE;yi.__childrenNodeConstructor=x;qx(Qs);Qx(Qs);var Yx=!0;function ye(t,e=null){if(t===null)return x.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new yi(n,ye(e))}if(!(t instanceof Array)&&Yx){let n=[],r=!1;if(ke(t,(o,a)=>{if(o.substring(0,1)!=="."){let l=ye(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new j(o,l)))}}),n.length===0)return x.EMPTY_NODE;let s=fl(n,Wx,o=>o.name,Vh);if(r){let o=fl(n,ae.getCompare());return new x(s,ye(e),new vi({".priority":o},{".priority":ae}))}else return new x(s,ye(e),vi.Default)}else{let n=x.EMPTY_NODE;return ke(t,(r,i)=>{if(Rt(t,r)&&r.substring(0,1)!=="."){let s=ye(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ye(e))}}Gx(ye);var ih=class extends mi{constructor(e){super(),this.indexPath_=e,m(!V(e)&&$(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Di(e.name,n.name):s}makePost(e,n){let r=ye(e),i=x.EMPTY_NODE.updateChild(this.indexPath_,r);return new j(n,i)}maxPost(){let e=x.EMPTY_NODE.updateChild(this.indexPath_,Qs);return new j(cr,e)}toString(){return fE(this.indexPath_,0).join("/")}};var sh=class extends mi{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Di(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return j.MIN}maxPost(){return j.MAX}makePost(e,n){let r=ye(e);return new j(n,r)}toString(){return".value"}},Zx=new sh;function wE(t){return{type:"value",snapshotNode:t}}function _i(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Bs(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function $s(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Xx(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Us=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Bs(n,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(_i(n,r)):o.trackChildChange($s(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ae,(i,s)=>{n.hasChild(i)||r.trackChildChange(Bs(i,s))}),n.isLeafNode()||n.forEachChild(ae,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange($s(i,s,o))}else r.trackChildChange(_i(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?x.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var hl=class t{constructor(e){this.indexedFilter_=new Us(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new j(n,r))||(r=x.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=x.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(x.EMPTY_NODE);let s=this;return n.forEachChild(ae,(o,a)=>{s.matches(new j(o,a))||(i=i.updateImmediateChild(o,x.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var oh=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new hl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new j(n,r))||(r=x.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=x.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=x.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(x.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,x.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();let a=e;m(a.numChildren()===this.limit_,"");let l=new j(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:o(f,l);if(u&&!r.isEmpty()&&h>=0)return s?.trackChildChange($s(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(Bs(n,d));let g=a.updateImmediateChild(n,x.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(_i(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}}else return r.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Bs(c.name,c.node)),s.trackChildChange(_i(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,x.EMPTY_NODE)):e}};var ah=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gi}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ae}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Jx(t){return t.loadsAllData()?new Us(t.getIndex()):t.hasLimit()?new oh(t):new hl(t)}function Nw(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ae?n="$priority":t.index_===Zx?n="$value":t.index_===pi?n="$key":(m(t.index_ instanceof ih,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=de(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=de(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+de(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=de(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+de(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Aw(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ae&&(e.i=t.index_.toString()),e}var lh=class t extends ll{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Gs("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let l=Nw(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),tr(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=Nw(e._queryParams),r=e._path.toString(),i=new vn;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Q_(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=ci(a.responseText)}catch{Pe("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Pe("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var ch=class{constructor(){this.rootNode_=x.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function pl(){return{value:null,children:new Map}}function EE(t,e,n){if(V(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=$(e);t.children.has(r)||t.children.set(r,pl());let i=t.children.get(r);e=ee(e),EE(i,e,n)}}function uh(t,e,n){t.value!==null?n(e,t.value):eR(t,(r,i)=>{let s=new Z(e.toString()+"/"+r);uh(i,s,n)})}function eR(t,e){t.children.forEach((n,r)=>{e(r,n)})}var dh=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ke(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var xw=10*1e3,tR=30*1e3,nR=5*60*1e3,fh=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new dh(e);let r=xw+(tR-xw)*Math.random();ks(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;ke(e,(i,s)=>{s>0&&Rt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ks(this.reportStats_.bind(this),Math.floor(Math.random()*2*nR))}};var Pt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Pt||{});function DE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Bh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $h(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var hh=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Pt.ACK_USER_WRITE,this.source=DE()}operationForChild(e){if(V(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Z(e));return new t(G(),n,this.revert)}}else return m($(this.path)===e,"operationForChild called for unrelated child."),new t(ee(this.path),this.affectedTree,this.revert)}};var gl=class t{constructor(e,n){this.source=e,this.path=n,this.type=Pt.LISTEN_COMPLETE}operationForChild(e){return V(this.path)?new t(this.source,G()):new t(this.source,ee(this.path))}};var wi=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Pt.OVERWRITE}operationForChild(e){return V(this.path)?new t(this.source,G(),this.snap.getImmediateChild(e)):new t(this.source,ee(this.path),this.snap)}};var ml=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Pt.MERGE}operationForChild(e){if(V(this.path)){let n=this.children.subtree(new Z(e));return n.isEmpty()?null:n.value?new wi(this.source,G(),n.value):new t(this.source,G(),n)}else return m($(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ee(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var kt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(V(e))return this.isFullyInitialized()&&!this.filtered_;let n=$(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var ph=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function rR(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Xx(o.childName,o.snapshotNode))}),Ps(t,i,"child_removed",e,r,n),Ps(t,i,"child_added",e,r,n),Ps(t,i,"child_moved",s,r,n),Ps(t,i,"child_changed",e,r,n),Ps(t,i,"value",e,r,n),i}function Ps(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,l)=>sR(t,a,l)),o.forEach(a=>{let l=iR(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function iR(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function sR(t,e,n){if(e.childName==null||n.childName==null)throw er("Should only compare child_ events.");let r=new j(e.childName,e.snapshotNode),i=new j(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Sl(t,e){return{eventCache:t,serverCache:e}}function Ls(t,e,n,r){return Sl(new kt(e,n,r),t.serverCache)}function CE(t,e,n,r){return Sl(t.eventCache,new kt(e,n,r))}function yl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ur(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ff,oR=()=>(Ff||(Ff=new nt(ax)),Ff),Fe=class t{constructor(e,n=oR()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return ke(e,(r,i)=>{n=n.set(new Z(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:G(),value:this.value};if(V(e))return null;{let r=$(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(ee(e),n);return s!=null?{path:pe(new Z(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(V(e))return this;{let n=$(e),r=this.children.get(n);return r!==null?r.subtree(ee(e)):new t(null)}}set(e,n){if(V(e))return new t(n,this.children);{let r=$(e),s=(this.children.get(r)||new t(null)).set(ee(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(V(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=$(e),r=this.children.get(n);if(r){let i=r.remove(ee(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(V(e))return this.value;{let n=$(e),r=this.children.get(n);return r?r.get(ee(e)):null}}setTree(e,n){if(V(e))return n;{let r=$(e),s=(this.children.get(r)||new t(null)).setTree(ee(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(G(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(pe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,G(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(V(e))return null;{let s=$(e),o=this.children.get(s);return o?o.findOnPath_(ee(e),pe(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,G(),n)}foreachOnPath_(e,n,r){if(V(e))return this;{this.value&&r(n,this.value);let i=$(e),s=this.children.get(i);return s?s.foreachOnPath_(ee(e),pe(n,i),r):new t(null)}}foreach(e){this.foreach_(G(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(pe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var mt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Fe(null))}};function js(t,e,n){if(V(e))return new mt(new Fe(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Ae(i,e);return s=s.updateChild(o,n),new mt(t.writeTree_.set(i,s))}else{let i=new Fe(n),s=t.writeTree_.setTree(e,i);return new mt(s)}}}function Rw(t,e,n){let r=t;return ke(n,(i,s)=>{r=js(r,pe(e,i),s)}),r}function Ow(t,e){if(V(e))return mt.empty();{let n=t.writeTree_.setTree(e,new Fe(null));return new mt(n)}}function gh(t,e){return dr(t,e)!=null}function dr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ae(n.path,e)):null}function Pw(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ae,(r,i)=>{e.push(new j(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new j(r,i.value))}),e}function En(t,e){if(V(e))return t;{let n=dr(t,e);return n!=null?new mt(new Fe(n)):new mt(t.writeTree_.subtree(e))}}function mh(t){return t.writeTree_.isEmpty()}function Ei(t,e){return bE(G(),t.writeTree_,e)}function bE(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(m(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=bE(pe(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(pe(t,".priority"),r)),n}}function Tl(t,e){return ME(e,t)}function aR(t,e,n,r,i){m(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=js(t.visibleWrites,e,n)),t.lastWriteId=r}function lR(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function cR(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);m(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&uR(a,r.path)?i=!1:gt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return dR(t),!0;if(r.snap)t.visibleWrites=Ow(t.visibleWrites,r.path);else{let a=r.children;ke(a,l=>{t.visibleWrites=Ow(t.visibleWrites,pe(r.path,l))})}return!0}else return!1}function uR(t,e){if(t.snap)return gt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&gt(pe(t.path,n),e))return!0;return!1}function dR(t){t.visibleWrites=IE(t.allWrites,fR,G()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function fR(t){return t.visible}function IE(t,e,n){let r=mt.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)gt(n,o)?(a=Ae(n,o),r=js(r,a,s.snap)):gt(o,n)&&(a=Ae(o,n),r=js(r,G(),s.snap.getChild(a)));else if(s.children){if(gt(n,o))a=Ae(n,o),r=Rw(r,a,s.children);else if(gt(o,n))if(a=Ae(o,n),V(a))r=Rw(r,G(),s.children);else{let l=tr(s.children,$(a));if(l){let c=l.getChild(ee(a));r=js(r,G(),c)}}}else throw er("WriteRecord should have .snap or .children")}}return r}function SE(t,e,n,r,i){if(!r&&!i){let s=dr(t.visibleWrites,e);if(s!=null)return s;{let o=En(t.visibleWrites,e);if(mh(o))return n;if(n==null&&!gh(o,G()))return null;{let a=n||x.EMPTY_NODE;return Ei(o,a)}}}else{let s=En(t.visibleWrites,e);if(!i&&mh(s))return n;if(!i&&n==null&&!gh(s,G()))return null;{let o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(gt(c.path,e)||gt(e,c.path))},a=IE(t.allWrites,o,e),l=n||x.EMPTY_NODE;return Ei(a,l)}}}function hR(t,e,n){let r=x.EMPTY_NODE,i=dr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ae,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=En(t.visibleWrites,e);return n.forEachChild(ae,(o,a)=>{let l=Ei(En(s,new Z(o)),a);r=r.updateImmediateChild(o,l)}),Pw(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=En(t.visibleWrites,e);return Pw(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function pR(t,e,n,r,i){m(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=pe(e,n);if(gh(t.visibleWrites,s))return null;{let o=En(t.visibleWrites,s);return mh(o)?i.getChild(n):Ei(o,i.getChild(n))}}function gR(t,e,n,r){let i=pe(e,n),s=dr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=En(t.visibleWrites,i);return Ei(o,r.getNode().getImmediateChild(n))}else return null}function mR(t,e){return dr(t.visibleWrites,e)}function yR(t,e,n,r,i,s,o){let a,l=En(t.visibleWrites,e),c=dr(l,G());if(c!=null)a=c;else if(n!=null)a=Ei(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function vR(){return{visibleWrites:mt.empty(),allWrites:[],lastWriteId:-1}}function vl(t,e,n,r){return SE(t.writeTree,t.treePath,e,n,r)}function Uh(t,e){return hR(t.writeTree,t.treePath,e)}function kw(t,e,n,r){return pR(t.writeTree,t.treePath,e,n,r)}function _l(t,e){return mR(t.writeTree,pe(t.treePath,e))}function _R(t,e,n,r,i,s){return yR(t.writeTree,t.treePath,e,n,r,i,s)}function Hh(t,e,n){return gR(t.writeTree,t.treePath,e,n)}function TE(t,e){return ME(pe(t.treePath,e),t.writeTree)}function ME(t,e){return{treePath:t,writeTree:e}}var yh=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;m(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),m(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,$s(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Bs(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,_i(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,$s(r,e.snapshotNode,i.oldSnap));else throw er("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var vh=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},NE=new vh,Hs=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new kt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Hh(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ur(this.viewCache_),s=_R(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function wR(t){return{filter:t}}function ER(t,e){m(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function DR(t,e,n,r,i){let s=new yh,o,a;if(n.type===Pt.OVERWRITE){let c=n;c.source.fromUser?o=_h(t,e,c.path,c.snap,r,i,s):(m(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!V(c.path),o=wl(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Pt.MERGE){let c=n;c.source.fromUser?o=bR(t,e,c.path,c.children,r,i,s):(m(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=wh(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Pt.ACK_USER_WRITE){let c=n;c.revert?o=TR(t,e,c.path,r,i,s):o=IR(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===Pt.LISTEN_COMPLETE)o=SR(t,e,n.path,r,s);else throw er("Unknown operation type: "+n.type);let l=s.getChanges();return CR(e,o,l),{viewCache:o,changes:l}}function CR(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=yl(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(wE(yl(e)))}}function AE(t,e,n,r,i,s){let o=e.eventCache;if(_l(r,n)!=null)return e;{let a,l;if(V(n))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=ur(e),u=c instanceof x?c:x.EMPTY_NODE,d=Uh(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let c=vl(r,ur(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{let c=$(n);if(c===".priority"){m(Cn(n)===1,"Can't have a priority with additional path components");let u=o.getNode();l=e.serverCache.getNode();let d=kw(r,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=ee(n),d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let f=kw(r,n,o.getNode(),l);f!=null?d=o.getNode().getImmediateChild(c).updateChild(u,f):d=o.getNode().getImmediateChild(c)}else d=Hh(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,i,s):a=o.getNode()}}return Ls(e,a,o.isFullyInitialized()||V(n),t.filter.filtersNodes())}}function wl(t,e,n,r,i,s,o,a){let l=e.serverCache,c,u=o?t.filter:t.filter.getIndexedFilter();if(V(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){let h=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),h,null)}else{let h=$(n);if(!l.isCompleteForPath(n)&&Cn(n)>1)return e;let p=ee(n),v=l.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?c=u.updatePriority(l.getNode(),v):c=u.updateChild(l.getNode(),h,v,p,NE,null)}let d=CE(e,c,l.isFullyInitialized()||V(n),u.filtersNodes()),f=new Hs(i,d,s);return AE(t,d,n,i,f,a)}function _h(t,e,n,r,i,s,o){let a=e.eventCache,l,c,u=new Hs(i,e,s);if(V(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Ls(e,c,!0,t.filter.filtersNodes());else{let d=$(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Ls(e,c,a.isFullyInitialized(),a.isFiltered());else{let f=ee(n),h=a.getNode().getImmediateChild(d),p;if(V(f))p=r;else{let g=u.getCompleteChild(d);g!=null?dE(f)===".priority"&&g.getChild(hE(f)).isEmpty()?p=g:p=g.updateChild(f,r):p=x.EMPTY_NODE}if(h.equals(p))l=e;else{let g=t.filter.updateChild(a.getNode(),d,p,f,u,o);l=Ls(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Fw(t,e){return t.eventCache.isCompleteForChild(e)}function bR(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{let u=pe(n,l);Fw(e,$(u))&&(a=_h(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{let u=pe(n,l);Fw(e,$(u))||(a=_h(t,a,u,c,i,s,o))}),a}function Lw(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function wh(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;V(n)?c=r:c=new Fe(null).setTree(n,r);let u=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=Lw(t,h,f);l=wl(t,l,new Z(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),g=Lw(t,p,f);l=wl(t,l,new Z(d),g,i,s,o,a)}}),l}function IR(t,e,n,r,i,s,o){if(_l(i,n)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(V(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return wl(t,e,n,l.getNode().getChild(n),i,s,a,o);if(V(n)){let c=new Fe(null);return l.getNode().forEachChild(pi,(u,d)=>{c=c.set(new Z(u),d)}),wh(t,e,n,c,i,s,a,o)}else return e}else{let c=new Fe(null);return r.foreach((u,d)=>{let f=pe(n,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),wh(t,e,n,c,i,s,a,o)}}function SR(t,e,n,r,i){let s=e.serverCache,o=CE(e,s.getNode(),s.isFullyInitialized()||V(n),s.isFiltered());return AE(t,o,n,r,NE,i)}function TR(t,e,n,r,i,s){let o;if(_l(r,n)!=null)return e;{let a=new Hs(r,e,i),l=e.eventCache.getNode(),c;if(V(n)||$(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=vl(r,ur(e));else{let d=e.serverCache.getNode();m(d instanceof x,"serverChildren would be complete if leaf node"),u=Uh(r,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{let u=$(n),d=Hh(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,ee(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,x.EMPTY_NODE,ee(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=vl(r,ur(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||_l(r,G())!=null,Ls(e,c,o,t.filter.filtersNodes())}}var Eh=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Us(r.getIndex()),s=Jx(r);this.processor_=wR(s);let o=n.serverCache,a=n.eventCache,l=i.updateFullNode(x.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(x.EMPTY_NODE,a.getNode(),null),u=new kt(l,o.isFullyInitialized(),i.filtersNodes()),d=new kt(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Sl(d,u),this.eventGenerator_=new ph(this.query_)}get query(){return this.query_}};function MR(t){return t.viewCache_.serverCache.getNode()}function NR(t){return yl(t.viewCache_)}function AR(t,e){let n=ur(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!V(e)&&!n.getImmediateChild($(e)).isEmpty())?n.getChild(e):null}function jw(t){return t.eventRegistrations_.length===0}function xR(t,e){t.eventRegistrations_.push(e)}function Vw(t,e,n){let r=[];if(n){m(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Bw(t,e,n,r){e.type===Pt.MERGE&&e.source.queryId!==null&&(m(ur(t.viewCache_),"We should always have a full cache before handling merges"),m(yl(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=DR(t.processor_,i,e,n,r);return ER(t.processor_,s.viewCache),m(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,xE(t,s.changes,s.viewCache.eventCache.getNode(),null)}function RR(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ae,(s,o)=>{r.push(_i(s,o))}),n.isFullyInitialized()&&r.push(wE(n.getNode())),xE(t,r,n.getNode(),e)}function xE(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return rR(t.eventGenerator_,e,n,i)}var El,Dl=class{constructor(){this.views=new Map}};function OR(t){m(!El,"__referenceConstructor has already been defined"),El=t}function PR(){return m(El,"Reference.ts has not been loaded"),El}function kR(t){return t.views.size===0}function zh(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return m(s!=null,"SyncTree gave us an op for an invalid query."),Bw(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(Bw(o,e,n,r));return s}}function RE(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=vl(n,i?r:null),l=!1;a?l=!0:r instanceof x?(a=Uh(n,r),l=!1):(a=x.EMPTY_NODE,l=!1);let c=Sl(new kt(a,l,!1),new kt(r,i,!1));return new Eh(e,c)}return o}function FR(t,e,n,r,i,s){let o=RE(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),xR(o,n),RR(o,n)}function LR(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=bn(t);if(i==="default")for(let[l,c]of t.views.entries())o=o.concat(Vw(c,n,r)),jw(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{let l=t.views.get(i);l&&(o=o.concat(Vw(l,n,r)),jw(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!bn(t)&&s.push(new(PR())(e._repo,e._path)),{removed:s,events:o}}function OE(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Dn(t,e){let n=null;for(let r of t.views.values())n=n||AR(r,e);return n}function PE(t,e){if(e._queryParams.loadsAllData())return Ml(t);{let r=e._queryIdentifier;return t.views.get(r)}}function kE(t,e){return PE(t,e)!=null}function bn(t){return Ml(t)!=null}function Ml(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Cl;function jR(t){m(!Cl,"__referenceConstructor has already been defined"),Cl=t}function VR(){return m(Cl,"Reference.ts has not been loaded"),Cl}var BR=1,bl=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fe(null),this.pendingWriteTree_=vR(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function FE(t,e,n,r,i){return aR(t.pendingWriteTree_,e,n,r,i),i?Ys(t,new wi(DE(),e,n)):[]}function ar(t,e,n=!1){let r=lR(t.pendingWriteTree_,e);if(cR(t.pendingWriteTree_,e)){let s=new Fe(null);return r.snap!=null?s=s.set(G(),!0):ke(r.children,o=>{s=s.set(new Z(o),!0)}),Ys(t,new hh(r.path,s,n))}else return[]}function Ks(t,e,n){return Ys(t,new wi(Bh(),e,n))}function $R(t,e,n){let r=Fe.fromObject(n);return Ys(t,new ml(Bh(),e,r))}function UR(t,e){return Ys(t,new gl(Bh(),e))}function HR(t,e,n){let r=qh(t,n);if(r){let i=Gh(r),s=i.path,o=i.queryId,a=Ae(s,e),l=new gl($h(o),a);return Qh(t,s,l)}else return[]}function LE(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||kE(o,e))){let l=LR(o,e,n,r);kR(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let c=l.removed;if(a=l.events,!i){let u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,h)=>bn(h));if(u&&!d){let f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){let h=GR(f);for(let p=0;p<h.length;++p){let g=h[p],v=g.query,C=$E(t,g);t.listenProvider_.startListening(Vs(v),zs(t,v),C.hashFn,C.onComplete)}}}!d&&c.length>0&&!r&&(u?t.listenProvider_.stopListening(Vs(e),null):c.forEach(f=>{let h=t.queryToTagMap.get(Nl(f));t.listenProvider_.stopListening(Vs(f),h)}))}QR(t,c)}return a}function jE(t,e,n,r){let i=qh(t,r);if(i!=null){let s=Gh(i),o=s.path,a=s.queryId,l=Ae(o,e),c=new wi($h(a),l,n);return Qh(t,o,c)}else return[]}function zR(t,e,n,r){let i=qh(t,r);if(i){let s=Gh(i),o=s.path,a=s.queryId,l=Ae(o,e),c=Fe.fromObject(n),u=new ml($h(a),l,c);return Qh(t,o,u)}else return[]}function WR(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Ae(f,i);s=s||Dn(h,p),o=o||bn(h)});let a=t.syncPointTree_.get(i);a?(o=o||bn(a),s=s||Dn(a,G())):(a=new Dl,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=x.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let g=Dn(p,G());g&&(s=s.updateImmediateChild(h,g))}));let c=kE(a,e);if(!c&&!e._queryParams.loadsAllData()){let f=Nl(e);m(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=KR();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=Tl(t.pendingWriteTree_,i),d=FR(a,e,n,u,s,l);if(!c&&!o&&!r){let f=PE(a,e);d=d.concat(YR(t,e,f))}return d}function Wh(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let l=Ae(o,e),c=Dn(a,l);if(c)return c});return SE(i,e,s,n,!0)}function qR(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{let d=Ae(c,n);r=r||Dn(u,d)});let i=t.syncPointTree_.get(n);i?r=r||Dn(i,G()):(i=new Dl,t.syncPointTree_=t.syncPointTree_.set(n,i));let s=r!=null,o=s?new kt(r,!0,!1):null,a=Tl(t.pendingWriteTree_,e._path),l=RE(i,e,a,s?o.getNode():x.EMPTY_NODE,s);return NR(l)}function Ys(t,e){return VE(e,t.syncPointTree_,null,Tl(t.pendingWriteTree_,G()))}function VE(t,e,n,r){if(V(t.path))return BE(t,e,n,r);{let i=e.get(G());n==null&&i!=null&&(n=Dn(i,G()));let s=[],o=$(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){let c=n?n.getImmediateChild(o):null,u=TE(r,o);s=s.concat(VE(a,l,c,u))}return i&&(s=s.concat(zh(i,t,r,n))),s}}function BE(t,e,n,r){let i=e.get(G());n==null&&i!=null&&(n=Dn(i,G()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=n?n.getImmediateChild(o):null,c=TE(r,o),u=t.operationForChild(o);u&&(s=s.concat(BE(u,a,l,c)))}),i&&(s=s.concat(zh(i,t,r,n))),s}function $E(t,e){let n=e.query,r=zs(t,n);return{hashFn:()=>(MR(e)||x.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?HR(t,n._path,r):UR(t,n._path);{let s=ux(i,n);return LE(t,n,null,s)}}}}function zs(t,e){let n=Nl(e);return t.queryToTagMap.get(n)}function Nl(t){return t._path.toString()+"$"+t._queryIdentifier}function qh(t,e){return t.tagToQueryMap.get(e)}function Gh(t){let e=t.indexOf("$");return m(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Z(t.substr(0,e))}}function Qh(t,e,n){let r=t.syncPointTree_.get(e);m(r,"Missing sync point for query tag that we're tracking");let i=Tl(t.pendingWriteTree_,e);return zh(r,n,i,null)}function GR(t){return t.fold((e,n,r)=>{if(n&&bn(n))return[Ml(n)];{let i=[];return n&&(i=OE(n)),ke(r,(s,o)=>{i=i.concat(o)}),i}})}function Vs(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(VR())(t._repo,t._path):t}function QR(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Nl(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function KR(){return BR++}function YR(t,e,n){let r=e._path,i=zs(t,e),s=$E(t,n),o=t.listenProvider_.startListening(Vs(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)m(!bn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,u,d)=>{if(!V(c)&&u&&bn(u))return[Ml(u).query];{let f=[];return u&&(f=f.concat(OE(u).map(h=>h.query))),ke(d,(h,p)=>{f=f.concat(p)}),f}});for(let c=0;c<l.length;++c){let u=l[c];t.listenProvider_.stopListening(Vs(u),zs(t,u))}}return o}var Dh=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Ch=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=pe(this.path_,e);return new t(this.syncTree_,n)}node(){return Wh(this.syncTree_,this.path_)}},ZR=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},$w=function(t,e,n){if(!t||typeof t!="object")return t;if(m(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return XR(t[".sv"],e,n);if(typeof t[".sv"]=="object")return JR(t[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},XR=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:m(!1,"Unexpected server value: "+t)}},JR=function(t,e,n){t.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&m(!1,"Unexpected increment value: "+r);let i=e.node();if(m(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},eO=function(t,e,n,r){return Kh(e,new Ch(n,t),r)},UE=function(t,e,n){return Kh(t,new Dh(e),n)};function Kh(t,e,n){let r=t.getPriority().val(),i=$w(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=$w(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new yi(a,ye(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new yi(i))),o.forEachChild(ae,(a,l)=>{let c=Kh(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}var Ws=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Yh(t,e){let n=e instanceof Z?e:new Z(e),r=t,i=$(n);for(;i!==null;){let s=tr(r.node.children,i)||{children:{},childCount:0};r=new Ws(i,r,s),n=ee(n),i=$(n)}return r}function bi(t){return t.node.value}function HE(t,e){t.node.value=e,bh(t)}function zE(t){return t.node.childCount>0}function tO(t){return bi(t)===void 0&&!zE(t)}function Al(t,e){ke(t.node.children,(n,r)=>{e(new Ws(n,t,r))})}function WE(t,e,n,r){n&&!r&&e(t),Al(t,i=>{WE(i,e,!0,r)}),n&&r&&e(t)}function nO(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Zs(t){return new Z(t.parent===null?t.name:Zs(t.parent)+"/"+t.name)}function bh(t){t.parent!==null&&rO(t.parent,t.name,t)}function rO(t,e,n){let r=tO(n),i=Rt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,bh(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,bh(t))}var iO=/[\[\].#$\/\u0000-\u001F\u007F]/,sO=/[\[\].#$\u0000-\u001F\u007F]/,Lf=10*1024*1024,qE=function(t){return typeof t=="string"&&t.length!==0&&!iO.test(t)},GE=function(t){return typeof t=="string"&&t.length!==0&&!sO.test(t)},oO=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),GE(t)};var aO=function(t,e,n,r){r&&e===void 0||Zh(el(t,"value"),e,n)},Zh=function(t,e,n){let r=n instanceof Z?new Zf(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+sr(r));if(typeof e=="function")throw new Error(t+"contains a function "+sr(r)+" with contents = "+e.toString());if(Gw(e))throw new Error(t+"contains "+e.toString()+" "+sr(r));if(typeof e=="string"&&e.length>Lf/3&&Ss(e)>Lf)throw new Error(t+"contains a string greater than "+Lf+" utf8 bytes "+sr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(ke(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!qE(o)))throw new Error(t+" contains an invalid key ("+o+") "+sr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Vx(r,o),Zh(t,a,r),Bx(r)}),i&&s)throw new Error(t+' contains ".value" child '+sr(r)+" in addition to actual children.")}};var QE=function(t,e,n,r){if(!(r&&n===void 0)&&!GE(n))throw new Error(el(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},lO=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),QE(t,e,n,r)},cO=function(t,e){if($(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},uO=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!oO(n))throw new Error(el(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Ih=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function KE(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!pE(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ft(t,e,n){KE(t,n),dO(t,r=>gt(r,e)||gt(e,r))}function dO(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(fO(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function fO(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();lr&&Se("event: "+n.toString()),Ci(r)}}}var hO="repo_interrupt",pO=25,Sh=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ih,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pl(),this.transactionQueueTree_=new Ws,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function gO(t,e,n){if(t.stats_=Lh(t.repoInfo_),t.forceRestClient_||px())t.server_=new lh(t.repoInfo_,(r,i,s,o)=>{Uw(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Hw(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{de(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new jh(t.repoInfo_,e,(r,i,s,o)=>{Uw(t,r,i,s,o)},r=>{Hw(t,r)},r=>{yO(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=mx(t.repoInfo_,()=>new fh(t.stats_,t.server_)),t.infoData_=new ch,t.infoSyncTree_=new bl({startListening:(r,i,s,o)=>{let a=[],l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Ks(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Jh(t,"connected",!1),t.serverSyncTree_=new bl({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{let c=o(a,l);Ft(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function mO(t){let n=t.infoData_.getNode(new Z(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Xh(t){return ZR({timestamp:mO(t)})}function Uw(t,e,n,r,i){t.dataUpdateCount++;let s=new Z(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let l=Is(n,c=>ye(c));o=zR(t.serverSyncTree_,s,l,i)}else{let l=ye(n);o=jE(t.serverSyncTree_,s,l,i)}else if(r){let l=Is(n,c=>ye(c));o=$R(t.serverSyncTree_,s,l)}else{let l=ye(n);o=Ks(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Rl(t,s)),Ft(t.eventQueue_,a,o)}function Hw(t,e){Jh(t,"connected",e),e===!1&&wO(t)}function yO(t,e){ke(e,(n,r)=>{Jh(t,n,r)})}function Jh(t,e,n){let r=new Z("/.info/"+e),i=ye(n);t.infoData_.updateSnapshot(r,i);let s=Ks(t.infoSyncTree_,r,i);Ft(t.eventQueue_,r,s)}function YE(t){return t.nextWriteId_++}function vO(t,e,n){let r=qR(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let s=ye(i).withIndex(e._queryParams.getIndex());WR(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Ks(t.serverSyncTree_,e._path,s);else{let a=zs(t.serverSyncTree_,e);o=jE(t.serverSyncTree_,e._path,s,a)}return Ft(t.eventQueue_,e._path,o),LE(t.serverSyncTree_,e,n,null,!0),s},i=>(xl(t,"get for query "+de(e)+" failed: "+i),Promise.reject(new Error(i))))}function _O(t,e,n,r,i){xl(t,"set",{path:e.toString(),value:n,priority:r});let s=Xh(t),o=ye(n,r),a=Wh(t.serverSyncTree_,e),l=UE(o,a,s),c=YE(t),u=FE(t.serverSyncTree_,e,l,c,!0);KE(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(f,h)=>{let p=f==="ok";p||Pe("set at "+e+" failed: "+f);let g=ar(t.serverSyncTree_,c,!p);Ft(t.eventQueue_,e,g),DO(t,i,f,h)});let d=tD(t,e);Rl(t,d),Ft(t.eventQueue_,d,[])}function wO(t){xl(t,"onDisconnectEvents");let e=Xh(t),n=pl();uh(t.onDisconnect_,G(),(i,s)=>{let o=eO(i,s,t.serverSyncTree_,e);EE(n,i,o)});let r=[];uh(n,G(),(i,s)=>{r=r.concat(Ks(t.serverSyncTree_,i,s));let o=tD(t,i);Rl(t,o)}),t.onDisconnect_=pl(),Ft(t.eventQueue_,G(),r)}function EO(t){t.persistentConnection_&&t.persistentConnection_.interrupt(hO)}function xl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Se(n,...e)}function DO(t,e,n,r){e&&Ci(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function ZE(t,e,n){return Wh(t.serverSyncTree_,e,n)||x.EMPTY_NODE}function ep(t,e=t.transactionQueueTree_){if(e||Ol(t,e),bi(e)){let n=JE(t,e);m(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&CO(t,Zs(e),n)}else zE(e)&&Al(e,n=>{ep(t,n)})}function CO(t,e,n){let r=n.map(c=>c.currentWriteId),i=ZE(t,e,r),s=i,o=i.hash();for(let c=0;c<n.length;c++){let u=n[c];m(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ae(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{xl(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(ar(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Ol(t,Yh(t.transactionQueueTree_,e)),ep(t,t.transactionQueueTree_),Ft(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Ci(d[f])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Pe("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Rl(t,e)}},o)}function Rl(t,e){let n=XE(t,e),r=Zs(n),i=JE(t,n);return bO(t,i,r),r}function bO(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=Ae(n,l.path),u=!1,d;if(m(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(ar(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=pO)u=!0,d="maxretry",i=i.concat(ar(t.serverSyncTree_,l.currentWriteId,!0));else{let f=ZE(t,l.path,o);l.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){Zh("transaction failed: Data returned ",h,l.path);let p=ye(h);typeof h=="object"&&h!=null&&Rt(h,".priority")||(p=p.updatePriority(f.getPriority()));let v=l.currentWriteId,C=Xh(t),U=UE(p,f,C);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=U,l.currentWriteId=YE(t),o.splice(o.indexOf(v),1),i=i.concat(FE(t.serverSyncTree_,l.path,U,l.currentWriteId,l.applyLocally)),i=i.concat(ar(t.serverSyncTree_,v,!0))}else u=!0,d="nodata",i=i.concat(ar(t.serverSyncTree_,l.currentWriteId,!0))}Ft(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Ol(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ci(r[a]);ep(t,t.transactionQueueTree_)}function XE(t,e){let n,r=t.transactionQueueTree_;for(n=$(e);n!==null&&bi(r)===void 0;)r=Yh(r,n),e=ee(e),n=$(e);return r}function JE(t,e){let n=[];return eD(t,e,n),n.sort((r,i)=>r.order-i.order),n}function eD(t,e,n){let r=bi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Al(e,i=>{eD(t,i,n)})}function Ol(t,e){let n=bi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,HE(e,n.length>0?n:void 0)}Al(e,r=>{Ol(t,r)})}function tD(t,e){let n=Zs(XE(t,e)),r=Yh(t.transactionQueueTree_,e);return nO(r,i=>{jf(t,i)}),jf(t,r),WE(r,i=>{jf(t,i)}),n}function jf(t,e){let n=bi(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(m(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(m(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ar(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?HE(e,void 0):n.length=s+1,Ft(t.eventQueue_,Zs(e),i);for(let o=0;o<r.length;o++)Ci(r[o])}}function IO(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function SO(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Pe(`Invalid query segment '${n}' in query '${t}'`)}return e}var zw=function(t,e){let n=TO(t),r=n.namespace;n.domain==="firebase.com"&&Yt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Yt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||sx();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ol(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Z(n.pathString)}},TO=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=IO(t.substring(u,d)));let f=SO(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let h=e.slice(0,c);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Th=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+de(this.snapshot.exportVal())}},Mh=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Nh=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Ah=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return V(this._path)?null:dE(this._path)}get ref(){return new Zt(this._repo,this._path)}get _queryIdentifier(){let e=Aw(this._queryParams),n=Fh(e);return n==="{}"?"default":n}get _queryObject(){return Aw(this._queryParams)}isEqual(e){if(e=nr(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=pE(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+jx(this._path)}};var Zt=class t extends Ah{constructor(e,n){super(e,n,new ah,!1)}get parent(){let e=hE(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Il=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new Z(e),r=xh(this.ref,e);return new t(this._node.getChild(n),r,ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,xh(this.ref,r),ae)))}hasChild(e){let n=new Z(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function tp(t,e){return t=nr(t),t._checkNotDeleted("ref"),e!==void 0?xh(t._root,e):t._root}function xh(t,e){return t=nr(t),$(t._path)===null?lO("child","path",e,!1):QE("child","path",e,!1),new Zt(t._repo,pe(t._path,e))}function nD(t,e){t=nr(t),cO("set",t._path),aO("set",e,t._path,!1);let n=new vn;return _O(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function rD(t){t=nr(t);let e=new Nh(()=>{}),n=new Rh(e);return vO(t._repo,t,n).then(r=>new Il(r,new Zt(t._repo,t._path),t._queryParams.getIndex()))}var Rh=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Th("value",this,new Il(e.snapshotNode,new Zt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Mh(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}};OR(Zt);jR(Zt);var MO="FIREBASE_DATABASE_EMULATOR_HOST",Oh={},NO=!1;function AO(t,e,n,r){t.repoInfo_=new ol(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function xO(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Yt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Se("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=zw(s,i),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[MO]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=zw(s,i),a=o.repoInfo):l=!o.repoInfo.secure;let u=i&&l?new Fs(Fs.OWNER):new zf(t.name,t.options,e);uO("Invalid Firebase Database URL",o),V(o.path)||Yt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=OO(a,t,u,new Hf(t.name,n));return new Ph(d,t)}function RO(t,e){let n=Oh[e];(!n||n[t.key]!==t)&&Yt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),EO(t),delete n[t.key]}function OO(t,e,n,r){let i=Oh[e.name];i||(i={},Oh[e.name]=i);let s=i[t.toURLString()];return s&&Yt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Sh(t,NO,n,r),i[t.toURLString()]=s,s}var Ph=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(gO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zt(this._repo,G())),this._rootInternal}_delete(){return this._rootInternal!==null&&(RO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Yt("Cannot call "+e+" on a deleted database.")}};function np(t=uw(),e){let n=lw(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=B_("database");r&&PO(n,...r)}return n}function PO(t,e,n,r={}){t=nr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Yt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Yt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Fs(Fs.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:$_(r.mockUserToken,t.app.options.projectId);s=new Fs(o)}AO(i,e,n,s)}function kO(t){nx(cw),Ms(new Kt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return xO(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),wn(hw,pw,t),wn(hw,pw,"esm2017")}jh.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};jh.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};kO();var iD={apiKey:"AIzaSyBFNn8bOJwSlczp0HZKzrrH4g0iH0PHfd4",authDomain:"cardo-425721.firebaseapp.com",databaseURL:"https://cardo-425721-default-rtdb.firebaseio.com",projectId:"cardo-425721",storageBucket:"cardo-425721.appspot.com",messagingSenderId:"887682909859",appId:"1:887682909859:web:d3bee13fad508780f52116"};var sD=(()=>{let e=class e{constructor(){this.app=xf(iD)}getCards(){let r=np(this.app),i=tp(r,"cards");return rD(i).then(s=>s.exists()?s.toJSON():null)}writeCards(r){let i=np(this.app),s=tp(i,"cards");nD(s,r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function LO(t,e){if(t&1){let n=hv();Ee(0,"app-card",3),Zr("swiped",function(i){qm(n);let s=Xr(2);return Gm(s.handleSwiped(i))}),$e()}if(t&2){let n=Xr().$implicit;hn("front",n.front)("back",n.back)("color",n.color)}}function jO(t,e){if(t&1&&(rd(0),Yr(1,LO,1,3,"app-card",2),id()),t&2){let n=e.index,r=Xr();Qr(),hn("ngIf",n===r.cards.length-1)}}var oD=(()=>{let e=class e{constructor(r){this.dbService=r,this.cards=[],this.ready=!1}ngOnInit(){this.dbService.getCards().then(r=>this.cards=Object.values(r))}handleSwiped(r){console.log(r?"right":"left"),this.cards.pop()}};e.\u0275fac=function(i){return new(i||e)(Tt(sD))},e.\u0275cmp=Ze({type:e,selectors:[["app-deck"]],standalone:!0,features:[et],decls:2,vars:1,consts:[[1,"deck"],[4,"ngFor","ngForOf"],[3,"front","back","color","swiped",4,"ngIf"],[3,"swiped","front","back","color"]],template:function(i,s){i&1&&(Ee(0,"div",0),Yr(1,jO,2,1,"ng-container",1),$e()),i&2&&(Qr(),hn("ngForOf",s.cards))},dependencies:[pn,Pv,Na,P_],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}[_nghost-%COMP%]{height:100%;padding:1rem}.deck[_ngcontent-%COMP%]{height:100%}"]});let t=e;return t})();var aD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["app-layout"]],standalone:!0,features:[et],decls:3,vars:0,consts:[[1,"content"]],template:function(i,s){i&1&&(Ee(0,"div",0),Je(1,"app-deck")(2,"app-navbar"),$e())},dependencies:[N_,oD],styles:["body[_ngcontent-%COMP%]{margin:0;background:#dedede;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.content[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100vw;height:100vh;overflow:hidden;display:flex;flex-direction:column;justify-content:space-between}"]});let t=e;return t})();var lD=[{path:"",component:aD}];function cD(t){return new y(3e3,!1)}function VO(){return new y(3100,!1)}function BO(){return new y(3101,!1)}function $O(t){return new y(3001,!1)}function UO(t){return new y(3003,!1)}function HO(t){return new y(3004,!1)}function zO(t,e){return new y(3005,!1)}function WO(){return new y(3006,!1)}function qO(){return new y(3007,!1)}function GO(t,e){return new y(3008,!1)}function QO(t){return new y(3002,!1)}function KO(t,e,n,r,i){return new y(3010,!1)}function YO(){return new y(3011,!1)}function ZO(){return new y(3012,!1)}function XO(){return new y(3200,!1)}function JO(){return new y(3202,!1)}function eP(){return new y(3013,!1)}function tP(t){return new y(3014,!1)}function nP(t){return new y(3015,!1)}function rP(t){return new y(3016,!1)}function iP(t,e){return new y(3404,!1)}function sP(t){return new y(3502,!1)}function oP(t){return new y(3503,!1)}function aP(){return new y(3300,!1)}function lP(t){return new y(3504,!1)}function cP(t){return new y(3301,!1)}function uP(t,e){return new y(3302,!1)}function dP(t){return new y(3303,!1)}function fP(t,e){return new y(3400,!1)}function hP(t){return new y(3401,!1)}function pP(t){return new y(3402,!1)}function gP(t,e){return new y(3505,!1)}function In(t){switch(t.length){case 0:return new yn;case 1:return t[0];default:return new Ds(t)}}function CD(t,e,n=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((f,h)=>{let p=h,g=f;if(h!=="offset")switch(p=t.normalizePropertyName(p,i),g){case Ya:g=n.get(h);break;case Nt:g=r.get(h);break;default:g=t.normalizeStyleValue(h,p,g,i);break}d.set(p,g)}),u||s.push(d),a=d,o=c}),i.length)throw sP(i);return s}function Ip(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&rp(n,"start",t)));break;case"done":t.onDone(()=>r(n&&rp(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&rp(n,"destroy",t)));break}}function rp(t,e,n){let r=n.totalTime,i=!!n.disabled,s=Sp(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,r??t.totalTime,i),o=t._data;return o!=null&&(s._data=o),s}function Sp(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function We(t,e,n){let r=t.get(e);return r||t.set(e,r=n),r}function uD(t){let e=t.indexOf(":"),n=t.substring(1,e),r=t.slice(e+1);return[n,r]}var mP=typeof document>"u"?null:document.documentElement;function Tp(t){let e=t.parentNode||t.host||null;return e===mP?null:e}function yP(t){return t.substring(1,6)=="ebkit"}var fr=null,dD=!1;function vP(t){fr||(fr=_P()||{},dD=fr.style?"WebkitAppearance"in fr.style:!1);let e=!0;return fr.style&&!yP(t)&&(e=t in fr.style,!e&&dD&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in fr.style)),e}function _P(){return typeof document<"u"?document.body:null}function bD(t,e){for(;e;){if(e===t)return!0;e=Tp(e)}return!1}function ID(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let r=t.querySelector(e);return r?[r]:[]}var Mp=(()=>{let e=class e{validateStyleProperty(r){return vP(r)}containsElement(r,i){return bD(r,i)}getParentElement(r){return Tp(r)}query(r,i,s){return ID(r,i,s)}computeStyle(r,i,s){return s||""}animate(r,i,s,o,a,l=[],c){return new yn(s,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Rp=class Rp{};Rp.NOOP=new Mp;var gr=Rp,mr=class{};var wP=1e3,SD="{{",EP="}}",TD="ng-enter",cp="ng-leave",Pl="ng-trigger",Vl=".ng-trigger",fD="ng-animating",up=".ng-animating";function Xt(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:dp(parseFloat(e[1]),e[2])}function dp(t,e){switch(e){case"s":return t*wP;default:return t}}function Bl(t,e,n){return t.hasOwnProperty("duration")?t:DP(t,e,n)}function DP(t,e,n){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof t=="string"){let a=t.match(r);if(a===null)return e.push(cD(t)),{duration:0,delay:0,easing:""};i=dp(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(s=dp(parseFloat(l),a[4]));let c=a[5];c&&(o=c)}else i=t;if(!n){let a=!1,l=e.length;i<0&&(e.push(VO()),a=!0),s<0&&(e.push(BO()),a=!0),a&&e.splice(l,0,cD(t))}return{duration:i,delay:s,easing:o}}function CP(t){return t.length?t[0]instanceof Map?t:t.map(e=>new Map(Object.entries(e))):[]}function Lt(t,e,n){e.forEach((r,i)=>{let s=Np(i);n&&!n.has(i)&&n.set(i,t.style[s]),t.style[s]=r})}function pr(t,e){e.forEach((n,r)=>{let i=Np(r);t.style[i]=""})}function Xs(t){return Array.isArray(t)?t.length==1?t[0]:A_(t):t}function bP(t,e,n){let r=e.params||{},i=MD(t);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||n.push($O(s))})}var fp=new RegExp(`${SD}\\s*(.+?)\\s*${EP}`,"g");function MD(t){let e=[];if(typeof t=="string"){let n;for(;n=fp.exec(t);)e.push(n[1]);fp.lastIndex=0}return e}function eo(t,e,n){let r=`${t}`,i=r.replace(fp,(s,o)=>{let a=e[o];return a==null&&(n.push(UO(o)),a=""),a.toString()});return i==r?t:i}var IP=/-+([a-z0-9])/g;function Np(t){return t.replace(IP,(...e)=>e[1].toUpperCase())}function SP(t,e){return t===0||e===0}function TP(t,e,n){if(n.size&&e.length){let r=e[0],i=[];if(n.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Ap(t,a)))}}return e}function ze(t,e,n){switch(e.type){case A.Trigger:return t.visitTrigger(e,n);case A.State:return t.visitState(e,n);case A.Transition:return t.visitTransition(e,n);case A.Sequence:return t.visitSequence(e,n);case A.Group:return t.visitGroup(e,n);case A.Animate:return t.visitAnimate(e,n);case A.Keyframes:return t.visitKeyframes(e,n);case A.Style:return t.visitStyle(e,n);case A.Reference:return t.visitReference(e,n);case A.AnimateChild:return t.visitAnimateChild(e,n);case A.AnimateRef:return t.visitAnimateRef(e,n);case A.Query:return t.visitQuery(e,n);case A.Stagger:return t.visitStagger(e,n);default:throw HO(e.type)}}function Ap(t,e){return window.getComputedStyle(t)[e]}var MP=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),$l=class extends mr{normalizePropertyName(e,n){return Np(e)}normalizeStyleValue(e,n,r,i){let s="",o=r.toString().trim();if(MP.has(n)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(zO(e,r))}return o+s}};var Ul="*";function NP(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(r=>AP(r,n,e)):n.push(t),n}function AP(t,e,n){if(t[0]==":"){let l=xP(t,n);if(typeof l=="function"){e.push(l);return}t=l}let r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return n.push(nP(t)),e;let i=r[1],s=r[2],o=r[3];e.push(hD(i,o));let a=i==Ul&&o==Ul;s[0]=="<"&&!a&&e.push(hD(o,i))}function xP(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return e.push(rP(t)),"* => *"}}var kl=new Set(["true","1"]),Fl=new Set(["false","0"]);function hD(t,e){let n=kl.has(t)||Fl.has(t),r=kl.has(e)||Fl.has(e);return(i,s)=>{let o=t==Ul||t==i,a=e==Ul||e==s;return!o&&n&&typeof i=="boolean"&&(o=i?kl.has(t):Fl.has(t)),!a&&r&&typeof s=="boolean"&&(a=s?kl.has(e):Fl.has(e)),o&&a}}var ND=":self",RP=new RegExp(`s*${ND}s*,?`,"g");function AD(t,e,n,r){return new hp(t).build(e,n,r)}var pD="",hp=class{constructor(e){this._driver=e}build(e,n,r){let i=new pp(n);return this._resetContextStyleTimingState(i),ze(this,Xs(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=pD,e.collectedStyles=new Map,e.collectedStyles.set(pD,new Map),e.currentTime=0}visitTrigger(e,n){let r=n.queryCount=0,i=n.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&n.errors.push(WO()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==A.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,n))}),l.name=c}else if(a.type==A.Transition){let l=this.visitTransition(a,n);r+=l.queryCount,i+=l.depCount,o.push(l)}else n.errors.push(qO())}),{type:A.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,n){let r=this.visitStyle(e.styles,n),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{MD(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&n.errors.push(GO(e.name,[...s.values()]))}return{type:A.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let r=ze(this,Xs(e.animation),n),i=NP(e.expr,n.errors);return{type:A.Transition,matchers:i,animation:r,queryCount:n.queryCount,depCount:n.depCount,options:hr(e.options)}}visitSequence(e,n){return{type:A.Sequence,steps:e.steps.map(r=>ze(this,r,n)),options:hr(e.options)}}visitGroup(e,n){let r=n.currentTime,i=0,s=e.steps.map(o=>{n.currentTime=r;let a=ze(this,o,n);return i=Math.max(i,n.currentTime),a});return n.currentTime=i,{type:A.Group,steps:s,options:hr(e.options)}}visitAnimate(e,n){let r=FP(e.timings,n.errors);n.currentAnimateTimings=r;let i,s=e.styles?e.styles:At({});if(s.type==A.Keyframes)i=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;let c={};r.easing&&(c.easing=r.easing),o=At(c)}n.currentTime+=r.duration+r.delay;let l=this.visitStyle(o,n);l.isEmptyStep=a,i=l}return n.currentAnimateTimings=null,{type:A.Animate,timings:r,style:i,options:null}}visitStyle(e,n){let r=this._makeStyleAst(e,n);return this._validateStyleAst(r,n),r}_makeStyleAst(e,n){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Nt?r.push(a):n.errors.push(QO(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let l of a.values())if(l.toString().indexOf(SD)>=0){s=!0;break}}}),{type:A.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){let r=n.currentAnimateTimings,i=n.currentTime,s=n.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{let c=n.collectedStyles.get(n.currentQuerySelector),u=c.get(l),d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(n.errors.push(KO(l,u.startTime,u.endTime,s,i)),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:i}),n.options&&bP(a,n.options,n.errors)})})}visitKeyframes(e,n){let r={type:A.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(YO()),r;let i=1,s=0,o=[],a=!1,l=!1,c=0,u=e.steps.map(C=>{let U=this._makeStyleAst(C,n),P=U.offset!=null?U.offset:kP(U.styles),Y=0;return P!=null&&(s++,Y=U.offset=P),l=l||Y<0||Y>1,a=a||Y<c,c=Y,o.push(Y),U});l&&n.errors.push(ZO()),a&&n.errors.push(XO());let d=e.steps.length,f=0;s>0&&s<d?n.errors.push(JO()):s==0&&(f=i/(d-1));let h=d-1,p=n.currentTime,g=n.currentAnimateTimings,v=g.duration;return u.forEach((C,U)=>{let P=f>0?U==h?1:f*U:o[U],Y=P*v;n.currentTime=p+g.delay+Y,g.duration=Y,this._validateStyleAst(C,n),C.offset=P,r.styles.push(C)}),r}visitReference(e,n){return{type:A.Reference,animation:ze(this,Xs(e.animation),n),options:hr(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:A.AnimateChild,options:hr(e.options)}}visitAnimateRef(e,n){return{type:A.AnimateRef,animation:this.visitReference(e.animation,n),options:hr(e.options)}}visitQuery(e,n){let r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;let[s,o]=OP(e.selector);n.currentQuerySelector=r.length?r+" "+s:s,We(n.collectedStyles,n.currentQuerySelector,new Map);let a=ze(this,Xs(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:A.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:hr(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(eP());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Bl(e.timings,n.errors,!0);return{type:A.Stagger,animation:ze(this,Xs(e.animation),n),timings:r,options:null}}};function OP(t){let e=!!t.split(/\s*,\s*/).find(n=>n==ND);return e&&(t=t.replace(RP,"")),t=t.replace(/@\*/g,Vl).replace(/@\w+/g,n=>Vl+"-"+n.slice(1)).replace(/:animating/g,up),[t,e]}function PP(t){return t?E({},t):null}var pp=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function kP(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let r=n;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function FP(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let s=Bl(t,e).duration;return ip(s,0,"")}let n=t;if(n.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=ip(0,0,"");return s.dynamic=!0,s.strValue=n,s}let i=Bl(n,e);return ip(i.duration,i.delay,i.easing)}function hr(t){return t?(t=E({},t),t.params&&(t.params=PP(t.params))):t={},t}function ip(t,e,n){return{duration:t,delay:e,easing:n}}function xp(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var to=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},LP=1,jP=":enter",VP=new RegExp(jP,"g"),BP=":leave",$P=new RegExp(BP,"g");function xD(t,e,n,r,i,s=new Map,o=new Map,a,l,c=[]){return new gp().buildKeyframes(t,e,n,r,i,s,o,a,l,c)}var gp=class{buildKeyframes(e,n,r,i,s,o,a,l,c,u=[]){c=c||new to;let d=new mp(e,n,c,i,s,u,[]);d.options=l;let f=l.delay?Xt(l.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([o],null,d.errors,l),ze(this,r,d);let h=d.timelines.filter(p=>p.containsAnimation());if(h.length&&a.size){let p;for(let g=h.length-1;g>=0;g--){let v=h[g];if(v.element===n){p=v;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return h.length?h.map(p=>p.buildKeyframes()):[xp(n,[],[],[],0,f,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let r=n.subInstructions.get(n.element);if(r){let i=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){let r=n.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,r),this.visitReference(e.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Xt(eo(s,i?.params??{},n.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,n,r){let s=n.currentTimeline.currentTime,o=r.duration!=null?Xt(r.duration):null,a=r.delay!=null?Xt(r.delay):null;return o!==0&&e.forEach(l=>{let c=n.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),ze(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let r=n.subContextCount,i=n,s=e.options;if(s&&(s.params||s.delay)&&(i=n.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==A.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Hl);let o=Xt(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ze(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let r=[],i=n.currentTimeline.currentTime,s=e.options&&e.options.delay?Xt(e.options.delay):0;e.steps.forEach(o=>{let a=n.createSubContext(e.options);s&&a.delayNextStep(s),ze(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(i),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let r=e.strValue,i=n.params?eo(r,n.params,n.errors):r;return Bl(i,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let r=n.currentAnimateTimings=this._visitTiming(e.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==A.Keyframes?this.visitKeyframes(s,n):(n.incrementTime(r.duration),this.visitStyle(s,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let r=n.currentAnimateTimings,i=n.currentTimeline.duration,s=r.duration,a=n.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*s),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(i+s),n.previousNode=e}visitQuery(e,n){let r=n.currentTimeline.currentTime,i=e.options||{},s=i.delay?Xt(i.delay):0;s&&(n.previousNode.type===A.Style||r==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Hl);let o=r,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,c);s&&d.delayNextStep(s),c===n.element&&(l=d.currentTimeline),ze(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let f=d.currentTimeline.currentTime;o=Math.max(o,f)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let r=n.parentContext,i=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1),l=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let u=n.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;ze(this,e.animation,n),n.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},Hl={},mp=class t{constructor(e,n,r,i,s,o,a,l){this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Hl,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new zl(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Xt(r.duration)),r.delay!=null&&(i.delay=Xt(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=eo(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let r=e.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return e}createSubContext(e=null,n,r){let i=n||this.element,s=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Hl,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,r){let i={duration:n??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new yp(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(VP,"."+this._enterClassName),e=e.replace($P,"."+this._leaveClassName);let l=r!=1,c=this._driver.query(this.element,e,l);r!==0&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&a.length==0&&o.push(tP(n)),a}},zl=class t{constructor(e,n,r,i){this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=LP,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||Nt),this._currentKeyframe.set(n,Nt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,r,i){n&&this._previousKeyframe.set("easing",n);let s=i&&i.params||{},o=UP(e,this._globalTimelineStyles);for(let[a,l]of o){let c=eo(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Nt),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,r)=>{let i=this._styleSummary.get(r);(!i||n.time>i.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{u===Ya?e.add(d):u===Nt&&n.add(d)}),r||c.set("offset",l/this.duration),i.push(c)});let s=[...e.values()],o=[...n.values()];if(r){let a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return xp(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},yp=class extends zl{constructor(e,n,r,i,s,o,a=!1){super(e,n,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){let s=[],o=r+n,a=n/o,l=new Map(e[0]);l.set("offset",0),s.push(l);let c=new Map(e[0]);c.set("offset",gD(a)),s.push(c);let u=e.length-1;for(let d=1;d<=u;d++){let f=new Map(e[d]),h=f.get("offset"),p=n+h*r;f.set("offset",gD(p/o)),s.push(f)}r=o,n=0,i="",e=s}return xp(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}};function gD(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function UP(t,e){let n=new Map,r;return t.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)n.set(s,Nt)}else for(let[s,o]of i)n.set(s,o)}),n}function mD(t,e,n,r,i,s,o,a,l,c,u,d,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:f}}var sp={},Wl=class{constructor(e,n,r){this._triggerName=e,this.ast=n,this._stateStyles=r}match(e,n,r,i){return HP(this.ast.matchers,e,n,r,i)}buildStyles(e,n,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(n,r):new Map}build(e,n,r,i,s,o,a,l,c,u){let d=[],f=this.ast.options&&this.ast.options.params||sp,h=a&&a.params||sp,p=this.buildStyles(r,h,d),g=l&&l.params||sp,v=this.buildStyles(i,g,d),C=new Set,U=new Map,P=new Map,Y=i==="void",Le={params:RD(g,f),delay:this.ast.options?.delay},re=u?[]:xD(e,n,this.ast.animation,s,o,p,v,Le,c,d),ie=0;return re.forEach(ge=>{ie=Math.max(ge.duration+ge.delay,ie)}),d.length?mD(n,this._triggerName,r,i,Y,p,v,[],[],U,P,ie,d):(re.forEach(ge=>{let jt=ge.element,Jt=We(U,jt,new Set);ge.preStyleProps.forEach(Sn=>Jt.add(Sn));let Op=We(P,jt,new Set);ge.postStyleProps.forEach(Sn=>Op.add(Sn)),jt!==n&&C.add(jt)}),mD(n,this._triggerName,r,i,Y,p,v,re,[...C.values()],U,P,ie))}};function HP(t,e,n,r,i){return t.some(s=>s(e,n,r,i))}function RD(t,e){let n=E({},e);return Object.entries(t).forEach(([r,i])=>{i!=null&&(n[r]=i)}),n}var vp=class{constructor(e,n,r){this.styles=e,this.defaultParams=n,this.normalizer=r}buildStyles(e,n){let r=new Map,i=RD(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=eo(o,i,n));let l=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,l,o,n),r.set(a,o)})}),r}};function zP(t,e,n){return new _p(t,e,n)}var _p=class{constructor(e,n,r){this.name=e,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states=new Map,n.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new vp(i.style,s,r))}),yD(this.states,"true","1"),yD(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new Wl(e,i,this.states))}),this.fallbackTransition=WP(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,r,i){return this.transitionFactories.find(o=>o.match(e,n,r,i))||null}matchStyles(e,n,r){return this.fallbackTransition.buildStyles(e,n,r)}};function WP(t,e,n){let r=[(o,a)=>!0],i={type:A.Sequence,steps:[],options:null},s={type:A.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Wl(t,s,e)}function yD(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var qP=new to,wp=class{constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let r=[],i=[],s=AD(this._driver,n,r,i);if(r.length)throw oP(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,n,r){let i=e.element,s=CD(this._normalizer,e.keyframes,n,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=xD(this._driver,n,s,TD,cp,new Map,new Map,r,qP,i),o.forEach(u=>{let d=We(a,u.element,new Map);u.postStyleProps.forEach(f=>d.set(f,null))})):(i.push(aP()),o=[]),i.length)throw lP(i);a.forEach((u,d)=>{u.forEach((f,h)=>{u.set(h,this._driver.computeStyle(d,h,Nt))})});let l=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=In(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw cP(e);return n}listen(e,n,r,i){let s=Sp(n,"","","");return Ip(this._getPlayer(e),r,s,i),()=>{}}command(e,n,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,n,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},vD="ng-animate-queued",GP=".ng-animate-queued",op="ng-animate-disabled",QP=".ng-animate-disabled",KP="ng-star-inserted",YP=".ng-star-inserted",ZP=[],OD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},XP={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},yt="__ng_removed",no=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=ek(i),r){let s=e,{value:o}=s,a=Bp(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let r=this.options.params;Object.keys(n).forEach(i=>{r[i]==null&&(r[i]=n[i])})}}},Js="void",ap=new no(Js),Ep=class{constructor(e,n,r){this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,rt(n,this._hostClassName)}listen(e,n,r,i){if(!this._triggers.has(n))throw uP(r,n);if(r==null||r.length==0)throw dP(n);if(!tk(r))throw fP(r,n);let s=We(this._elementListeners,e,[]),o={name:n,phase:r,callback:i};s.push(o);let a=We(this._engine.statesByElement,e,new Map);return a.has(n)||(rt(e,Pl),rt(e,Pl+"-"+n),a.set(n,ap)),()=>{this._engine.afterFlush(()=>{let l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw hP(e);return n}trigger(e,n,r,i=!0){let s=this._getTrigger(n),o=new ro(this.id,n,e),a=this._engine.statesByElement.get(e);a||(rt(e,Pl),rt(e,Pl+"-"+n),this._engine.statesByElement.set(e,a=new Map));let l=a.get(n),c=new no(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(n,c),l||(l=ap),!(c.value===Js)&&l.value===c.value){if(!ik(l.params,c.params)){let g=[],v=s.matchStyles(l.value,l.params,g),C=s.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{pr(e,v),Lt(e,C)})}return}let f=We(this._engine.playersByElement,e,[]);f.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let h=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!h){if(!i)return;h=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:h,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(rt(e,vD),o.onStart(()=>{Ii(e,vD)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let v=this._engine.playersByElement.get(e);if(v){let C=v.indexOf(o);C>=0&&v.splice(C,1)}}),this.players.push(o),f.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let r=this._engine.driver.query(e,Vl,!0);r.forEach(i=>{if(i[yt])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,n,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,Js,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),r&&In(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){let i=new Set;n.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let l=this._triggers.get(o).fallbackTransition,c=r.get(o)||ap,u=new no(Js),d=new ro(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,n);else{let s=e[yt];(!s||s===OD)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,n))}}insertNode(e,n){rt(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let l=Sp(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,Ip(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Dp=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,r){this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,n){let r=new Ep(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,n){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){let l=i.get(a);if(l){let c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(n,e),e}register(e,n){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,n)),r}registerTrigger(e,n,r){let i=this._namespaceLookup[e];i&&i.register(n,r)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&n.add(s)}}return n}trigger(e,n,r,i){if(Ll(n)){let s=this._fetchNamespace(e);if(s)return s.trigger(n,r,i),!0}return!1}insertNode(e,n,r,i){if(!Ll(n))return;let s=n[yt];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),rt(e,op)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ii(e,op))}removeNode(e,n,r){if(Ll(n)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(n,r):this.markElementAsRemoved(e,n,!1,r);let s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,r)}else this._onRemovalComplete(n,r)}markElementAsRemoved(e,n,r,i,s){this.collectedLeaveElements.push(n),n[yt]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,r,i,s){return Ll(n)?this._fetchNamespace(e).listen(n,r,i,s):()=>{}}_buildInstruction(e,n,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,Vl,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,up,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return In(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[yt];if(n&&n.setForRemoval){if(e[yt]=OD,n.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(op)&&this.markElementAsDisabled(e,!1),this.driver.query(e,QP,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];rt(i,KP)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{n=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],n.length?In(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw pP(e)}_flushAnimations(e,n){let r=new to,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(w=>{u.add(w);let D=this.driver.query(w,GP,!0);for(let S=0;S<D.length;S++)u.add(D[S])});let d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=ED(f,this.collectedEnterElements),p=new Map,g=0;h.forEach((w,D)=>{let S=TD+g++;p.set(D,S),w.forEach(W=>rt(W,S))});let v=[],C=new Set,U=new Set;for(let w=0;w<this.collectedLeaveElements.length;w++){let D=this.collectedLeaveElements[w],S=D[yt];S&&S.setForRemoval&&(v.push(D),C.add(D),S.hasAnimation?this.driver.query(D,YP,!0).forEach(W=>C.add(W)):U.add(D))}let P=new Map,Y=ED(f,Array.from(C));Y.forEach((w,D)=>{let S=cp+g++;P.set(D,S),w.forEach(W=>rt(W,S))}),e.push(()=>{h.forEach((w,D)=>{let S=p.get(D);w.forEach(W=>Ii(W,S))}),Y.forEach((w,D)=>{let S=P.get(D);w.forEach(W=>Ii(W,S))}),v.forEach(w=>{this.processLeaveNode(w)})});let Le=[],re=[];for(let w=this._namespaceList.length-1;w>=0;w--)this._namespaceList[w].drainQueuedTransitions(n).forEach(S=>{let W=S.player,me=S.element;if(Le.push(W),this.collectedEnterElements.length){let Ce=me[yt];if(Ce&&Ce.setForMove){if(Ce.previousTriggersValues&&Ce.previousTriggersValues.has(S.triggerName)){let Tn=Ce.previousTriggersValues.get(S.triggerName),qe=this.statesByElement.get(S.element);if(qe&&qe.has(S.triggerName)){let io=qe.get(S.triggerName);io.value=Tn,qe.set(S.triggerName,io)}}W.destroy();return}}let vt=!d||!this.driver.containsElement(d,me),je=P.get(me),en=p.get(me),ne=this._buildInstruction(S,r,en,je,vt);if(ne.errors&&ne.errors.length){re.push(ne);return}if(vt){W.onStart(()=>pr(me,ne.fromStyles)),W.onDestroy(()=>Lt(me,ne.toStyles)),i.push(W);return}if(S.isFallbackTransition){W.onStart(()=>pr(me,ne.fromStyles)),W.onDestroy(()=>Lt(me,ne.toStyles)),i.push(W);return}let Fp=[];ne.timelines.forEach(Ce=>{Ce.stretchStartingKeyframe=!0,this.disabledNodes.has(Ce.element)||Fp.push(Ce)}),ne.timelines=Fp,r.append(me,ne.timelines);let $D={instruction:ne,player:W,element:me};o.push($D),ne.queriedElements.forEach(Ce=>We(a,Ce,[]).push(W)),ne.preStyleProps.forEach((Ce,Tn)=>{if(Ce.size){let qe=l.get(Tn);qe||l.set(Tn,qe=new Set),Ce.forEach((io,Zl)=>qe.add(Zl))}}),ne.postStyleProps.forEach((Ce,Tn)=>{let qe=c.get(Tn);qe||c.set(Tn,qe=new Set),Ce.forEach((io,Zl)=>qe.add(Zl))})});if(re.length){let w=[];re.forEach(D=>{w.push(gP(D.triggerName,D.errors))}),Le.forEach(D=>D.destroy()),this.reportError(w)}let ie=new Map,ge=new Map;o.forEach(w=>{let D=w.element;r.has(D)&&(ge.set(D,D),this._beforeAnimationBuild(w.player.namespaceId,w.instruction,ie))}),i.forEach(w=>{let D=w.element;this._getPreviousPlayers(D,!1,w.namespaceId,w.triggerName,null).forEach(W=>{We(ie,D,[]).push(W),W.destroy()})});let jt=v.filter(w=>DD(w,l,c)),Jt=new Map;wD(Jt,this.driver,U,c,Nt).forEach(w=>{DD(w,l,c)&&jt.push(w)});let Sn=new Map;h.forEach((w,D)=>{wD(Sn,this.driver,new Set(w),l,Ya)}),jt.forEach(w=>{let D=Jt.get(w),S=Sn.get(w);Jt.set(w,new Map([...D?.entries()??[],...S?.entries()??[]]))});let Yl=[],Pp=[],kp={};o.forEach(w=>{let{element:D,player:S,instruction:W}=w;if(r.has(D)){if(u.has(D)){S.onDestroy(()=>Lt(D,W.toStyles)),S.disabled=!0,S.overrideTotalTime(W.totalTime),i.push(S);return}let me=kp;if(ge.size>1){let je=D,en=[];for(;je=je.parentNode;){let ne=ge.get(je);if(ne){me=ne;break}en.push(je)}en.forEach(ne=>ge.set(ne,me))}let vt=this._buildAnimation(S.namespaceId,W,ie,s,Sn,Jt);if(S.setRealPlayer(vt),me===kp)Yl.push(S);else{let je=this.playersByElement.get(me);je&&je.length&&(S.parentPlayer=In(je)),i.push(S)}}else pr(D,W.fromStyles),S.onDestroy(()=>Lt(D,W.toStyles)),Pp.push(S),u.has(D)&&i.push(S)}),Pp.forEach(w=>{let D=s.get(w.element);if(D&&D.length){let S=In(D);w.setRealPlayer(S)}}),i.forEach(w=>{w.parentPlayer?w.syncPlayerEvents(w.parentPlayer):w.destroy()});for(let w=0;w<v.length;w++){let D=v[w],S=D[yt];if(Ii(D,cp),S&&S.hasAnimation)continue;let W=[];if(a.size){let vt=a.get(D);vt&&vt.length&&W.push(...vt);let je=this.driver.query(D,up,!0);for(let en=0;en<je.length;en++){let ne=a.get(je[en]);ne&&ne.length&&W.push(...ne)}}let me=W.filter(vt=>!vt.destroyed);me.length?nk(this,D,me):this.processLeaveNode(D)}return v.length=0,Yl.forEach(w=>{this.players.push(w),w.onDone(()=>{w.destroy();let D=this.players.indexOf(w);this.players.splice(D,1)}),w.play()}),Yl}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,r,i,s){let o=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let l=!s||s==Js;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,n,r){let i=n.triggerName,s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:i;for(let l of n.timelines){let c=l.element,u=c!==s,d=We(r,c,[]);this._getPreviousPlayers(c,u,o,a,n.toState).forEach(h=>{let p=h.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),h.destroy(),d.push(h)})}pr(s,n.fromStyles)}_buildAnimation(e,n,r,i,s,o){let a=n.triggerName,l=n.element,c=[],u=new Set,d=new Set,f=n.timelines.map(p=>{let g=p.element;u.add(g);let v=g[yt];if(v&&v.removedBeforeQueried)return new yn(p.duration,p.delay);let C=g!==l,U=rk((r.get(g)||ZP).map(ie=>ie.getRealPlayer())).filter(ie=>{let ge=ie;return ge.element?ge.element===g:!1}),P=s.get(g),Y=o.get(g),Le=CD(this._normalizer,p.keyframes,P,Y),re=this._buildPlayer(p,Le,U);if(p.subTimeline&&i&&d.add(g),C){let ie=new ro(e,a,g);ie.setRealPlayer(re),c.push(ie)}return re});c.forEach(p=>{We(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>JP(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>rt(p,fD));let h=In(f);return h.onDestroy(()=>{u.forEach(p=>Ii(p,fD)),Lt(l,n.toStyles)}),d.forEach(p=>{We(i,p,[]).push(h)}),h}_buildPlayer(e,n,r){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,r):new yn(e.duration,e.delay)}},ro=class{constructor(e,n,r){this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new yn,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,r)=>{n.forEach(i=>Ip(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){We(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function JP(t,e,n){let r=t.get(e);if(r){if(r.length){let i=r.indexOf(n);r.splice(i,1)}r.length==0&&t.delete(e)}return r}function ek(t){return t??null}function Ll(t){return t&&t.nodeType===1}function tk(t){return t=="start"||t=="done"}function _D(t,e){let n=t.style.display;return t.style.display=e??"none",n}function wD(t,e,n,r,i){let s=[];n.forEach(l=>s.push(_D(l)));let o=[];r.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let f=e.computeStyle(c,d,i);u.set(d,f),(!f||f.length==0)&&(c[yt]=XP,o.push(c))}),t.set(c,u)});let a=0;return n.forEach(l=>_D(l,s[a++])),o}function ED(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let l=s.get(a);if(l)return l;let c=a.parentNode;return n.has(c)?l=c:i.has(c)?l=r:l=o(c),s.set(a,l),l}return e.forEach(a=>{let l=o(a);l!==r&&n.get(l).push(a)}),n}function rt(t,e){t.classList?.add(e)}function Ii(t,e){t.classList?.remove(e)}function nk(t,e,n){In(n).onDone(()=>t.processLeaveNode(e))}function rk(t){let e=[];return PD(t,e),e}function PD(t,e){for(let n=0;n<t.length;n++){let r=t[n];r instanceof Ds?PD(r.players,e):e.push(r)}}function ik(t,e){let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){let s=n[i];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}function DD(t,e,n){let r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(s=>i.add(s)):e.set(t,r),n.delete(t),!0}var Ti=class{constructor(e,n,r){this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Dp(e.body,n,r),this._timelineEngine=new wp(e.body,n,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,n,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let l=[],c=[],u=AD(this._driver,s,l,c);if(l.length)throw iP(i,l);c.length&&void 0,a=zP(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,i,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,r,i){this._transitionEngine.insertNode(e,n,r,i)}onRemove(e,n,r){this._transitionEngine.removeNode(e,n,r)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,r,i){if(r.charAt(0)=="@"){let[s,o]=uD(r),a=i;this._timelineEngine.command(s,n,o,a)}else this._transitionEngine.trigger(e,n,r,i)}listen(e,n,r,i,s){if(r.charAt(0)=="@"){let[o,a]=uD(r);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function sk(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=lp(e[0]),e.length>1&&(r=lp(e[e.length-1]))):e instanceof Map&&(n=lp(e)),n||r?new Cp(t,n,r):null}var Si=class Si{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=Si.initialStylesByElement.get(e);i||Si.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Lt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Lt(this._element,this._initialStyles),this._endStyles&&(Lt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Si.initialStylesByElement.delete(this._element),this._startStyles&&(pr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(pr(this._element,this._endStyles),this._endStyles=null),Lt(this._element,this._initialStyles),this._state=3)}};Si.initialStylesByElement=new WeakMap;var Cp=Si;function lp(t){let e=null;return t.forEach((n,r)=>{ok(r)&&(e=e||new Map,e.set(r,n))}),e}function ok(t){return t==="display"||t==="position"}var ql=class{constructor(e,n,r,i){this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(e,n,r){return e.animate(this._convertKeyframesToObject(n),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Ap(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Gl=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,n){return bD(e,n)}getParentElement(e){return Tp(e)}query(e,n,r){return ID(e,n,r)}computeStyle(e,n,r){return Ap(e,n)}animate(e,n,r,i,s,o=[]){let a=i==0?"both":"forwards",l={duration:r,delay:i,fill:a};s&&(l.easing=s);let c=new Map,u=o.filter(h=>h instanceof ql);SP(r,i)&&u.forEach(h=>{h.currentSnapshot.forEach((p,g)=>c.set(g,p))});let d=CP(n).map(h=>new Map(h));d=TP(e,d,c);let f=sk(e,d);return new ql(e,d,l,f)}};var jl="@",kD="@.disabled",Ql=class{constructor(e,n,r,i){this.namespaceId=e,this.delegate=n,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,r,i=!0){this.delegate.insertBefore(e,n,r),this.engine.onInsert(this.namespaceId,n,e,i)}removeChild(e,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){n.charAt(0)==jl&&n==kD?this.disableAnimations(e,!!r):this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.delegate.listen(e,n,r)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},bp=class extends Ql{constructor(e,n,r,i,s){super(n,r,i,s),this.factory=e,this.namespaceId=n}setProperty(e,n,r){n.charAt(0)==jl?n.charAt(1)=="."&&n==kD?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,n.slice(1),r):this.delegate.setProperty(e,n,r)}listen(e,n,r){if(n.charAt(0)==jl){let i=ak(e),s=n.slice(1),o="";return s.charAt(0)!=jl&&([s,o]=lk(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let l=a._data||-1;this.factory.scheduleListenerCallback(l,r,a)})}return this.delegate.listen(e,n,r)}};function ak(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function lk(t){let e=t.indexOf("."),n=t.substring(0,e),r=t.slice(e+1);return[n,r]}var Kl=class{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(i,s)=>{let o=s?.parentNode(i);o&&s.removeChild(o,i)}}createRenderer(e,n){let r="",i=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let c=this._rendererCache,u=c.get(i);if(!u){let d=()=>c.delete(i);u=new Ql(r,i,this.engine,d),c.set(i,u)}return u}let s=n.id,o=n.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return n.data.animation.forEach(a),new bp(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([n,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var uk=(()=>{let e=class e extends Ti{constructor(r,i,s){super(r,i,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(i){return new(i||e)(M(Oe),M(gr),M(mr))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function dk(){return new $l}function fk(t,e,n){return new Kl(t,e,n)}var LD=[{provide:mr,useFactory:dk},{provide:Ti,useClass:uk},{provide:ln,useFactory:fk,deps:[xa,Ti,te]}],FD=[{provide:gr,useFactory:()=>new Gl},{provide:ju,useValue:"BrowserAnimations"},...LD],hk=[{provide:gr,useClass:Mp},{provide:ju,useValue:"NoopAnimations"},...LD],jD=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:r.disableAnimations?hk:FD}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=dn({type:e}),e.\u0275inj=un({providers:FD,imports:[Wv]});let t=e;return t})();var VD={providers:[M_(lD),Su([jD])]};var BD=(()=>{let e=class e{constructor(){this.title="cardo"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["app-root"]],standalone:!0,features:[et],decls:1,vars:0,template:function(i,s){i&1&&Je(0,"router-outlet")},dependencies:[pn,rf]});let t=e;return t})();Hv(BD,VD).catch(t=>console.error(t));
